<!DOCTYPE html>
<html lang="es" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduGrade - Panel Administrativo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            800: '#5b21b6',
                            900: '#4c1d95',
                            950: '#2e1065',
                        },
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-in': 'slideIn 0.5s ease-out',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-slow': 'bounce 2s infinite',
                        'scale-in': 'scaleIn 0.5s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideIn: {
                            '0%': { transform: 'translateY(10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        scaleIn: {
                            '0%': { transform: 'scale(0.9)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        },
                    },
                    transitionProperty: {
                        'height': 'height',
                        'spacing': 'margin, padding',
                    }
                },
            },
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chart.js/3.7.0/chart.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
            100% { transform: translateY(0px); }
        }
        .float-animation { animation: float 3s ease-in-out infinite; }
        
        /* Progress bar animation */
        @keyframes progress {
            0% { width: 0%; }
            100% { width: 100%; }
        }
        .progress-animation { animation: progress 1.5s ease-out; }
        
        /* Improved notification animation */
        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.4); }
            70% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(139, 92, 246, 0); }
        }
        .pulse-border-animation { animation: pulse-border 2s infinite; }
        
        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(99, 102, 241, 0.5);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(99, 102, 241, 0.7);
        }
        
        .dark ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .dark ::-webkit-scrollbar-thumb {
            background: rgba(139, 92, 246, 0.5);
        }
        
        .dark ::-webkit-scrollbar-thumb:hover {
            background: rgba(139, 92, 246, 0.7);
        }
        
        /* Chart tooltip styling fix for dark mode */
        #chartjs-tooltip {
            background-color: rgba(255, 255, 255, 0.95);
            color: #1f2937;
            border-radius: 8px;
            padding: 8px 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .dark #chartjs-tooltip {
            background-color: rgba(31, 41, 55, 0.95);
            color: #f3f4f6;
        }

        /* Users section table */
        .data-table {
            border-collapse: separate;
            border-spacing: 0;
            width: 100%;
        }
        
        .data-table th {
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        /* Modal animations */
        .modal-enter {
            animation: modalEnter 0.3s ease-out forwards;
        }
        
        .modal-backdrop-enter {
            animation: modalBackdropEnter 0.3s ease-out forwards;
        }
        
        @keyframes modalEnter {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(-10px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        @keyframes modalBackdropEnter {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* Grade cells */
        .grade-cell {
            position: relative;
            cursor: pointer;
        }
        
        .grade-cell:hover::after {
            content: '✎';
            position: absolute;
            top: 50%;
            right: 8px;
            transform: translateY(-50%);
            color: rgba(139, 92, 246, 0.7);
            font-size: 14px;
        }
        
        .grade-table td, .grade-table th {
            min-width: 100px;
        }
        
        .grade-table th.student-name, .grade-table td.student-name {
            position: sticky;
            left: 0;
            background-color: inherit;
            z-index: 20;
            box-shadow: 4px 0 6px -4px rgba(0, 0, 0, 0.1);
        }
        
        .dark .grade-table th.student-name, .dark .grade-table td.student-name {
            box-shadow: 4px 0 6px -4px rgba(0, 0, 0, 0.3);
        }
        
        /* Trend indicators */
        .trend-indicator {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-left: 4px;
        }
        
        .trend-up {
            background-color: rgba(16, 185, 129, 0.2);
            color: rgb(16, 185, 129);
        }
        
        .trend-down {
            background-color: rgba(239, 68, 68, 0.2);
            color: rgb(239, 68, 68);
        }
        
        .trend-neutral {
            background-color: rgba(107, 114, 128, 0.2);
            color: rgb(107, 114, 128);
        }
        
        /* Recommendation card hover effect */
        .recommendation-card {
            transition: all 0.3s ease;
        }
        
        .recommendation-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
    </style>
</head>
<body class="antialiased bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
    <!-- Overlay for mobile sidebar -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-40 hidden md:hidden transition-opacity duration-300"
        onclick="toggleSidebar()"></div>

    <!-- Navbar -->
    <nav class="bg-gradient-to-r from-primary-600 to-purple-500 dark:from-primary-900 dark:to-purple-900 text-white fixed w-full top-0 z-30 shadow-md transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <button id="sidebar-toggle" class="mr-3 text-xl focus:outline-none md:hidden" aria-label="Toggle Menu" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="flex items-center">
                        <i class="fas fa-graduation-cap mr-3 text-xl"></i>
                        <h1 class="text-xl font-bold">EduGrade</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- Notifications -->
                    <div class="relative">
                        <button id="notifications-button" class="text-white focus:outline-none relative" aria-label="Notificaciones" aria-expanded="false">
                            <i class="fas fa-bell text-xl"></i>
                            <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center pulse-border-animation">3</span>
                        </button>
                        <div id="notifications-menu" class="hidden origin-top-right absolute right-0 mt-2 w-80 rounded-lg shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 py-1 focus:outline-none z-50 transition-all duration-200 transform opacity-0 scale-95" role="menu" aria-orientation="vertical" aria-labelledby="notifications-button" tabindex="-1">
                            <div class="px-4 py-2 border-b border-gray-100 dark:border-gray-700">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-200">Notificaciones</h3>
                                    <span class="bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 text-xs font-medium rounded-full px-2 py-0.5">3 nuevas</span>
                                </div>
                            </div>
                            
                            <!-- Notification items -->
                            <div class="max-h-72 overflow-y-auto">
                                <!-- Unread notification -->
                                <div class="px-4 py-3 border-l-4 border-primary-500 dark:border-primary-400 bg-primary-50 dark:bg-primary-900/20 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150">
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-9 h-9 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center">
                                            <i class="fas fa-user-edit text-primary-600 dark:text-primary-400"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-700 dark:text-gray-200">Nueva calificación registrada</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">María García - Matemáticas - 9.2</p>
                                            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">Hace 5 minutos</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Unread notification -->
                                <div class="px-4 py-3 border-l-4 border-primary-500 dark:border-primary-400 bg-primary-50 dark:bg-primary-900/20 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150">
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-9 h-9 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center">
                                            <i class="fas fa-exclamation-triangle text-yellow-600 dark:text-yellow-400"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-700 dark:text-gray-200">Recordatorio importante</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">Entrega de boletines en 3 días</p>
                                            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">Hace 1 hora</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Unread notification -->
                                <div class="px-4 py-3 border-l-4 border-primary-500 dark:border-primary-400 bg-primary-50 dark:bg-primary-900/20 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150">
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center">
                                            <i class="fas fa-user-plus text-green-600 dark:text-green-400"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-700 dark:text-gray-200">Nuevo estudiante asignado</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">Carlos Martínez - 3er Grado</p>
                                            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">Ayer</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Read notification -->
                                <div class="px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150">
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-9 h-9 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center">
                                            <i class="fas fa-calendar-check text-blue-600 dark:text-blue-400"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-700 dark:text-gray-200">Reunión programada</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">Consejo académico - 15/11/2023</p>
                                            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">Hace 2 días</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Read notification -->
                                <div class="px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150">
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-9 h-9 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center">
                                            <i class="fas fa-file-alt text-purple-600 dark:text-purple-400"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-700 dark:text-gray-200">Informe mensual disponible</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">Estadísticas de octubre completadas</p>
                                            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">Hace 5 días</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Footer -->
                            <div class="px-4 py-2 border-t border-gray-100 dark:border-gray-700 text-center">
                                <button class="text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium transition-colors duration-200">
                                    Marcar todas como leídas
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Dark mode toggle -->
                    <button id="theme-toggle" class="text-white focus:outline-none" aria-label="Toggle Dark Mode">
                        <i class="fas fa-moon text-xl dark:hidden"></i>
                        <i class="fas fa-sun hidden text-xl dark:block"></i>
                    </button>

                    <!-- User menu -->
                    <div class="relative">
                        <button id="user-menu-button" class="flex items-center text-sm text-white focus:outline-none" aria-expanded="false">
                            <span class="mr-2 hidden sm:block">Administrador</span>
                            <div class="h-8 w-8 rounded-full bg-primary-400 dark:bg-primary-800 flex items-center justify-center">
                                <i class="fas fa-user"></i>
                            </div>
                        </button>
                        <div id="user-menu" class="hidden origin-top-right absolute right-0 mt-2 w-48 rounded-lg shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 py-1 focus:outline-none z-50 transition-all duration-200 transform opacity-0 scale-95" role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700" role="menuitem">
                                <i class="fas fa-user-circle mr-2"></i> Perfil
                            </a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700" role="menuitem">
                                <i class="fas fa-cog mr-2"></i> Configuración
                            </a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700" role="menuitem">
                                <i class="fas fa-sign-out-alt mr-2"></i> Cerrar Sesión
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Layout principal -->
    <div class="flex pt-16">
        <!-- Sidebar -->
        <aside id="sidebar" class="fixed left-0 transform -translate-x-full md:translate-x-0 h-full bg-white dark:bg-gray-800 shadow-lg transition-transform duration-300 ease-in-out z-40 w-64 overflow-y-auto">
            <div class="p-6">
                <!-- Summary card -->
                <div class="bg-primary-50 dark:bg-primary-900/30 rounded-xl p-4 mb-6 border border-primary-100 dark:border-primary-800">
                    <h3 class="text-sm font-semibold text-primary-700 dark:text-primary-300 mb-1">Estado del Sistema</h3>
                    <div class="flex items-end">
                        <p class="text-3xl font-bold text-primary-600 dark:text-primary-400">Activo</p>
                        <div class="ml-2 px-2 py-0.5 text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full font-medium">
                            100%
                        </div>
                    </div>
                    <div class="mt-2 space-y-1">
                        <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                            <div class="bg-green-500 h-full rounded-full progress-animation" style="width: 100%"></div>
                        </div>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Última verificación: Hoy 10:30</p>
                    </div>
                </div>

                <nav class="space-y-6">
                    <!-- Dashboard Section -->
                    <div class="animate-fade-in" style="animation-delay: 0.1s">
                        <h3 class="text-xs uppercase text-gray-500 dark:text-gray-400 font-semibold mb-3 flex items-center">
                            <i class="fas fa-th-large mr-2"></i> Principal
                        </h3>
                        <div class="space-y-1">
                            <a href="#" class="flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 rounded-lg font-medium transition-colors duration-200 group" onclick="showSection('dashboard-section')">
                                <i class="fas fa-tachometer-alt mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span>Dashboard</span>
                            </a>
                        </div>
                    </div>

                    <!-- Administración Section -->
                    <div class="animate-fade-in" style="animation-delay: 0.1s">
                        <h3 class="text-xs uppercase text-gray-500 dark:text-gray-400 font-semibold mb-3 flex items-center">
                            <i class="fas fa-users-cog mr-2"></i> Administración
                        </h3>
                        <div class="space-y-1">
                            <a href="#" class="flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" onclick="showSection('users-section')">
                                <i class="fas fa-users mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span>Usuarios</span>
                            </a>
                            <a href="#" class="flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group">
                                <i class="fas fa-user-lock mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span>Roles y Permisos</span>
                            </a>
                        </div>
                    </div>

                    <!-- Gestión Section -->
                    <div class="animate-fade-in" style="animation-delay: 0.2s">
                        <h3 class="text-xs uppercase text-gray-500 dark:text-gray-400 font-semibold mb-3 flex items-center">
                            <i class="fas fa-school mr-2"></i> Gestión Educativa
                        </h3>
                        <div class="space-y-1">
                            <a href="#" class="flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" onclick="showSection('students-section')">
                                <i class="fas fa-user-graduate mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span>Estudiantes</span>
                            </a>
                            <a href="#" class="flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" onclick="showSection('teachers-section')">
                                <i class="fas fa-chalkboard-teacher mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span>Profesores</span>
                            </a>
                            <a href="#" class="flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" onclick="showSection('subjects-section')">
                                <i class="fas fa-book mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span>Materias</span>
                            </a>
                            <a href="#" class="flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" onclick="showSection('grades-section')">
                                <i class="fas fa-star mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span>Calificaciones</span>
                            </a>
                        </div>
                    </div>

                    <!-- Reports Section -->
                    <div class="animate-fade-in" style="animation-delay: 0.3s">
                        <h3 class="text-xs uppercase text-gray-500 dark:text-gray-400 font-semibold mb-3 flex items-center">
                            <i class="fas fa-chart-line mr-2"></i> Reportes y Análisis
                        </h3>
                        <div class="space-y-1">
                            <a href="#" class="flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group">
                                <i class="fas fa-chart-pie mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span>Estadísticas</span>
                            </a>
                            <a href="http://127.0.0.1:5501/templates/reporte.html" class="flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group">
                                <i class="fas fa-file-alt mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span>Reportes</span>
                            </a>
                            <a href="#" class="flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" onclick="showSection('comparative-section')">
                                <i class="fas fa-chart-bar mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span>Comparativa</span>
                                <span class="ml-2 px-1.5 py-0.5 text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full font-medium">Nuevo</span>
                            </a>
                        </div>
                    </div>

                    <!-- Settings Section -->
                    <div class="animate-fade-in" style="animation-delay: 0.3s">
                        <h3 class="text-xs uppercase text-gray-500 dark:text-gray-400 font-semibold mb-3 flex items-center">
                            <i class="fas fa-cog mr-2"></i> Configuración
                        </h3>
                        <div class="space-y-1">
                            <a href="#" class="flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group">
                                <i class="fas fa-user-cog mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span>Perfil</span>
                            </a>
                            <a href="#" class="flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group">
                                <i class="fas fa-shield-alt mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span>Seguridad</span>
                            </a>
                        </div>
                    </div>
                </nav>

                <!-- Help & Support Section -->
                <div class="mt-8 p-4 bg-gradient-to-br from-primary-100 to-purple-100 dark:from-primary-900/40 dark:to-purple-900/40 rounded-xl border border-primary-200 dark:border-primary-800/50">
                    <h4 class="font-medium text-primary-800 dark:text-primary-300 flex items-center">
                        <i class="fas fa-headset mr-2"></i> ¿Necesitas ayuda?
                    </h4>
                    <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">Contacta a soporte técnico para resolver tus dudas</p>
                    <button class="mt-3 text-sm w-full py-1.5 px-3 bg-white dark:bg-gray-800 text-primary-700 dark:text-primary-300 rounded-lg border border-primary-300 dark:border-primary-700 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors duration-200">
                        Contactar Soporte
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main content -->
        <main class="flex-1 p-6 md:ml-64 transition-all duration-300">
            <!-- Dashboard Section -->
            <div id="dashboard-section" class="animate-fade-in">
                <!-- Welcome section -->
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Panel Administrativo</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1">Bienvenido de nuevo. Aquí tienes un resumen de la actividad reciente.</p>
                    </div>
                    <div class="mt-4 sm:mt-0">
                        <div class="flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-300">
                            <i class="fas fa-calendar-alt text-primary-500 dark:text-primary-400"></i>
                            <span id="current-date"></span>
                        </div>
                    </div>
                </div>

                <!-- Stats cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                    <!-- Users Card -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300 animate-slide-in" style="animation-delay: 0.1s">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center float-animation">
                                <i class="fas fa-users text-indigo-500 dark:text-indigo-400 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">Usuarios</h3>
                                <div class="flex items-end">
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white">254</p>
                                    <span class="ml-2 text-xs font-medium text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/30 rounded-full px-2 py-0.5">
                                        +12% <i class="fas fa-arrow-up ml-1"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700">
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-500 dark:text-gray-400">Activos hoy</span>
                                <span class="font-medium text-gray-700 dark:text-gray-200">134</span>
                            </div>
                        </div>
                    </div>

                    <!-- Students Card -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300 animate-slide-in" style="animation-delay: 0.1s">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center float-animation">
                                <i class="fas fa-user-graduate text-blue-500 dark:text-blue-400 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">Estudiantes</h3>
                                <div class="flex items-end">
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white">120</p>
                                    <span class="ml-2 text-xs font-medium text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/30 rounded-full px-2 py-0.5">
                                        +8% <i class="fas fa-arrow-up ml-1"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700">
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-500 dark:text-gray-400">Activos hoy</span>
                                <span class="font-medium text-gray-700 dark:text-gray-200">84</span>
                            </div>
                        </div>
                    </div>

                    <!-- Teachers Card -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300 animate-slide-in" style="animation-delay: 0.2s">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center float-animation">
                                <i class="fas fa-chalkboard-teacher text-purple-500 dark:text-purple-400 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">Profesores</h3>
                                <div class="flex items-end">
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white">45</p>
                                    <span class="ml-2 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-full px-2 py-0.5">
                                        Estable
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700">
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-500 dark:text-gray-400">Activos hoy</span>
                                <span class="font-medium text-gray-700 dark:text-gray-200">32</span>
                            </div>
                        </div>
                    </div>

                    <!-- Average Card -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300 animate-slide-in" style="animation-delay: 0.3s">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center float-animation">
                                <i class="fas fa-star text-yellow-500 dark:text-yellow-400 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">Promedio General</h3>
                                <div class="flex items-end">
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white">8.4</p>
                                    <span class="ml-2 text-xs font-medium text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/30 rounded-full px-2 py-0.5">
                                        +0.3 <i class="fas fa-arrow-up ml-1"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700">
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-500 dark:text-gray-400">Mayor promedio</span>
                                <span class="font-medium text-gray-700 dark:text-gray-200">Ciencias (9.0)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-6 animate-fade-in">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 flex items-center">
                            <i class="fas fa-chart-bar text-primary-500 dark:text-primary-400 mr-2"></i>
                            Promedio de Calificaciones
                        </h3>
                        <div class="mt-4 sm:mt-0 flex items-center space-x-3">
                            <select id="chart-period" class="text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-1.5 px-3 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400">
                                <option value="month">Este Mes</option>
                                <option value="quarter">Este Trimestre</option>
                                <option value="year" selected>Este Año</option>
                            </select>
                            <button id="download-chart" class="text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-1.5 px-3 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400">
                                <i class="fas fa-download mr-1"></i> Exportar
                            </button>
                        </div>
                    </div>
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <canvas id="performanceChart"></canvas>
                        <!-- Loading overlay for chart -->
                        <div id="chart-loading" class="absolute inset-0 bg-white dark:bg-gray-800 bg-opacity-90 dark:bg-opacity-90 flex items-center justify-center hidden">
                            <div class="flex flex-col items-center">
                                <div class="animate-spin rounded-full h-10 w-10 border-4 border-primary-200 dark:border-primary-800 border-t-primary-500 dark:border-t-primary-400"></div>
                                <p class="mt-3 text-sm text-gray-600 dark:text-gray-300">Cargando datos...</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Comparative Analytics Section -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-6 animate-fade-in">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 flex items-center">
                            <i class="fas fa-chart-line text-primary-500 dark:text-primary-400 mr-2"></i>
                            Comparativa de Desempeño
                        </h3>
                        <div class="mt-4 sm:mt-0 flex items-center space-x-3">
                            <select id="student-compare-select" class="text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-1.5 px-3 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400">
                                <option value="student1">Luis García</option>
                                <option value="student2">Ana Martínez</option>
                                <option value="student3">Sofía Díaz</option>
                                <option value="student4">Carlos Ruiz</option>
                            </select>
                            <button id="compare-refresh" class="text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-1.5 px-3 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400">
                                <i class="fas fa-sync-alt mr-1"></i> Actualizar
                            </button>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Radar Chart -->
                        <div>
                            <div class="bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 border border-gray-100 dark:border-gray-700">
                                <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-4">Desempeño por Materia</h4>
                                <div class="relative h-64">
                                    <canvas id="radarChart"></canvas>
                                </div>
                                <div class="flex justify-center mt-3 text-xs text-gray-500 dark:text-gray-400">
                                    <div class="flex items-center mr-4">
                                        <span class="w-3 h-3 inline-block bg-primary-500/70 rounded-full mr-1"></span>
                                        <span>Estudiante</span>
                                    </div>
                                    <div class="flex items-center">
                                        <span class="w-3 h-3 inline-block bg-gray-400/70 rounded-full mr-1"></span>
                                        <span>Promedio Grupo</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ranking Comparison -->
                        <div>
                            <div class="bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 border border-gray-100 dark:border-gray-700">
                                <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-4">Posición Relativa</h4>
                                <div class="space-y-3">
                                    <!-- Matemáticas -->
                                    <div>
                                        <div class="flex justify-between items-center mb-1">
                                            <div class="text-sm text-gray-700 dark:text-gray-300">Matemáticas</div>
                                            <div class="text-sm font-medium text-primary-600 dark:text-primary-400">9.5</div>
                                        </div>
                                        <div class="w-full h-5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative">
                                            <!-- Grupo -->
                                            <div class="h-full bg-gray-400/50 dark:bg-gray-600/50 absolute" style="width: 70%"></div>
                                            <div class="h-full w-1 bg-gray-500 dark:bg-gray-400 absolute left-[70%]"></div>
                                            <!-- Estudiante -->
                                            <div class="h-full bg-primary-500 absolute flex items-center" style="width: 95%">
                                                <div class="w-4 h-4 bg-primary-500 rounded-full absolute -right-2 flex items-center justify-center border-2 border-white dark:border-gray-800">
                                                    <i class="fas fa-user text-[10px] text-white"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="flex justify-between mt-1 text-xs text-gray-500 dark:text-gray-400">
                                            <span>Posición: Top 5%</span>
                                            <span>Prom. Grupo: 7.0</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Español -->
                                    <div>
                                        <div class="flex justify-between items-center mb-1">
                                            <div class="text-sm text-gray-700 dark:text-gray-300">Español</div>
                                            <div class="text-sm font-medium text-primary-600 dark:text-primary-400">8.8</div>
                                        </div>
                                        <div class="w-full h-5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative">
                                            <!-- Grupo -->
                                            <div class="h-full bg-gray-400/50 dark:bg-gray-600/50 absolute" style="width: 75%"></div>
                                            <div class="h-full w-1 bg-gray-500 dark:bg-gray-400 absolute left-[75%]"></div>
                                            <!-- Estudiante -->
                                            <div class="h-full bg-primary-500 absolute flex items-center" style="width: 88%">
                                                <div class="w-4 h-4 bg-primary-500 rounded-full absolute -right-2 flex items-center justify-center border-2 border-white dark:border-gray-800">
                                                    <i class="fas fa-user text-[10px] text-white"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="flex justify-between mt-1 text-xs text-gray-500 dark:text-gray-400">
                                            <span>Posición: Top 15%</span>
                                            <span>Prom. Grupo: 7.5</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Ciencias -->
                                    <div>
                                        <div class="flex justify-between items-center mb-1">
                                            <div class="text-sm text-gray-700 dark:text-gray-300">Ciencias</div>
                                            <div class="text-sm font-medium text-primary-600 dark:text-primary-400">9.7</div>
                                        </div>
                                        <div class="w-full h-5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden relative">
                                            <!-- Grupo -->
                                            <div class="h-full bg-gray-400/50 dark:bg-gray-600/50 absolute" style="width: 82%"></div>
                                            <div class="h-full w-1 bg-gray-500 dark:bg-gray-400 absolute left-[82%]"></div>
                                            <!-- Estudiante -->
                                            <div class="h-full bg-primary-500 absolute flex items-center" style="width: 97%">
                                                <div class="w-4 h-4 bg-primary-500 rounded-full absolute -right-2 flex items-center justify-center border-2 border-white dark:border-gray-800">
                                                    <i class="fas fa-user text-[10px] text-white"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="flex justify-between mt-1 text-xs text-gray-500 dark:text-gray-400">
                                            <span>Posición: Top 3%</span>
                                            <span>Prom. Grupo: 8.2</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional content section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Smart Recommendations -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 animate-fade-in">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 flex items-center mb-4">
                            <i class="fas fa-lightbulb text-primary-500 dark:text-primary-400 mr-2"></i>
                            Recomendaciones Inteligentes
                        </h3>
                        <div class="space-y-4">
                            <div class="flex p-3 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-100 dark:border-yellow-900/30 recommendation-card">
                                <div class="flex-shrink-0 w-10 h-10 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center">
                                    <i class="fas fa-exclamation-triangle text-yellow-600 dark:text-yellow-400"></i>
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm font-medium text-gray-700 dark:text-gray-200">Alerta en Matemáticas</p>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Has bajado un 6% respecto al bimestre anterior. Te recomendamos revisar los temas de Álgebra y Geometría.</p>
                                    <button class="mt-2 text-xs text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium flex items-center transition-colors duration-200">
                                        Ver recursos recomendados <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="flex p-3 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-100 dark:border-green-900/30 recommendation-card">
                                <div class="flex-shrink-0 w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center">
                                    <i class="fas fa-arrow-up text-green-600 dark:text-green-400"></i>
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm font-medium text-gray-700 dark:text-gray-200">Mejora en Ciencias</p>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">¡Has mejorado un 8% en Ciencias! Continúa con este progreso para mantener tu posición en el top 3% del grupo.</p>
                                </div>
                            </div>
                            <div class="flex p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900/30 recommendation-card">
                                <div class="flex-shrink-0 w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center">
                                    <i class="fas fa-book text-blue-600 dark:text-blue-400"></i>
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm font-medium text-gray-700 dark:text-gray-200">Oportunidad en Historia</p>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Tus habilidades en Ciencias pueden aplicarse en Historia. Recomendamos reforzar la sección de Historia Antigua para mejorar tu rendimiento.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Traditional Activity and Events Section -->
                    <div class="grid grid-cols-1 gap-6">
                        <!-- Recent Activity -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 animate-fade-in">
                            <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 flex items-center mb-4">
                                <i class="fas fa-history text-primary-500 dark:text-primary-400 mr-2"></i>
                                Actividad Reciente
                            </h3>
                            <div class="space-y-4">
                                <div class="flex">
                                    <div class="flex-shrink-0 w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center">
                                        <i class="fas fa-plus text-green-600 dark:text-green-400"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-700 dark:text-gray-200">Nueva calificación agregada</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">Juan Pérez - Matemáticas - 9.5</p>
                                        <p class="text-xs text-gray-400 dark:text-gray-500">Hace 2 horas</p>
                                    </div>
                                </div>
                                <div class="flex">
                                    <div class="flex-shrink-0 w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center">
                                        <i class="fas fa-user-plus text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-700 dark:text-gray-200">Nuevo estudiante registrado</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">María González - 4to Grado</p>
                                        <p class="text-xs text-gray-400 dark:text-gray-500">Ayer</p>
                                    </div>
                                </div>
                            </div>
                            <button class="mt-4 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium flex items-center transition-colors duration-200">
                                Ver todas las actividades
                                <i class="fas fa-arrow-right ml-1.5"></i>
                            </button>
                        </div>

                        <!-- Upcoming Events -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 animate-fade-in">
                            <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 flex items-center mb-4">
                                <i class="fas fa-calendar-alt text-primary-500 dark:text-primary-400 mr-2"></i>
                                Próximos Eventos
                            </h3>
                            <div class="space-y-4">
                                <div class="flex p-3 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-100 dark:border-yellow-900/30">
                                    <div class="flex-shrink-0 w-10 h-10 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center">
                                        <i class="fas fa-clipboard-check text-yellow-600 dark:text-yellow-400"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-700 dark:text-gray-200">Exámenes finales</p>
                                        <div class="flex items-center mt-1">
                                            <i class="fas fa-clock text-xs text-gray-500 dark:text-gray-400 mr-1.5"></i>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">15 - 20 de Noviembre</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20 border border-purple-100 dark:border-purple-900/30">
                                    <div class="flex-shrink-0 w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center">
                                        <i class="fas fa-users text-purple-600 dark:text-purple-400"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-700 dark:text-gray-200">Reunión de profesores</p>
                                        <div class="flex items-center mt-1">
                                            <i class="fas fa-clock text-xs text-gray-500 dark:text-gray-400 mr-1.5"></i>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">5 de Noviembre, 15:00</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <button class="mt-4 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium flex items-center transition-colors duration-200">
                                Ver calendario completo
                                <i class="fas fa-arrow-right ml-1.5"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Comparative Section (Dedicated page) -->
            <div id="comparative-section" class="hidden animate-fade-in">
                <!-- Header -->
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Análisis Comparativo</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1">Visualización detallada del rendimiento comparado con el grupo.</p>
                    </div>
                    <div class="mt-4 md:mt-0 flex space-x-3">
                        <select id="student-select" class="text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400">
                            <option value="all">Seleccionar estudiante</option>
                            <option value="student1">Luis García</option>
                            <option value="student2">Ana Martínez</option>
                            <option value="student3">Sofía Díaz</option>
                            <option value="student4">Carlos Ruiz</option>
                        </select>
                        <select id="period-select" class="text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400">
                            <option value="current">Periodo actual</option>
                            <option value="last">Periodo anterior</option>
                            <option value="year">Año completo</option>
                        </select>
                    </div>
                </div>

                <!-- Student Overview Card -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-6 mb-6 animate-scale-in">
                    <div class="flex flex-col md:flex-row items-start md:items-center">
                        <div class="flex-shrink-0 mb-4 md:mb-0 md:mr-6">
                            <div class="w-20 h-20 rounded-full bg-primary-100 dark:bg-primary-900/50 flex items-center justify-center text-2xl font-bold text-primary-600 dark:text-primary-400">
                                LG
                            </div>
                        </div>
                        <div class="flex-grow">
                            <h3 class="text-xl font-bold text-gray-800 dark:text-white">Luis García</h3>
                            <p class="text-gray-600 dark:text-gray-400">3° Grado | ID: EST-002</p>
                            <div class="mt-2 flex flex-wrap gap-2">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                                    <i class="fas fa-arrow-up mr-1 text-green-500"></i> Top 10% del grupo
                                </span>
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300">
                                    Promedio: 9.2
                                </span>
                            </div>
                        </div>
                        <div class="mt-4 md:mt-0 flex flex-col items-end">
                            <div class="text-sm text-gray-600 dark:text-gray-400">Comparado con periodo anterior</div>
                            <div class="flex items-center mt-1">
                                <div class="text-xl font-bold text-green-600 dark:text-green-400">+3.5%</div>
                                <i class="fas fa-arrow-up ml-1 text-green-500"></i>
                            </div>
                            <button class="mt-2 px-3 py-1 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded-lg text-sm flex items-center">
                                <i class="fas fa-file-alt mr-1"></i> Ver reporte completo
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Main Comparative Charts -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Radar Chart -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-6 animate-scale-in" style="animation-delay: 0.1s">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4">
                            Desempeño por Materia vs. Grupo
                        </h3>
                        <div class="h-72">
                            <canvas id="fullRadarChart"></canvas>
                        </div>
                        <div class="flex justify-center mt-4 text-sm text-gray-500 dark:text-gray-400 space-x-6">
                            <div class="flex items-center">
                                <span class="w-3 h-3 inline-block bg-primary-500/70 rounded-full mr-2"></span>
                                <span>Estudiante</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-3 h-3 inline-block bg-gray-400/70 rounded-full mr-2"></span>
                                <span>Promedio Grupo</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-3 h-3 inline-block bg-yellow-500/70 rounded-full mr-2"></span>
                                <span>Periodo Anterior</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Progress Over Time Chart -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-6 animate-scale-in" style="animation-delay: 0.2s">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4">
                            Progreso en el Tiempo
                        </h3>
                        <div class="h-72">
                            <canvas id="progressChart"></canvas>
                        </div>
                        <div class="flex justify-end mt-2">
                            <div class="flex space-x-2">
                                <button class="px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-lg">3 Meses</button>
                                <button class="px-2 py-1 text-xs bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-300 rounded-lg">6 Meses</button>
                                <button class="px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-lg">1 Año</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Subject Comparison -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-6 animate-scale-in" style="animation-delay: 0.3s">
                    <div class="p-6 border-b border-gray-100 dark:border-gray-700">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">
                            Comparativa Detallada por Materias
                        </h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                            Análisis del desempeño actual con métricas comparativas respecto al grupo.
                        </p>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-50 dark:bg-gray-700 text-left">
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Materia</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider text-center">Calificación</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider text-center">Promedio Grupo</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider text-center">Diferencia</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider text-center">Ranking</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider text-center">Tendencia</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                <!-- Matemáticas -->
                                <tr class="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center">
                                                <i class="fas fa-calculator text-blue-600 dark:text-blue-400"></i>
                                            </div>
                                            <div class="ml-3">
                                                <div class="text-sm font-medium text-gray-700 dark:text-gray-200">Matemáticas</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm font-semibold text-gray-800 dark:text-white">9.5</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm text-gray-600 dark:text-gray-300">7.0</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                                            +2.5
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm text-primary-600 dark:text-primary-400 font-medium">Top 5%</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="inline-flex items-center space-x-1">
                                            <i class="fas fa-arrow-up text-green-500 dark:text-green-400"></i>
                                            <span class="text-sm text-gray-600 dark:text-gray-300">2.1%</span>
                                        </div>
                                    </td>
                                </tr>
                                
                                <!-- Español -->
                                <tr class="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center">
                                                <i class="fas fa-book text-red-600 dark:text-red-400"></i>
                                            </div>
                                            <div class="ml-3">
                                                <div class="text-sm font-medium text-gray-700 dark:text-gray-200">Español</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm font-semibold text-gray-800 dark:text-white">8.8</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm text-gray-600 dark:text-gray-300">7.5</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                                            +1.3
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm text-primary-600 dark:text-primary-400 font-medium">Top 15%</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="inline-flex items-center space-x-1">
                                            <i class="fas fa-arrow-down text-red-500 dark:text-red-400"></i>
                                            <span class="text-sm text-gray-600 dark:text-gray-300">1.2%</span>
                                        </div>
                                    </td>
                                </tr>
                                
                                <!-- Ciencias -->
                                <tr class="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center">
                                                <i class="fas fa-flask text-green-600 dark:text-green-400"></i>
                                            </div>
                                            <div class="ml-3">
                                                <div class="text-sm font-medium text-gray-700 dark:text-gray-200">Ciencias</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm font-semibold text-gray-800 dark:text-white">9.7</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm text-gray-600 dark:text-gray-300">8.2</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                                            +1.5
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm text-primary-600 dark:text-primary-400 font-medium">Top 3%</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="inline-flex items-center space-x-1">
                                            <i class="fas fa-arrow-up text-green-500 dark:text-green-400"></i>
                                            <span class="text-sm text-gray-600 dark:text-gray-300">8.0%</span>
                                        </div>
                                    </td>
                                </tr>
                                
                                <!-- Historia -->
                                <tr class="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center">
                                                <i class="fas fa-landmark text-yellow-600 dark:text-yellow-400"></i>
                                            </div>
                                            <div class="ml-3">
                                                <div class="text-sm font-medium text-gray-700 dark:text-gray-200">Historia</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm font-semibold text-gray-800 dark:text-white">9.0</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm text-gray-600 dark:text-gray-300">7.8</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                                            +1.2
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm text-primary-600 dark:text-primary-400 font-medium">Top 12%</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="inline-flex items-center space-x-1">
                                            <i class="fas fa-minus text-gray-500 dark:text-gray-400"></i>
                                            <span class="text-sm text-gray-600 dark:text-gray-300">0%</span>
                                        </div>
                                    </td>
                                </tr>
                                
                                <!-- Inglés -->
                                <tr class="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center">
                                                <i class="fas fa-language text-purple-600 dark:text-purple-400"></i>
                                            </div>
                                            <div class="ml-3">
                                                <div class="text-sm font-medium text-gray-700 dark:text-gray-200">Inglés</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm font-semibold text-gray-800 dark:text-white">9.0</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm text-gray-600 dark:text-gray-300">7.6</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">
                                            +1.4
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="text-sm text-primary-600 dark:text-primary-400 font-medium">Top 8%</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <div class="inline-flex items-center space-x-1">
                                            <i class="fas fa-arrow-up text-green-500 dark:text-green-400"></i>
                                            <span class="text-sm text-gray-600 dark:text-gray-300">3.5%</span>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Smart Recommendations Section -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-6 mb-10 animate-scale-in" style="animation-delay: 0.4s">
                    <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center">
                        <i class="fas fa-brain text-primary-500 dark:text-primary-400 mr-2"></i>
                        Recomendaciones Personalizadas
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Recommendation 1 -->
                        <div class="bg-yellow-50 dark:bg-yellow-900/20 rounded-xl border border-yellow-100 dark:border-yellow-900/30 p-4 recommendation-card">
                            <div class="flex items-center mb-3">
                                <div class="w-8 h-8 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center">
                                    <i class="fas fa-exclamation-triangle text-yellow-600 dark:text-yellow-400"></i>
                                </div>
                                <h4 class="ml-2 text-sm font-semibold text-gray-700 dark:text-gray-200">Matemáticas: Atención</h4>
                            </div>
                            <p class="text-xs text-gray-600 dark:text-gray-400">
                                Has bajado un 6% en Álgebra. Recomendamos dedicar 30 minutos adicionales a ejercicios de ecuaciones.
                            </p>
                            <div class="mt-3">
                                <a href="#" class="text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 flex items-center">
                                    Ver recursos <i class="fas fa-arrow-right ml-1"></i>
                                </a>
                            </div>
                        </div>
                        
                        <!-- Recommendation 2 -->
                        <div class="bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-100 dark:border-green-900/30 p-4 recommendation-card">
                            <div class="flex items-center mb-3">
                                <div class="w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center">
                                    <i class="fas fa-thumbs-up text-green-600 dark:text-green-400"></i>
                                </div>
                                <h4 class="ml-2 text-sm font-semibold text-gray-700 dark:text-gray-200">Ciencias: Fortaleza</h4>
                            </div>
                            <p class="text-xs text-gray-600 dark:text-gray-400">
                                Excelente progreso en Ciencias. Ahora puedes avanzar con temas de Biología Celular para potenciar tu aprendizaje.
                            </p>
                            <div class="mt-3">
                                <a href="#" class="text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 flex items-center">
                                    Material avanzado <i class="fas fa-arrow-right ml-1"></i>
                                </a>
                            </div>
                        </div>
                        
                        <!-- Recommendation 3 -->
                        <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-100 dark:border-blue-900/30 p-4 recommendation-card">
                            <div class="flex items-center mb-3">
                                <div class="w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center">
                                    <i class="fas fa-lightbulb text-blue-600 dark:text-blue-400"></i>
                                </div>
                                <h4 class="ml-2 text-sm font-semibold text-gray-700 dark:text-gray-200">Español: Oportunidad</h4>
                            </div>
                            <p class="text-xs text-gray-600 dark:text-gray-400">
                                Una lectura diaria de 15 minutos puede mejorar tu comprensión lectora y vocabulario, llevándote al top 10%.
                            </p>
                            <div class="mt-3">
                                <a href="#" class="text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 flex items-center">
                                    Ver plan de lectura <i class="fas fa-arrow-right ml-1"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Management Section -->
            <div id="users-section" class="hidden animate-fade-in">
                <!-- Header -->
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Gestión de Usuarios</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1">Administra usuarios, roles y permisos del sistema.</p>
                    </div>
                    <div class="mt-4 md:mt-0">
                        <button id="add-user-btn" class="bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white py-2 px-4 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200 flex items-center">
                            <i class="fas fa-user-plus mr-2"></i> Agregar Usuario
                        </button>
                    </div>
                </div>

                <!-- Filters and search -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 shadow-sm border border-gray-100 dark:border-gray-700">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
                        <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4 md:w-2/3">
                            <div class="relative flex-grow">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-search text-gray-400"></i>
                                </div>
                                <input id="user-search" type="text" class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" placeholder="Buscar usuarios...">
                            </div>
                            <div class="sm:w-1/3">
                                <select id="role-filter" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base">
                                    <option value="all">Todos los roles</option>
                                    <option value="admin">Administrador</option>
                                    <option value="teacher">Profesor</option>
                                    <option value="student">Estudiante</option>
                                    <option value="parent">Padre/Tutor</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <select id="status-filter" class="border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base">
                                <option value="all">Todos los estados</option>
                                <option value="active">Activo</option>
                                <option value="inactive">Inactivo</option>
                                <option value="pending">Pendiente</option>
                            </select>
                            <button id="reset-filters" class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200">
                                <i class="fas fa-redo-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Users table -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-6">
                    <div class="overflow-x-auto">
                        <table class="data-table">
                            <thead>
                                <tr class="bg-gray-50 dark:bg-gray-700 text-left">
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Usuario</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Email</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Rol</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Estado</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Último acceso</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Acciones</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700" id="users-table-body">
                                <!-- User rows will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    <!-- Loading state -->
                    <div id="users-loading" class="py-20 flex items-center justify-center">
                        <div class="flex flex-col items-center">
                            <div class="animate-spin rounded-full h-10 w-10 border-4 border-primary-200 dark:border-primary-800 border-t-primary-500 dark:border-t-primary-400"></div>
                            <p class="mt-3 text-sm text-gray-600 dark:text-gray-300">Cargando usuarios...</p>
                        </div>
                    </div>
                    <!-- Empty state -->
                    <div id="users-empty" class="py-20 flex items-center justify-center hidden">
                        <div class="flex flex-col items-center">
                            <div class="rounded-full h-16 w-16 bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4">
                                <i class="fas fa-users text-gray-400 dark:text-gray-500 text-2xl"></i>
                            </div>
                            <h3 class="text-lg font-medium text-gray-700 dark:text-gray-300">No se encontraron usuarios</h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Intenta cambiar los filtros o agrega un nuevo usuario</p>
                            <button class="mt-4 bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white py-2 px-4 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200 flex items-center" onclick="document.getElementById('add-user-btn').click()">
                                <i class="fas fa-user-plus mr-2"></i> Agregar Usuario
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Pagination -->
                <div class="flex justify-between items-center mb-10">
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                        Mostrando <span id="users-showing-count" class="font-medium">0</span> de <span id="users-total-count" class="font-medium">0</span> usuarios
                    </div>
                    <div class="flex items-center space-x-2">
                        <button id="users-prev-page" class="px-3 py-1 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <div id="users-page-numbers" class="flex items-center space-x-1">
                            <!-- Page numbers will be inserted here -->
                        </div>
                        <button id="users-next-page" class="px-3 py-1 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Students Management Section -->
            <div id="students-section" class="hidden animate-fade-in">
                <!-- Header -->
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Gestión de Estudiantes</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1">Administra la información y registros de los estudiantes.</p>
                    </div>
                    <div class="mt-4 md:mt-0">
                        <button id="add-student-btn" class="bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white py-2 px-4 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200 flex items-center">
                            <i class="fas fa-user-plus mr-2"></i> Agregar Estudiante
                        </button>
                    </div>
                </div>

                <!-- Filters and search -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 shadow-sm border border-gray-100 dark:border-gray-700">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
                        <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4 md:w-2/3">
                            <div class="relative flex-grow">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-search text-gray-400"></i>
                                </div>
                                <input id="student-search" type="text" class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" placeholder="Buscar estudiantes...">
                            </div>
                            <div class="sm:w-1/3">
                                <select id="grade-filter" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base">
                                    <option value="all">Todos los grados</option>
                                    <option value="1">1° Grado</option>
                                    <option value="2">2° Grado</option>
                                    <option value="3">3° Grado</option>
                                    <option value="4">4° Grado</option>
                                    <option value="5">5° Grado</option>
                                    <option value="6">6° Grado</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <select id="status-student-filter" class="border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base">
                                <option value="all">Todos los estados</option>
                                <option value="active">Activo</option>
                                <option value="inactive">Inactivo</option>
                            </select>
                            <button id="reset-student-filters" class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200">
                                <i class="fas fa-redo-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Students table -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-6">
                    <div class="overflow-x-auto">
                        <table class="data-table">
                            <thead>
                                <tr class="bg-gray-50 dark:bg-gray-700 text-left">
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Estudiante</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ID / Matrícula</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Grado</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Tutor</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Promedio</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Estado</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Acciones</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700" id="students-table-body">
                                <!-- Students rows will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    <!-- Loading state -->
                    <div id="students-loading" class="py-20 flex items-center justify-center">
                        <div class="flex flex-col items-center">
                            <div class="animate-spin rounded-full h-10 w-10 border-4 border-primary-200 dark:border-primary-800 border-t-primary-500 dark:border-t-primary-400"></div>
                            <p class="mt-3 text-sm text-gray-600 dark:text-gray-300">Cargando estudiantes...</p>
                        </div>
                    </div>
                    <!-- Empty state -->
                    <div id="students-empty" class="py-20 flex items-center justify-center hidden">
                        <div class="flex flex-col items-center">
                            <div class="rounded-full h-16 w-16 bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4">
                                <i class="fas fa-user-graduate text-gray-400 dark:text-gray-500 text-2xl"></i>
                            </div>
                            <h3 class="text-lg font-medium text-gray-700 dark:text-gray-300">No se encontraron estudiantes</h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Intenta cambiar los filtros o agrega un nuevo estudiante</p>
                            <button class="mt-4 bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white py-2 px-4 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200 flex items-center" onclick="document.getElementById('add-student-btn').click()">
                                <i class="fas fa-user-plus mr-2"></i> Agregar Estudiante
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Pagination -->
                <div class="flex justify-between items-center mb-10">
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                        Mostrando <span id="students-showing-count" class="font-medium">0</span> de <span id="students-total-count" class="font-medium">0</span> estudiantes
                    </div>
                    <div class="flex items-center space-x-2">
                        <button id="students-prev-page" class="px-3 py-1 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <div id="students-page-numbers" class="flex items-center space-x-1">
                            <!-- Page numbers will be inserted here -->
                        </div>
                        <button id="students-next-page" class="px-3 py-1 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Teachers Management Section -->
            <div id="teachers-section" class="hidden animate-fade-in">
                <!-- Header -->
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Gestión de Profesores</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1">Administra la información y asignaciones de los profesores.</p>
                    </div>
                    <div class="mt-4 md:mt-0">
                        <button id="add-teacher-btn" class="bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white py-2 px-4 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200 flex items-center">
                            <i class="fas fa-user-plus mr-2"></i> Agregar Profesor
                        </button>
                    </div>
                </div>

                <!-- Filters and search -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 shadow-sm border border-gray-100 dark:border-gray-700">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
                        <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4 md:w-2/3">
                            <div class="relative flex-grow">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-search text-gray-400"></i>
                                </div>
                                <input id="teacher-search" type="text" class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" placeholder="Buscar profesores...">
                            </div>
                            <div class="sm:w-1/3">
                                <select id="subject-filter" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base">
                                    <option value="all">Todas las materias</option>
                                    <option value="math">Matemáticas</option>
                                    <option value="spanish">Español</option>
                                    <option value="science">Ciencias</option>
                                    <option value="history">Historia</option>
                                    <option value="english">Inglés</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <select id="status-teacher-filter" class="border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base">
                                <option value="all">Todos los estados</option>
                                <option value="active">Activo</option>
                                <option value="inactive">Inactivo</option>
                                <option value="on-leave">De licencia</option>
                            </select>
                            <button id="reset-teacher-filters" class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200">
                                <i class="fas fa-redo-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Teachers table -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-6">
                    <div class="overflow-x-auto">
                        <table class="data-table">
                            <thead>
                                <tr class="bg-gray-50 dark:bg-gray-700 text-left">
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Profesor</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ID</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Especialidad</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Materias asignadas</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Contacto</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Estado</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Acciones</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700" id="teachers-table-body">
                                <!-- Teachers rows will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    <!-- Loading state -->
                    <div id="teachers-loading" class="py-20 flex items-center justify-center">
                        <div class="flex flex-col items-center">
                            <div class="animate-spin rounded-full h-10 w-10 border-4 border-primary-200 dark:border-primary-800 border-t-primary-500 dark:border-t-primary-400"></div>
                            <p class="mt-3 text-sm text-gray-600 dark:text-gray-300">Cargando profesores...</p>
                        </div>
                    </div>
                    <!-- Empty state -->
                    <div id="teachers-empty" class="py-20 flex items-center justify-center hidden">
                        <div class="flex flex-col items-center">
                            <div class="rounded-full h-16 w-16 bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4">
                                <i class="fas fa-chalkboard-teacher text-gray-400 dark:text-gray-500 text-2xl"></i>
                            </div>
                            <h3 class="text-lg font-medium text-gray-700 dark:text-gray-300">No se encontraron profesores</h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Intenta cambiar los filtros o agrega un nuevo profesor</p>
                            <button class="mt-4 bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white py-2 px-4 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200 flex items-center" onclick="document.getElementById('add-teacher-btn').click()">
                                <i class="fas fa-user-plus mr-2"></i> Agregar Profesor
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Pagination -->
                <div class="flex justify-between items-center mb-10">
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                        Mostrando <span id="teachers-showing-count" class="font-medium">0</span> de <span id="teachers-total-count" class="font-medium">0</span> profesores
                    </div>
                    <div class="flex items-center space-x-2">
                        <button id="teachers-prev-page" class="px-3 py-1 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <div id="teachers-page-numbers" class="flex items-center space-x-1">
                            <!-- Page numbers will be inserted here -->
                        </div>
                        <button id="teachers-next-page" class="px-3 py-1 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Subjects Management Section -->
            <div id="subjects-section" class="hidden animate-fade-in">
                <!-- Header -->
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Gestión de Materias</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1">Administra las materias, horarios y asignaciones.</p>
                    </div>
                    <div class="mt-4 md:mt-0">
                        <button id="add-subject-btn" class="bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white py-2 px-4 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200 flex items-center">
                            <i class="fas fa-plus mr-2"></i> Agregar Materia
                        </button>
                    </div>
                </div>

                <!-- Filters and search -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 shadow-sm border border-gray-100 dark:border-gray-700">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
                        <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4 md:w-2/3">
                            <div class="relative flex-grow">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-search text-gray-400"></i>
                                </div>
                                <input id="subject-search" type="text" class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" placeholder="Buscar materias...">
                            </div>
                            <div class="sm:w-1/3">
                                <select id="grade-subject-filter" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base">
                                    <option value="all">Todos los grados</option>
                                    <option value="1">1° Grado</option>
                                    <option value="2">2° Grado</option>
                                    <option value="3">3° Grado</option>
                                    <option value="4">4° Grado</option>
                                    <option value="5">5° Grado</option>
                                    <option value="6">6° Grado</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <select id="status-subject-filter" class="border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base">
                                <option value="all">Todos los estados</option>
                                <option value="active">Activa</option>
                                <option value="inactive">Inactiva</option>
                            </select>
                            <button id="reset-subject-filters" class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200">
                                <i class="fas fa-redo-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Subjects Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6" id="subjects-container">
                    <!-- Subject cards will be loaded here -->
                    <div id="subjects-loading" class="col-span-3 py-20 flex items-center justify-center">
                        <div class="flex flex-col items-center">
                            <div class="animate-spin rounded-full h-10 w-10 border-4 border-primary-200 dark:border-primary-800 border-t-primary-500 dark:border-t-primary-400"></div>
                            <p class="mt-3 text-sm text-gray-600 dark:text-gray-300">Cargando materias...</p>
                        </div>
                    </div>
                    <!-- Empty state -->
                    <div id="subjects-empty" class="col-span-3 py-20 flex items-center justify-center hidden">
                        <div class="flex flex-col items-center">
                            <div class="rounded-full h-16 w-16 bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4">
                                <i class="fas fa-book text-gray-400 dark:text-gray-500 text-2xl"></i>
                            </div>
                            <h3 class="text-lg font-medium text-gray-700 dark:text-gray-300">No se encontraron materias</h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Intenta cambiar los filtros o agrega una nueva materia</p>
                            <button class="mt-4 bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white py-2 px-4 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200 flex items-center" onclick="document.getElementById('add-subject-btn').click()">
                                <i class="fas fa-plus mr-2"></i> Agregar Materia
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Pagination -->
                <div class="flex justify-between items-center mb-10">
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                        Mostrando <span id="subjects-showing-count" class="font-medium">0</span> de <span id="subjects-total-count" class="font-medium">0</span> materias
                    </div>
                    <div class="flex items-center space-x-2">
                        <button id="subjects-prev-page" class="px-3 py-1 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <div id="subjects-page-numbers" class="flex items-center space-x-1">
                            <!-- Page numbers will be inserted here -->
                        </div>
                        <button id="subjects-next-page" class="px-3 py-1 rounded-md bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Grades Management Section -->
            <div id="grades-section" class="hidden animate-fade-in">
                <!-- Header -->
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Gestión de Calificaciones</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1">Administra y visualiza calificaciones de estudiantes por materia.</p>
                    </div>
                    <div class="mt-4 md:mt-0 flex space-x-3">
                        <button id="export-grades-btn" class="bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 py-2 px-4 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200 flex items-center">
                            <i class="fas fa-download mr-2"></i> Exportar
                        </button>
                        <button id="add-grade-btn" class="bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white py-2 px-4 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200 flex items-center">
                            <i class="fas fa-plus mr-2"></i> Agregar Calificaciones
                        </button>
                    </div>
                </div>

                <!-- Filters and search -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 shadow-sm border border-gray-100 dark:border-gray-700">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
                        <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4">
                            <div class="sm:w-1/3">
                                <select id="grade-level-filter" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base">
                                    <option value="all">Todos los grados</option>
                                    <option value="1">1° Grado</option>
                                    <option value="2">2° Grado</option>
                                    <option value="3">3° Grado</option>
                                    <option value="4">4° Grado</option>
                                    <option value="5">5° Grado</option>
                                    <option value="6">6° Grado</option>
                                </select>
                            </div>
                            <div class="sm:w-1/3">
                                <select id="subject-grade-filter" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base">
                                    <option value="all">Todas las materias</option>
                                    <option value="math">Matemáticas</option>
                                    <option value="spanish">Español</option>
                                    <option value="science">Ciencias</option>
                                    <option value="history">Historia</option>
                                    <option value="english">Inglés</option>
                                </select>
                            </div>
                            <div class="sm:w-1/3">
                                <select id="period-filter" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base">
                                    <option value="all">Todos los periodos</option>
                                    <option value="1">1er Bimestre</option>
                                    <option value="2">2do Bimestre</option>
                                    <option value="3">3er Bimestre</option>
                                    <option value="4">4to Bimestre</option>
                                    <option value="5">5to Bimestre</option>
                                </select>
                            </div>
                        </div>
                        <div class="relative flex-grow md:w-1/3">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-search text-gray-400"></i>
                            </div>
                            <input id="student-grade-search" type="text" class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" placeholder="Buscar estudiante...">
                        </div>
                    </div>
                </div>

                <!-- Grades table -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-6">
                    <div class="overflow-x-auto">
                        <table class="data-table grade-table">
                            <thead>
                                <tr class="bg-gray-50 dark:bg-gray-700 text-left">
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider student-name">Estudiante</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider text-center">Matemáticas</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider text-center">Español</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider text-center">Ciencias</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider text-center">Historia</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider text-center">Inglés</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider text-center">Promedio</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700" id="grades-table-body">
                                <!-- Grades rows will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    <!-- Loading state -->
                    <div id="grades-loading" class="py-20 flex items-center justify-center">
                        <div class="flex flex-col items-center">
                            <div class="animate-spin rounded-full h-10 w-10 border-4 border-primary-200 dark:border-primary-800 border-t-primary-500 dark:border-t-primary-400"></div>
                            <p class="mt-3 text-sm text-gray-600 dark:text-gray-300">Cargando calificaciones...</p>
                        </div>
                    </div>
                    <!-- Empty state -->
                    <div id="grades-empty" class="py-20 flex items-center justify-center hidden">
                        <div class="flex flex-col items-center">
                            <div class="rounded-full h-16 w-16 bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4">
                                <i class="fas fa-star text-gray-400 dark:text-gray-500 text-2xl"></i>
                            </div>
                            <h3 class="text-lg font-medium text-gray-700 dark:text-gray-300">No se encontraron calificaciones</h3>
                            <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Intenta cambiar los filtros o agrega nuevas calificaciones</p>
                            <button class="mt-4 bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white py-2 px-4 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200 flex items-center" onclick="document.getElementById('add-grade-btn').click()">
                                <i class="fas fa-plus mr-2"></i> Agregar Calificaciones
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Legends and summary -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 mb-10">
                    <div class="flex flex-col md:flex-row justify-between">
                        <div class="flex flex-wrap gap-4">
                            <div class="flex items-center">
                                <span class="w-4 h-4 inline-block rounded-full bg-red-500 mr-2"></span>
                                <span class="text-sm text-gray-600 dark:text-gray-400">Reprobado (&lt; 6.0)</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 h-4 inline-block rounded-full bg-yellow-500 mr-2"></span>
                                <span class="text-sm text-gray-600 dark:text-gray-400">Regular (6.0 - 7.9)</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 h-4 inline-block rounded-full bg-green-500 mr-2"></span>
                                <span class="text-sm text-gray-600 dark:text-gray-400">Bueno (8.0 - 9.4)</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-4 h-4 inline-block rounded-full bg-blue-500 mr-2"></span>
                                <span class="text-sm text-gray-600 dark:text-gray-400">Excelente (9.5 - 10)</span>
                            </div>
                        </div>
                        <div class="mt-4 md:mt-0 text-sm text-gray-600 dark:text-gray-400">
                            <p>Promedio general: <strong class="text-primary-600 dark:text-primary-400">8.4</strong></p>
                            <p>Última actualización: <span>03/11/2023</span></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add/Edit User Form (Modal) -->
            <div id="user-modal" class="fixed inset-0 z-50 hidden">
                <div class="absolute inset-0 bg-black bg-opacity-50 modal-backdrop-enter" id="user-modal-overlay"></div>
                <div class="absolute inset-0 overflow-y-auto flex items-center justify-center p-4">
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-lg w-full mx-auto modal-enter">
                        <div class="flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                            <h3 id="modal-title" class="text-lg font-medium text-gray-800 dark:text-white">Agregar Nuevo Usuario</h3>
                            <button id="close-modal" class="text-gray-400 hover:text-gray-500 dark:hover:text-gray-300">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <form id="user-form" class="px-6 py-4">
                            <input type="hidden" id="user-id" value="">
                            <div class="space-y-4">
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div>
                                        <label for="first-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Nombre</label>
                                        <input type="text" id="first-name" name="first-name" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" required>
                                    </div>
                                    <div>
                                        <label for="last-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Apellido</label>
                                        <input type="text" id="last-name" name="last-name" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" required>
                                    </div>
                                </div>
                                <div>
                                    <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label>
                                    <input type="email" id="email" name="email" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" required>
                                </div>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div>
                                        <label for="role" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Rol</label>
                                        <select id="role" name="role" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" required>
                                            <option value="">Seleccionar rol</option>
                                            <option value="admin">Administrador</option>
                                            <option value="teacher">Profesor</option>
                                            <option value="student">Estudiante</option>
                                            <option value="parent">Padre/Tutor</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="status" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Estado</label>
                                        <select id="status" name="status" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" required>
                                            <option value="active">Activo</option>
                                            <option value="inactive">Inactivo</option>
                                            <option value="pending">Pendiente</option>
                                        </select>
                                    </div>
                                </div>
                                <div id="password-fields">
                                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                        <div>
                                            <label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Contraseña</label>
                                            <input type="password" id="password" name="password" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" required>
                                        </div>
                                        <div>
                                            <label for="confirm-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Confirmar Contraseña</label>
                                            <input type="password" id="confirm-password" name="confirm-password" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" required>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-6 flex justify-end space-x-3">
                                <button type="button" id="cancel-user-form" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200">
                                    Cancelar
                                </button>
                                <button type="submit" class="px-4 py-2 bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200">
                                    Guardar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Grade Edit Modal -->
            <div id="grade-modal" class="fixed inset-0 z-50 hidden">
                <div class="absolute inset-0 bg-black bg-opacity-50 modal-backdrop-enter" id="grade-modal-overlay"></div>
                <div class="absolute inset-0 overflow-y-auto flex items-center justify-center p-4">
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full mx-auto modal-enter">
                        <div class="flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                            <h3 id="grade-modal-title" class="text-lg font-medium text-gray-800 dark:text-white">Editar Calificación</h3>
                            <button id="close-grade-modal" class="text-gray-400 hover:text-gray-500 dark:hover:text-gray-300">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <form id="grade-form" class="px-6 py-4">
                            <input type="hidden" id="student-id" value="">
                            <input type="hidden" id="subject-id" value="">
                            <div class="space-y-4">
                                <div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Estudiante: <span id="grade-student-name" class="font-medium text-gray-800 dark:text-white"></span></p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Materia: <span id="grade-subject-name" class="font-medium text-gray-800 dark:text-white"></span></p>
                                </div>
                                <div>
                                    <label for="grade-value" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Calificación (0-10)</label>
                                    <input type="number" id="grade-value" name="grade-value" min="0" max="10" step="0.1" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" required>
                                </div>
                                <div>
                                    <label for="grade-period" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Periodo</label>
                                    <select id="grade-period" name="grade-period" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base" required>
                                        <option value="1">1er Bimestre</option>
                                        <option value="2">2do Bimestre</option>
                                        <option value="3">3er Bimestre</option>
                                        <option value="4">4to Bimestre</option>
                                        <option value="5">5to Bimestre</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="grade-comments" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Comentarios (opcional)</label>
                                    <textarea id="grade-comments" name="grade-comments" rows="3" class="block w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 py-2 px-3 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 text-base"></textarea>
                                </div>
                            </div>
                            <div class="mt-6 flex justify-end space-x-3">
                                <button type="button" id="cancel-grade-form" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200">
                                    Cancelar
                                </button>
                                <button type="submit" class="px-4 py-2 bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200">
                                    Guardar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Delete Confirmation Modal -->
            <div id="delete-modal" class="fixed inset-0 z-50 hidden">
                <div class="absolute inset-0 bg-black bg-opacity-50 modal-backdrop-enter" id="delete-modal-overlay"></div>
                <div class="absolute inset-0 overflow-y-auto flex items-center justify-center p-4">
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full mx-auto modal-enter">
                        <div class="px-6 py-4">
                            <div class="flex items-center justify-center w-12 h-12 mx-auto rounded-full bg-red-100 dark:bg-red-900/30 mb-4">
                                <i class="fas fa-exclamation-triangle text-red-600 dark:text-red-400 text-xl"></i>
                            </div>
                            <h3 class="text-lg font-medium text-center text-gray-800 dark:text-white mb-2">Confirmar Eliminación</h3>
                            <p class="text-center text-gray-600 dark:text-gray-300">¿Estás seguro de que deseas eliminar al usuario <span id="delete-user-name" class="font-medium"></span>? Esta acción no se puede deshacer.</p>
                        </div>
                        <div class="bg-gray-50 dark:bg-gray-700 px-6 py-4 flex justify-center space-x-3 rounded-b-xl">
                            <button id="cancel-delete" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200">
                                Cancelar
                            </button>
                            <button id="confirm-delete" class="px-4 py-2 bg-red-500 hover:bg-red-600 dark:bg-red-600 dark:hover:bg-red-700 text-white rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 transition-colors duration-200">
                                Eliminar
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer class="mt-8 text-center text-sm text-gray-500 dark:text-gray-400 animate-fade-in">
                <p>© 2023 EduGrade. Todos los derechos reservados.</p>
                <div class="flex justify-center mt-2 space-x-4">
                    <a href="#" class="hover:text-gray-700 dark:hover:text-gray-300 transition-colors duration-200">Términos</a>
                    <a href="#" class="hover:text-gray-700 dark:hover:text-gray-300 transition-colors duration-200">Privacidad</a>
                    <a href="#" class="hover:text-gray-700 dark:hover:text-gray-300 transition-colors duration-200">Soporte</a>
                </div>
            </footer>
        </main>
    </div>

    <script>
        // Mock data for users
        const mockUsers = [
            { id: 1, firstName: 'Juan', lastName: 'Pérez', email: 'juan.perez@example.com', role: 'admin', status: 'active', lastLogin: '2023-11-05 10:30' },
            { id: 2, firstName: 'María', lastName: 'García', email: 'maria.garcia@example.com', role: 'teacher', status: 'active', lastLogin: '2023-11-05 09:15' },
            { id: 3, firstName: 'Carlos', lastName: 'Rodríguez', email: 'carlos.rodriguez@example.com', role: 'teacher', status: 'active', lastLogin: '2023-11-04 14:45' },
            { id: 4, firstName: 'Ana', lastName: 'Martínez', email: 'ana.martinez@example.com', role: 'student', status: 'active', lastLogin: '2023-11-04 08:20' },
            { id: 5, firstName: 'Laura', lastName: 'Sánchez', email: 'laura.sanchez@example.com', role: 'student', status: 'active', lastLogin: '2023-11-03 16:10' },
            { id: 6, firstName: 'Miguel', lastName: 'Fernández', email: 'miguel.fernandez@example.com', role: 'parent', status: 'active', lastLogin: '2023-11-03 11:05' },
            { id: 7, firstName: 'Sofía', lastName: 'López', email: 'sofia.lopez@example.com', role: 'student', status: 'inactive', lastLogin: '2023-10-25 09:30' },
            { id: 8, firstName: 'David', lastName: 'González', email: 'david.gonzalez@example.com', role: 'teacher', status: 'inactive', lastLogin: '2023-10-20 15:45' },
            { id: 9, firstName: 'Elena', lastName: 'Díaz', email: 'elena.diaz@example.com', role: 'admin', status: 'active', lastLogin: '2023-11-02 13:20' },
            { id: 10, firstName: 'Pablo', lastName: 'Torres', email: 'pablo.torres@example.com', role: 'student', status: 'pending', lastLogin: 'Nunca' },
            { id: 11, firstName: 'Carmen', lastName: 'Ruiz', email: 'carmen.ruiz@example.com', role: 'parent', status: 'pending', lastLogin: 'Nunca' },
            { id: 12, firstName: 'Javier', lastName: 'Hernández', email: 'javier.hernandez@example.com', role: 'teacher', status: 'active', lastLogin: '2023-11-01 10:15' },
        ];

        // Mock data for students
        const mockStudents = [
            { id: 1, firstName: 'Ana', lastName: 'Martínez', studentId: 'EST-001', grade: '3', guardianName: 'Pedro Martínez', average: 8.7, status: 'active' },
            { id: 2, firstName: 'Luis', lastName: 'García', studentId: 'EST-002', grade: '3', guardianName: 'María García', average: 9.2, status: 'active' },
            { id: 3, firstName: 'Carolina', lastName: 'López', studentId: 'EST-003', grade: '3', guardianName: 'José López', average: 7.8, status: 'active' },
            { id: 4, firstName: 'Diego', lastName: 'Hernández', studentId: 'EST-004', grade: '3', guardianName: 'Laura Hernández', average: 8.5, status: 'active' },
            { id: 5, firstName: 'Sofía', lastName: 'Díaz', studentId: 'EST-005', grade: '4', guardianName: 'Roberto Díaz', average: 9.8, status: 'active' },
            { id: 6, firstName: 'Pablo', lastName: 'Torres', studentId: 'EST-006', grade: '4', guardianName: 'Ana Torres', average: 7.5, status: 'active' },
            { id: 7, firstName: 'Valentina', lastName: 'Sánchez', studentId: 'EST-007', grade: '4', guardianName: 'Carlos Sánchez', average: 8.1, status: 'active' },
            { id: 8, firstName: 'Mateo', lastName: 'González', studentId: 'EST-008', grade: '5', guardianName: 'Elena González', average: 6.9, status: 'inactive' },
            { id: 9, firstName: 'Emma', lastName: 'Rodríguez', studentId: 'EST-009', grade: '5', guardianName: 'Miguel Rodríguez', average: 9.1, status: 'active' },
            { id: 10, firstName: 'Sebastián', lastName: 'Pérez', studentId: 'EST-010', grade: '5', guardianName: 'Carmen Pérez', average: 8.3, status: 'active' },
        ];

        // Mock data for teachers
        const mockTeachers = [
            { id: 1, firstName: 'María', lastName: 'García', teacherId: 'TCH-001', specialty: 'Matemáticas', subjects: ['Matemáticas', 'Física'], contact: 'maria.garcia@example.com', status: 'active' },
            { id: 2, firstName: 'Carlos', lastName: 'Rodríguez', teacherId: 'TCH-002', specialty: 'Lengua y Literatura', subjects: ['Español', 'Literatura'], contact: 'carlos.rodriguez@example.com', status: 'active' },
            { id: 3, firstName: 'Javier', lastName: 'Hernández', teacherId: 'TCH-003', specialty: 'Ciencias Naturales', subjects: ['Ciencias', 'Biología'], contact: 'javier.hernandez@example.com', status: 'active' },
            { id: 4, firstName: 'Laura', lastName: 'López', teacherId: 'TCH-004', specialty: 'Historia', subjects: ['Historia', 'Geografía'], contact: 'laura.lopez@example.com', status: 'active' },
            { id: 5, firstName: 'Alejandro', lastName: 'Martínez', teacherId: 'TCH-005', specialty: 'Inglés', subjects: ['Inglés'], contact: 'alejandro.martinez@example.com', status: 'active' },
            { id: 6, firstName: 'Patricia', lastName: 'Pérez', teacherId: 'TCH-006', specialty: 'Educación Física', subjects: ['Educación Física'], contact: 'patricia.perez@example.com', status: 'active' },
            { id: 7, firstName: 'Miguel', lastName: 'Sánchez', teacherId: 'TCH-007', specialty: 'Artes', subjects: ['Artes Plásticas', 'Música'], contact: 'miguel.sanchez@example.com', status: 'active' },
            { id: 8, firstName: 'David', lastName: 'González', teacherId: 'TCH-008', specialty: 'Informática', subjects: ['Computación'], contact: 'david.gonzalez@example.com', status: 'inactive' },
            { id: 9, firstName: 'Sofía', lastName: 'Fernández', teacherId: 'TCH-009', specialty: 'Educación Especial', subjects: ['Apoyo Educativo'], contact: 'sofia.fernandez@example.com', status: 'on-leave' },
        ];

        // Mock data for subjects
        const mockSubjects = [
            { id: 1, name: 'Matemáticas', code: 'MAT-101', grades: ['1', '2', '3', '4', '5', '6'], teacher: 'María García', schedule: 'Lunes, Miércoles, Viernes 9:00 - 10:30', status: 'active', color: 'blue' },
            { id: 2, name: 'Español', code: 'ESP-101', grades: ['1', '2', '3', '4', '5', '6'], teacher: 'Carlos Rodríguez', schedule: 'Lunes, Miércoles, Viernes 10:45 - 12:15', status: 'active', color: 'red' },
            { id: 3, name: 'Ciencias', code: 'CIE-101', grades: ['1', '2', '3', '4', '5', '6'], teacher: 'Javier Hernández', schedule: 'Martes, Jueves 9:00 - 11:00', status: 'active', color: 'green' },
            { id: 4, name: 'Historia', code: 'HIS-101', grades: ['3', '4', '5', '6'], teacher: 'Laura López', schedule: 'Martes, Jueves 11:15 - 13:15', status: 'active', color: 'yellow' },
            { id: 5, name: 'Inglés', code: 'ING-101', grades: ['1', '2', '3', '4', '5', '6'], teacher: 'Alejandro Martínez', schedule: 'Miércoles, Viernes 13:30 - 15:00', status: 'active', color: 'purple' },
            { id: 6, name: 'Educación Física', code: 'EDF-101', grades: ['1', '2', '3', '4', '5', '6'], teacher: 'Patricia Pérez', schedule: 'Lunes, Jueves 13:30 - 15:00', status: 'active', color: 'orange' },
            { id: 7, name: 'Artes Plásticas', code: 'ART-101', grades: ['1', '2', '3', '4', '5', '6'], teacher: 'Miguel Sánchez', schedule: 'Martes 13:30 - 15:30', status: 'active', color: 'pink' },
            { id: 8, name: 'Música', code: 'MUS-101', grades: ['3', '4', '5', '6'], teacher: 'Miguel Sánchez', schedule: 'Viernes 13:30 - 15:30', status: 'active', color: 'indigo' },
            { id: 9, name: 'Computación', code: 'COM-101', grades: ['3', '4', '5', '6'], teacher: 'David González', schedule: 'Lunes 15:30 - 17:30', status: 'inactive', color: 'teal' },
        ];

        // Mock data for grades
        const mockGrades = [
            // Each student has grades for each subject
            { studentId: 1, studentName: 'Ana Martínez', grades: { math: 8.5, spanish: 9.0, science: 8.7, history: 8.3, english: 9.2 } },
            { studentId: 2, studentName: 'Luis García', grades: { math: 9.5, spanish: 8.8, science: 9.7, history: 9.0, english: 9.0 } },
            { studentId: 3, studentName: 'Carolina López', grades: { math: 7.0, spanish: 8.0, science: 7.5, history: 8.5, english: 8.0 } },
            { studentId: 4, studentName: 'Diego Hernández', grades: { math: 8.0, spanish: 8.5, science: 9.0, history: 8.5, english: 8.5 } },
            { studentId: 5, studentName: 'Sofía Díaz', grades: { math: 10.0, spanish: 9.5, science: 10.0, history: 9.5, english: 10.0 } },
            { studentId: 6, studentName: 'Pablo Torres', grades: { math: 7.0, spanish: 7.5, science: 8.0, history: 7.5, english: 7.5 } },
            { studentId: 7, studentName: 'Valentina Sánchez', grades: { math: 8.0, spanish: 8.5, science: 7.5, history: 8.0, english: 8.5 } },
            { studentId: 8, studentName: 'Mateo González', grades: { math: 6.0, spanish: 7.0, science: 7.5, history: 7.0, english: 7.0 } },
            { studentId: 9, studentName: 'Emma Rodríguez', grades: { math: 9.5, spanish: 9.0, science: 9.0, history: 9.0, english: 9.0 } },
            { studentId: 10, studentName: 'Sebastián Pérez', grades: { math: 8.0, spanish: 8.5, science: 8.5, history: 8.0, english: 8.5 } },
        ];

        // Users pagination and filtering variables
        let currentUsersPage = 1;
        const usersPerPage = 6;
        let filteredUsers = [...mockUsers];

        // Students pagination and filtering variables
        let currentStudentsPage = 1;
        const studentsPerPage = 6;
        let filteredStudents = [...mockStudents];

        // Teachers pagination and filtering variables
        let currentTeachersPage = 1;
        const teachersPerPage = 6;
        let filteredTeachers = [...mockTeachers];

        // Subjects pagination and filtering variables
        let currentSubjectsPage = 1;
        const subjectsPerPage = 6;
        let filteredSubjects = [...mockSubjects];

        // Grades filtering variables
        let filteredGrades = [...mockGrades];

        // Toggle sidebar on mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            
            sidebar.classList.toggle('-translate-x-full');
            overlay.classList.toggle('hidden');
        }
        
        // User menu toggle
        const userMenuButton = document.getElementById('user-menu-button');
        const userMenu = document.getElementById('user-menu');
        
        userMenuButton.addEventListener('click', () => {
            userMenu.classList.toggle('hidden');
            userMenu.classList.toggle('opacity-0');
            userMenu.classList.toggle('scale-95');
            userMenuButton.setAttribute('aria-expanded', userMenu.classList.contains('hidden') ? 'false' : 'true');
        });
        
        // Notifications menu toggle
        const notificationsButton = document.getElementById('notifications-button');
        const notificationsMenu = document.getElementById('notifications-menu');
        
        notificationsButton.addEventListener('click', () => {
            notificationsMenu.classList.toggle('hidden');
            notificationsMenu.classList.toggle('opacity-0');
            notificationsMenu.classList.toggle('scale-95');
            notificationsButton.setAttribute('aria-expanded', notificationsMenu.classList.contains('hidden') ? 'false' : 'true');
        });
        
        // Close menus when clicking outside
        document.addEventListener('click', (event) => {
            // Close user menu
            if (!userMenuButton.contains(event.target) && !userMenu.contains(event.target)) {
                userMenu.classList.add('hidden', 'opacity-0', 'scale-95');
                userMenuButton.setAttribute('aria-expanded', 'false');
            }
            
            // Close notifications menu
            if (!notificationsButton.contains(event.target) && !notificationsMenu.contains(event.target)) {
                notificationsMenu.classList.add('hidden', 'opacity-0', 'scale-95');
                notificationsButton.setAttribute('aria-expanded', 'false');
            }
        });
        
        // Dark mode toggle
        const themeToggleBtn = document.getElementById('theme-toggle');
        
        // Check for dark mode preference
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        
        // Listen for changes to the user's dark mode preference
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
            
            // Update charts for dark mode
            updateChartThemes();
        });
        
        // Handle manual dark mode toggle
        themeToggleBtn.addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            
            // Update charts for dark mode
            updateChartThemes();
        });
        
        // Display current date
        function setCurrentDate() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateString = now.toLocaleDateString('es-ES', options);
            document.getElementById('current-date').textContent = dateString.charAt(0).toUpperCase() + dateString.slice(1);
        }
        
        // Updated charts function to handle regular chart and new radar chart
        function initializeCharts() {
            // Performance Bar Chart
            initializePerformanceChart();
            
            // Radar Chart for comparison
            initializeRadarChart();
            
            // Initialize full radar chart for detailed comparison section
            if (document.getElementById('fullRadarChart')) {
                initializeFullRadarChart();
            }
            
            // Initialize progress chart for detailed comparison section
            if (document.getElementById('progressChart')) {
                initializeProgressChart();
            }
        }
        
        function initializePerformanceChart() {
            const chartCtx = document.getElementById('performanceChart').getContext('2d');
            
            // Simulate loading data
            showChartLoading(true);
            
            // Adjusted data based on dark mode
            const isDarkMode = document.documentElement.classList.contains('dark');
            
            const chartOptions = {
                type: 'bar',
                data: {
                    labels: ['Matemáticas', 'Español', 'Ciencias', 'Historia', 'Inglés'],
                    datasets: [{
                        label: 'Promedio',
                        data: [8.5, 7.8, 9.0, 8.2, 8.7],
                        backgroundColor: [
                            'rgba(99, 102, 241, 0.8)',
                            'rgba(239, 68, 68, 0.8)',
                            'rgba(245, 158, 11, 0.8)',
                            'rgba(16, 185, 129, 0.8)',
                            'rgba(59, 130, 246, 0.8)'
                        ],
                        borderColor: [
                            'rgba(99, 102, 241, 1)',
                            'rgba(239, 68, 68, 1)',
                            'rgba(245, 158, 11, 1)',
                            'rgba(16, 185, 129, 1)',
                            'rgba(59, 130, 246, 1)'
                        ],
                        borderWidth: 2,
                        borderRadius: 6,
                        hoverOffset: 4
                    }]
                },
                options: { 
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: isDarkMode ? 'rgba(31, 41, 55, 0.95)' : 'rgba(255, 255, 255, 0.95)',
                            titleColor: isDarkMode ? '#f3f4f6' : '#1f2937',
                            bodyColor: isDarkMode ? '#f3f4f6' : '#1f2937',
                            padding: 12,
                            borderWidth: 1,
                            borderColor: isDarkMode ? 'rgba(75, 85, 99, 0.2)' : 'rgba(229, 231, 235, 0.8)',
                            usePointStyle: true,
                            boxWidth: 8,
                            boxPadding: 4,
                            cornerRadius: 8
                        }
                    },
                    scales: { 
                        y: { 
                            beginAtZero: true,
                            max: 10,
                            grid: {
                                color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: { 
                                color: isDarkMode ? '#f3f4f6' : '#4b5563',
                                font: { weight: 'bold' },
                                padding: 8,
                                callback: function(value) {
                                    return value.toFixed(1);
                                }
                            }
                        },
                        x: { 
                            grid: {
                                display: false
                            },
                            ticks: { 
                                color: isDarkMode ? '#f3f4f6' : '#4b5563',
                                font: { weight: 'bold' },
                                padding: 8
                            }
                        }
                    },
                    animation: {
                        duration: 1500,
                        easing: 'easeOutQuart'
                    }
                }
            };
            
            // Simulate data loading delay
            setTimeout(() => {
                showChartLoading(false);
                window.performanceChart = new Chart(chartCtx, chartOptions);
                
                // Handle chart period changes
                document.getElementById('chart-period').addEventListener('change', function() {
                    showChartLoading(true);
                    
                    // Simulate fetching new data
                    setTimeout(() => {
                        const period = this.value;
                        let newData;
                        
                        if (period === 'month') {
                            newData = [8.3, 7.6, 8.8, 8.0, 8.5];
                        } else if (period === 'quarter') {
                            newData = [8.4, 7.7, 8.9, 8.1, 8.6];
                        } else { // year
                            newData = [8.5, 7.8, 9.0, 8.2, 8.7];
                        }
                        
                        window.performanceChart.data.datasets[0].data = newData;
                        window.performanceChart.update();
                        showChartLoading(false);
                    }, 800);
                });
                
                // Export chart functionality (simplified for demo)
                document.getElementById('download-chart').addEventListener('click', function() {
                    alert('En una implementación real, aquí se descargaría el gráfico como imagen o PDF.');
                });
            }, 1000);
        }
        
        function initializeRadarChart() {
            if (!document.getElementById('radarChart')) return;
            
            const radarCtx = document.getElementById('radarChart').getContext('2d');
            const isDarkMode = document.documentElement.classList.contains('dark');
            
            const data = {
                labels: ['Matemáticas', 'Español', 'Ciencias', 'Historia', 'Inglés'],
                datasets: [
                    {
                        label: 'Estudiante',
                        data: [9.5, 8.8, 9.7, 9.0, 9.0],
                        fill: true,
                        backgroundColor: 'rgba(139, 92, 246, 0.2)',
                        borderColor: 'rgba(139, 92, 246, 0.8)',
                        pointBackgroundColor: 'rgba(139, 92, 246, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(139, 92, 246, 1)',
                        pointRadius: 4
                    },
                    {
                        label: 'Promedio Grupo',
                        data: [7.0, 7.5, 8.2, 7.8, 7.6],
                        fill: true,
                        backgroundColor: 'rgba(156, 163, 175, 0.2)',
                        borderColor: 'rgba(156, 163, 175, 0.8)',
                        pointBackgroundColor: 'rgba(156, 163, 175, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(156, 163, 175, 1)',
                        pointRadius: 4
                    }
                ]
            };
            
            const config = {
                type: 'radar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    elements: {
                        line: {
                            borderWidth: 2
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: isDarkMode ? 'rgba(31, 41, 55, 0.95)' : 'rgba(255, 255, 255, 0.95)',
                            titleColor: isDarkMode ? '#f3f4f6' : '#1f2937',
                            bodyColor: isDarkMode ? '#f3f4f6' : '#1f2937',
                            padding: 10,
                            displayColors: true,
                            borderWidth: 1,
                            borderColor: isDarkMode ? 'rgba(75, 85, 99, 0.2)' : 'rgba(229, 231, 235, 0.8)'
                        }
                    },
                    scales: {
                        r: {
                            angleLines: {
                                color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                            },
                            grid: {
                                color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                            },
                            pointLabels: {
                                color: isDarkMode ? '#f3f4f6' : '#4b5563',
                                font: {
                                    size: 11
                                }
                            },
                            ticks: {
                                backdropColor: 'transparent',
                                color: isDarkMode ? 'rgba(255, 255, 255, 0.5)' : 'rgba(0, 0, 0, 0.5)',
                                font: {
                                    size: 9
                                },
                                stepSize: 2
                            },
                            suggestedMin: 0,
                            suggestedMax: 10
                        }
                    }
                }
            };
            
            window.radarChart = new Chart(radarCtx, config);
            
            // Update chart on student change
            document.getElementById('student-compare-select')?.addEventListener('change', function() {
                // This would load real data in production
                // For demo, we'll just simulate different values
                let newData;
                
                if (this.value === 'student1') {
                    newData = [9.5, 8.8, 9.7, 9.0, 9.0]; // Luis García
                } else if (this.value === 'student2') {
                    newData = [8.5, 9.0, 8.7, 8.3, 9.2]; // Ana Martínez
                } else if (this.value === 'student3') {
                    newData = [10.0, 9.5, 10.0, 9.5, 10.0]; // Sofía Díaz
                } else if (this.value === 'student4') {
                    newData = [7.0, 8.0, 7.5, 8.5, 8.0]; // Carlos Ruiz
                }
                
                window.radarChart.data.datasets[0].data = newData;
                window.radarChart.update();
            });
            
            // Refresh button
            document.getElementById('compare-refresh')?.addEventListener('click', function() {
                // Simulate refresh with loading indicator
                const button = this;
                const originalContent = button.innerHTML;
                button.innerHTML = '<i class="fas fa-circle-notch fa-spin mr-1"></i> Actualizando';
                button.disabled = true;
                
                setTimeout(() => {
                    button.innerHTML = originalContent;
                    button.disabled = false;
                }, 1500);
            });
        }
        
        function initializeFullRadarChart() {
            const radarCtx = document.getElementById('fullRadarChart').getContext('2d');
            const isDarkMode = document.documentElement.classList.contains('dark');
            
            const data = {
                labels: ['Matemáticas', 'Español', 'Ciencias', 'Historia', 'Inglés'],
                datasets: [
                    {
                        label: 'Estudiante',
                        data: [9.5, 8.8, 9.7, 9.0, 9.0],
                        fill: true,
                        backgroundColor: 'rgba(139, 92, 246, 0.2)',
                        borderColor: 'rgba(139, 92, 246, 0.8)',
                        pointBackgroundColor: 'rgba(139, 92, 246, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(139, 92, 246, 1)',
                        pointRadius: 4
                    },
                    {
                        label: 'Promedio Grupo',
                        data: [7.0, 7.5, 8.2, 7.8, 7.6],
                        fill: true,
                        backgroundColor: 'rgba(156, 163, 175, 0.2)',
                        borderColor: 'rgba(156, 163, 175, 0.8)',
                        pointBackgroundColor: 'rgba(156, 163, 175, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(156, 163, 175, 1)',
                        pointRadius: 4
                    },
                    {
                        label: 'Periodo Anterior',
                        data: [9.0, 9.2, 9.0, 9.0, 8.7],
                        fill: true,
                        backgroundColor: 'rgba(250, 204, 21, 0.2)',
                        borderColor: 'rgba(250, 204, 21, 0.8)',
                        pointBackgroundColor: 'rgba(250, 204, 21, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(250, 204, 21, 1)',
                        pointRadius: 4
                    }
                ]
            };
            
            const config = {
                type: 'radar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    elements: {
                        line: {
                            borderWidth: 2
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom',
                            labels: {
                                color: isDarkMode ? '#f3f4f6' : '#4b5563',
                                boxWidth: 12,
                                padding: 20
                            }
                        },
                        tooltip: {
                            backgroundColor: isDarkMode ? 'rgba(31, 41, 55, 0.95)' : 'rgba(255, 255, 255, 0.95)',
                            titleColor: isDarkMode ? '#f3f4f6' : '#1f2937',
                            bodyColor: isDarkMode ? '#f3f4f6' : '#1f2937',
                            padding: 10,
                            displayColors: true,
                            borderWidth: 1,
                            borderColor: isDarkMode ? 'rgba(75, 85, 99, 0.2)' : 'rgba(229, 231, 235, 0.8)'
                        }
                    },
                    scales: {
                        r: {
                            angleLines: {
                                color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                            },
                            grid: {
                                color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                            },
                            pointLabels: {
                                color: isDarkMode ? '#f3f4f6' : '#4b5563',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            },
                            ticks: {
                                backdropColor: 'transparent',
                                color: isDarkMode ? 'rgba(255, 255, 255, 0.5)' : 'rgba(0, 0, 0, 0.5)',
                                font: {
                                    size: 9
                                },
                                stepSize: 2
                            },
                            suggestedMin: 0,
                            suggestedMax: 10
                        }
                    }
                }
            };
            
            window.fullRadarChart = new Chart(radarCtx, config);
        }
        
        function initializeProgressChart() {
            const progressCtx = document.getElementById('progressChart').getContext('2d');
            const isDarkMode = document.documentElement.classList.contains('dark');
            
            const data = {
                labels: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio'],
                datasets: [
                    {
                        label: 'Estudiante',
                        data: [8.2, 8.5, 8.7, 8.3, 9.0, 9.2],
                        borderColor: 'rgba(139, 92, 246, 0.8)',
                        backgroundColor: 'rgba(139, 92, 246, 0.2)',
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: 'Promedio Grupo',
                        data: [7.5, 7.4, 7.6, 7.5, 7.7, 7.8],
                        borderColor: 'rgba(156, 163, 175, 0.8)',
                        backgroundColor: 'rgba(156, 163, 175, 0.1)',
                        tension: 0.4,
                        fill: true
                    }
                ]
            };
            
            const config = {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: isDarkMode ? '#f3f4f6' : '#4b5563',
                                boxWidth: 12,
                                padding: 20
                            }
                        },
                        tooltip: {
                            backgroundColor: isDarkMode ? 'rgba(31, 41, 55, 0.95)' : 'rgba(255, 255, 255, 0.95)',
                            titleColor: isDarkMode ? '#f3f4f6' : '#1f2937',
                            bodyColor: isDarkMode ? '#f3f4f6' : '#1f2937',
                            padding: 10,
                            displayColors: true,
                            borderWidth: 1,
                            borderColor: isDarkMode ? 'rgba(75, 85, 99, 0.2)' : 'rgba(229, 231, 235, 0.8)',
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            min: 5,
                            max: 10,
                            grid: {
                                color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.05)',
                            },
                            ticks: {
                                color: isDarkMode ? '#f3f4f6' : '#4b5563',
                                font: { weight: 'bold' },
                                padding: 8,
                                callback: function(value) {
                                    return value.toFixed(1);
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: isDarkMode ? '#f3f4f6' : '#4b5563',
                                font: { weight: 'bold' },
                                padding: 8
                            }
                        }
                    },
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    elements: {
                        point: {
                            radius: 4,
                            hoverRadius: 6
                        }
                    }
                }
            };
            
            window.progressChart = new Chart(progressCtx, config);
        }
        
        // Function to update chart themes when dark mode changes
        function updateChartThemes() {
            const isDarkMode = document.documentElement.classList.contains('dark');
            
            // Update performance chart if it exists
            if (window.performanceChart) {
                window.performanceChart.options.plugins.tooltip.backgroundColor = isDarkMode ? 'rgba(31, 41, 55, 0.95)' : 'rgba(255, 255, 255, 0.95)';
                window.performanceChart.options.plugins.tooltip.titleColor = isDarkMode ? '#f3f4f6' : '#1f2937';
                window.performanceChart.options.plugins.tooltip.bodyColor = isDarkMode ? '#f3f4f6' : '#1f2937';
                window.performanceChart.options.plugins.tooltip.borderColor = isDarkMode ? 'rgba(75, 85, 99, 0.2)' : 'rgba(229, 231, 235, 0.8)';
                window.performanceChart.options.scales.y.grid.color = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.05)';
                window.performanceChart.options.scales.y.ticks.color = isDarkMode ? '#f3f4f6' : '#4b5563';
                window.performanceChart.options.scales.x.ticks.color = isDarkMode ? '#f3f4f6' : '#4b5563';
                window.performanceChart.update();
            }
            
            // Update radar chart if it exists
            if (window.radarChart) {
                window.radarChart.options.plugins.tooltip.backgroundColor = isDarkMode ? 'rgba(31, 41, 55, 0.95)' : 'rgba(255, 255, 255, 0.95)';
                window.radarChart.options.plugins.tooltip.titleColor = isDarkMode ? '#f3f4f6' : '#1f2937';
                window.radarChart.options.plugins.tooltip.bodyColor = isDarkMode ? '#f3f4f6' : '#1f2937';
                window.radarChart.options.plugins.tooltip.borderColor = isDarkMode ? 'rgba(75, 85, 99, 0.2)' : 'rgba(229, 231, 235, 0.8)';
                window.radarChart.options.scales.r.angleLines.color = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
                window.radarChart.options.scales.r.grid.color = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
                window.radarChart.options.scales.r.pointLabels.color = isDarkMode ? '#f3f4f6' : '#4b5563';
                window.radarChart.options.scales.r.ticks.color = isDarkMode ? 'rgba(255, 255, 255, 0.5)' : 'rgba(0, 0, 0, 0.5)';
                window.radarChart.update();
            }
            
            // Update full radar chart if it exists
            if (window.fullRadarChart) {
                window.fullRadarChart.options.plugins.legend.labels.color = isDarkMode ? '#f3f4f6' : '#4b5563';
                window.fullRadarChart.options.plugins.tooltip.backgroundColor = isDarkMode ? 'rgba(31, 41, 55, 0.95)' : 'rgba(255, 255, 255, 0.95)';
                window.fullRadarChart.options.plugins.tooltip.titleColor = isDarkMode ? '#f3f4f6' : '#1f2937';
                window.fullRadarChart.options.plugins.tooltip.bodyColor = isDarkMode ? '#f3f4f6' : '#1f2937';
                window.fullRadarChart.options.plugins.tooltip.borderColor = isDarkMode ? 'rgba(75, 85, 99, 0.2)' : 'rgba(229, 231, 235, 0.8)';
                window.fullRadarChart.options.scales.r.angleLines.color = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
                window.fullRadarChart.options.scales.r.grid.color = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
                window.fullRadarChart.options.scales.r.pointLabels.color = isDarkMode ? '#f3f4f6' : '#4b5563';
                window.fullRadarChart.options.scales.r.ticks.color = isDarkMode ? 'rgba(255, 255, 255, 0.5)' : 'rgba(0, 0, 0, 0.5)';
                window.fullRadarChart.update();
            }
            
            // Update progress chart if it exists
            if (window.progressChart) {
                window.progressChart.options.plugins.legend.labels.color = isDarkMode ? '#f3f4f6' : '#4b5563';
                window.progressChart.options.plugins.tooltip.backgroundColor = isDarkMode ? 'rgba(31, 41, 55, 0.95)' : 'rgba(255, 255, 255, 0.95)';
                window.progressChart.options.plugins.tooltip.titleColor = isDarkMode ? '#f3f4f6' : '#1f2937';
                window.progressChart.options.plugins.tooltip.bodyColor = isDarkMode ? '#f3f4f6' : '#1f2937';
                window.progressChart.options.plugins.tooltip.borderColor = isDarkMode ? 'rgba(75, 85, 99, 0.2)' : 'rgba(229, 231, 235, 0.8)';
                window.progressChart.options.scales.y.grid.color = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.05)';
                window.progressChart.options.scales.y.ticks.color = isDarkMode ? '#f3f4f6' : '#4b5563';
                window.progressChart.options.scales.x.ticks.color = isDarkMode ? '#f3f4f6' : '#4b5563';
                window.progressChart.update();
            }
        }
        
        function showChartLoading(isLoading) {
            const loadingOverlay = document.getElementById('chart-loading');
            loadingOverlay.classList.toggle('hidden', !isLoading);
        }

        // Section navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('main > div').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.remove('hidden');
            
            // Highlight active sidebar item
            document.querySelectorAll('#sidebar a').forEach(link => {
                if (link.getAttribute('onclick') && link.getAttribute('onclick').includes(sectionId)) {
                    link.classList.add('bg-primary-50', 'dark:bg-primary-900/30');
                } else {
                    link.classList.remove('bg-primary-50', 'dark:bg-primary-900/30');
                }
            });
            
            // Load data based on section
            if (sectionId === 'users-section') {
                loadUsers();
            } else if (sectionId === 'students-section') {
                loadStudents();
            } else if (sectionId === 'teachers-section') {
                loadTeachers();
            } else if (sectionId === 'subjects-section') {
                loadSubjects();
            } else if (sectionId === 'grades-section') {
                loadGrades();
            } else if (sectionId === 'comparative-section') {
                // Initialize/update comparative section charts if needed
                setTimeout(() => {
                    if (window.fullRadarChart) window.fullRadarChart.update();
                    if (window.progressChart) window.progressChart.update();
                }, 100);
            }
        }

        // User Management Functions
        function loadUsers() {
            const tableBody = document.getElementById('users-table-body');
            const loadingElement = document.getElementById('users-loading');
            const emptyElement = document.getElementById('users-empty');
            
            // Show loading
            tableBody.innerHTML = '';
            loadingElement.classList.remove('hidden');
            emptyElement.classList.add('hidden');
            
            // Apply filters
            const searchQuery = document.getElementById('user-search').value.toLowerCase();
            const roleFilter = document.getElementById('role-filter').value;
            const statusFilter = document.getElementById('status-filter').value;
            
            filteredUsers = mockUsers.filter(user => {
                const nameMatch = `${user.firstName} ${user.lastName}`.toLowerCase().includes(searchQuery) || 
                                user.email.toLowerCase().includes(searchQuery);
                const roleMatch = roleFilter === 'all' || user.role === roleFilter;
                const statusMatch = statusFilter === 'all' || user.status === statusFilter;
                
                return nameMatch && roleMatch && statusMatch;
            });
            
            // Update pagination info
            updateUsersPagination();
            
            // Simulate loading delay
            setTimeout(() => {
                loadingElement.classList.add('hidden');
                
                if (filteredUsers.length === 0) {
                    emptyElement.classList.remove('hidden');
                    return;
                }
                
                // Calculate slice for current page
                const startIndex = (currentUsersPage - 1) * usersPerPage;
                const endIndex = startIndex + usersPerPage;
                const usersToShow = filteredUsers.slice(startIndex, endIndex);
                
                // Render users
                usersToShow.forEach(user => {
                    const row = document.createElement('tr');
                    row.className = 'bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150';
                    
                    // Role badge colors
                    let roleBadgeClass = '';
                    switch (user.role) {
                        case 'admin':
                            roleBadgeClass = 'bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400';
                            break;
                        case 'teacher':
                            roleBadgeClass = 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400';
                            break;
                        case 'student':
                            roleBadgeClass = 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400';
                            break;
                        case 'parent':
                            roleBadgeClass = 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400';
                            break;
                    }
                    
                    // Status badge colors
                    let statusBadgeClass = '';
                    let statusIcon = '';
                    switch (user.status) {
                        case 'active':
                            statusBadgeClass = 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400';
                            statusIcon = '<i class="fas fa-check-circle mr-1"></i>';
                            break;
                        case 'inactive':
                            statusBadgeClass = 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400';
                            statusIcon = '<i class="fas fa-times-circle mr-1"></i>';
                            break;
                        case 'pending':
                            statusBadgeClass = 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400';
                            statusIcon = '<i class="fas fa-clock mr-1"></i>';
                            break;
                    }
                    
                    // Format role name
                    let roleName = '';
                    switch (user.role) {
                        case 'admin':
                            roleName = 'Administrador';
                            break;
                        case 'teacher':
                            roleName = 'Profesor';
                            break;
                        case 'student':
                            roleName = 'Estudiante';
                            break;
                        case 'parent':
                            roleName = 'Padre/Tutor';
                            break;
                    }
                    
                    // Format status name
                    let statusName = '';
                    switch (user.status) {
                        case 'active':
                            statusName = 'Activo';
                            break;
                        case 'inactive':
                            statusName = 'Inactivo';
                            break;
                        case 'pending':
                            statusName = 'Pendiente';
                            break;
                    }
                    
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center">
                                    <span class="font-medium text-gray-600 dark:text-gray-300">${user.firstName.charAt(0)}${user.lastName.charAt(0)}</span>
                                </div>
                                <div class="ml-4">
                                    <div class="text-sm font-medium text-gray-900 dark:text-white">${user.firstName} ${user.lastName}</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-500 dark:text-gray-400">${user.email}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${roleBadgeClass}">
                                ${roleName}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusBadgeClass}">
                                ${statusIcon} ${statusName}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-500 dark:text-gray-400">${user.lastLogin}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                            <div class="flex space-x-2 justify-end">
                                <button class="text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300" onclick="editUser(${user.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300" onclick="showDeleteModal(${user.id})">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                });
                
                // Update user counts
                document.getElementById('users-showing-count').textContent = Math.min(filteredUsers.length, usersPerPage);
                document.getElementById('users-total-count').textContent = filteredUsers.length;
                
            }, 500);
        }

        function updateUsersPagination() {
            const totalPages = Math.ceil(filteredUsers.length / usersPerPage);
            const pageNumbersContainer = document.getElementById('users-page-numbers');
            const prevButton = document.getElementById('users-prev-page');
            const nextButton = document.getElementById('users-next-page');
            
            // Update button states
            prevButton.disabled = currentUsersPage === 1;
            nextButton.disabled = currentUsersPage === totalPages || totalPages === 0;
            
            // Clear page numbers
            pageNumbersContainer.innerHTML = '';
            
            // Add page numbers
            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement('button');
                pageButton.classList.add('w-8', 'h-8', 'rounded-md', 'flex', 'items-center', 'justify-center', 'text-sm');
                
                if (i === currentUsersPage) {
                    pageButton.classList.add('bg-primary-500', 'text-white');
                } else {
                    pageButton.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300', 'hover:bg-gray-200', 'dark:hover:bg-gray-600');
                }
                
                pageButton.textContent = i;
                pageButton.addEventListener('click', () => {
                    currentUsersPage = i;
                    loadUsers();
                });
                
                pageNumbersContainer.appendChild(pageButton);
            }
        }

        // Students Management Functions
        function loadStudents() {
            const tableBody = document.getElementById('students-table-body');
            const loadingElement = document.getElementById('students-loading');
            const emptyElement = document.getElementById('students-empty');
            
            // Show loading
            tableBody.innerHTML = '';
            loadingElement.classList.remove('hidden');
            emptyElement.classList.add('hidden');
            
            // Apply filters
            const searchQuery = document.getElementById('student-search').value.toLowerCase();
            const gradeFilter = document.getElementById('grade-filter').value;
            const statusFilter = document.getElementById('status-student-filter').value;
            
            filteredStudents = mockStudents.filter(student => {
                const nameMatch = `${student.firstName} ${student.lastName}`.toLowerCase().includes(searchQuery) || 
                                student.studentId.toLowerCase().includes(searchQuery);
                const gradeMatch = gradeFilter === 'all' || student.grade === gradeFilter;
                const statusMatch = statusFilter === 'all' || student.status === statusFilter;
                
                return nameMatch && gradeMatch && statusMatch;
            });
            
            // Update pagination info
            updateStudentsPagination();
            
            // Simulate loading delay
            setTimeout(() => {
                loadingElement.classList.add('hidden');
                
                if (filteredStudents.length === 0) {
                    emptyElement.classList.remove('hidden');
                    return;
                }
                
                // Calculate slice for current page
                const startIndex = (currentStudentsPage - 1) * studentsPerPage;
                const endIndex = startIndex + studentsPerPage;
                const studentsToShow = filteredStudents.slice(startIndex, endIndex);
                
                // Render students
                studentsToShow.forEach(student => {
                    const row = document.createElement('tr');
                    row.className = 'bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150';
                    
                    // Status badge colors
                    let statusBadgeClass = '';
                    let statusIcon = '';
                    switch (student.status) {
                        case 'active':
                            statusBadgeClass = 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400';
                            statusIcon = '<i class="fas fa-check-circle mr-1"></i>';
                            break;
                        case 'inactive':
                            statusBadgeClass = 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400';
                            statusIcon = '<i class="fas fa-times-circle mr-1"></i>';
                            break;
                    }
                    
                    // Format status name
                    let statusName = '';
                    switch (student.status) {
                        case 'active':
                            statusName = 'Activo';
                            break;
                        case 'inactive':
                            statusName = 'Inactivo';
                            break;
                    }
                    
                    // Grade color based on average
                    let averageColor = '';
                    if (student.average >= 9.5) {
                        averageColor = 'text-blue-600 dark:text-blue-400';
                    } else if (student.average >= 8.0) {
                        averageColor = 'text-green-600 dark:text-green-400';
                    } else if (student.average >= 6.0) {
                        averageColor = 'text-yellow-600 dark:text-yellow-400';
                    } else {
                        averageColor = 'text-red-600 dark:text-red-400';
                    }
                    
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center">
                                    <span class="font-medium text-gray-600 dark:text-gray-300">${student.firstName.charAt(0)}${student.lastName.charAt(0)}</span>
                                </div>
                                <div class="ml-4">
                                    <div class="text-sm font-medium text-gray-900 dark:text-white">${student.firstName} ${student.lastName}</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-500 dark:text-gray-400">${student.studentId}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400">
                                ${student.grade}° Grado
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-700 dark:text-gray-300">${student.guardianName}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium ${averageColor}">${student.average.toFixed(1)}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusBadgeClass}">
                                ${statusIcon} ${statusName}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                            <div class="flex space-x-2 justify-end">
                                <button class="text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300" onclick="alert('Editar estudiante: ${student.firstName} ${student.lastName}')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300" onclick="showSection('comparative-section')">
                                    <i class="fas fa-chart-line"></i>
                                </button>
                                <button class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300" onclick="alert('Eliminar estudiante: ${student.firstName} ${student.lastName}')">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                });
                
                // Update student counts
                document.getElementById('students-showing-count').textContent = Math.min(filteredStudents.length, studentsPerPage);
                document.getElementById('students-total-count').textContent = filteredStudents.length;
                
            }, 500);
        }

        function updateStudentsPagination() {
            const totalPages = Math.ceil(filteredStudents.length / studentsPerPage);
            const pageNumbersContainer = document.getElementById('students-page-numbers');
            const prevButton = document.getElementById('students-prev-page');
            const nextButton = document.getElementById('students-next-page');
            
            // Update button states
            prevButton.disabled = currentStudentsPage === 1;
            nextButton.disabled = currentStudentsPage === totalPages || totalPages === 0;
            
            // Clear page numbers
            pageNumbersContainer.innerHTML = '';
            
            // Add page numbers
            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement('button');
                pageButton.classList.add('w-8', 'h-8', 'rounded-md', 'flex', 'items-center', 'justify-center', 'text-sm');
                
                if (i === currentStudentsPage) {
                    pageButton.classList.add('bg-primary-500', 'text-white');
                } else {
                    pageButton.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300', 'hover:bg-gray-200', 'dark:hover:bg-gray-600');
                }
                
                pageButton.textContent = i;
                pageButton.addEventListener('click', () => {
                    currentStudentsPage = i;
                    loadStudents();
                });
                
                pageNumbersContainer.appendChild(pageButton);
            }
        }

        // Teachers Management Functions
        function loadTeachers() {
            const tableBody = document.getElementById('teachers-table-body');
            const loadingElement = document.getElementById('teachers-loading');
            const emptyElement = document.getElementById('teachers-empty');
            
            // Show loading
            tableBody.innerHTML = '';
            loadingElement.classList.remove('hidden');
            emptyElement.classList.add('hidden');
            
            // Apply filters
            const searchQuery = document.getElementById('teacher-search').value.toLowerCase();
            const subjectFilter = document.getElementById('subject-filter').value;
            const statusFilter = document.getElementById('status-teacher-filter').value;
            
            filteredTeachers = mockTeachers.filter(teacher => {
                const nameMatch = `${teacher.firstName} ${teacher.lastName}`.toLowerCase().includes(searchQuery) || 
                                teacher.specialty.toLowerCase().includes(searchQuery);
                
                let subjectMatch = subjectFilter === 'all';
                if (!subjectMatch) {
                    // Map filter value to actual subject name
                    let subjectName;
                    switch (subjectFilter) {
                        case 'math': subjectName = 'Matemáticas'; break;
                        case 'spanish': subjectName = 'Español'; break;
                        case 'science': subjectName = 'Ciencias'; break;
                        case 'history': subjectName = 'Historia'; break;
                        case 'english': subjectName = 'Inglés'; break;
                    }
                    subjectMatch = teacher.subjects.includes(subjectName);
                }
                
                const statusMatch = statusFilter === 'all' || teacher.status === statusFilter;
                
                return nameMatch && subjectMatch && statusMatch;
            });
            
            // Update pagination info
            updateTeachersPagination();
            
            // Simulate loading delay
            setTimeout(() => {
                loadingElement.classList.add('hidden');
                
                if (filteredTeachers.length === 0) {
                    emptyElement.classList.remove('hidden');
                    return;
                }
                
                // Calculate slice for current page
                const startIndex = (currentTeachersPage - 1) * teachersPerPage;
                const endIndex = startIndex + teachersPerPage;
                const teachersToShow = filteredTeachers.slice(startIndex, endIndex);
                
                // Render teachers
                teachersToShow.forEach(teacher => {
                    const row = document.createElement('tr');
                    row.className = 'bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150';
                    
                    // Status badge colors
                    let statusBadgeClass = '';
                    let statusIcon = '';
                    switch (teacher.status) {
                        case 'active':
                            statusBadgeClass = 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400';
                            statusIcon = '<i class="fas fa-check-circle mr-1"></i>';
                            break;
                        case 'inactive':
                            statusBadgeClass = 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400';
                            statusIcon = '<i class="fas fa-times-circle mr-1"></i>';
                            break;
                        case 'on-leave':
                            statusBadgeClass = 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400';
                            statusIcon = '<i class="fas fa-pause-circle mr-1"></i>';
                            break;
                    }
                    
                    // Format status name
                    let statusName = '';
                    switch (teacher.status) {
                        case 'active':
                            statusName = 'Activo';
                            break;
                        case 'inactive':
                            statusName = 'Inactivo';
                            break;
                        case 'on-leave':
                            statusName = 'De licencia';
                            break;
                    }
                    
                    // Render subject badges
                    const subjectBadges = teacher.subjects.map(subject => {
                        return `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 mr-1 mb-1">${subject}</span>`;
                    }).join('');
                    
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center">
                                    <span class="font-medium text-gray-600 dark:text-gray-300">${teacher.firstName.charAt(0)}${teacher.lastName.charAt(0)}</span>
                                </div>
                                <div class="ml-4">
                                    <div class="text-sm font-medium text-gray-900 dark:text-white">${teacher.firstName} ${teacher.lastName}</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-500 dark:text-gray-400">${teacher.teacherId}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-700 dark:text-gray-300">${teacher.specialty}</div>
                        </td>
                        <td class="px-6 py-4">
                            <div class="flex flex-wrap">
                                ${subjectBadges}
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-500 dark:text-gray-400">${teacher.contact}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusBadgeClass}">
                                ${statusIcon} ${statusName}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                            <div class="flex space-x-2 justify-end">
                                <button class="text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300" onclick="alert('Editar profesor: ${teacher.firstName} ${teacher.lastName}')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300" onclick="alert('Eliminar profesor: ${teacher.firstName} ${teacher.lastName}')">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                });
                
                // Update teacher counts
                document.getElementById('teachers-showing-count').textContent = Math.min(filteredTeachers.length, teachersPerPage);
                document.getElementById('teachers-total-count').textContent = filteredTeachers.length;
                
            }, 500);
        }

        function updateTeachersPagination() {
            const totalPages = Math.ceil(filteredTeachers.length / teachersPerPage);
            const pageNumbersContainer = document.getElementById('teachers-page-numbers');
            const prevButton = document.getElementById('teachers-prev-page');
            const nextButton = document.getElementById('teachers-next-page');
            
            // Update button states
            prevButton.disabled = currentTeachersPage === 1;
            nextButton.disabled = currentTeachersPage === totalPages || totalPages === 0;
            
            // Clear page numbers
            pageNumbersContainer.innerHTML = '';
            
            // Add page numbers
            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement('button');
                pageButton.classList.add('w-8', 'h-8', 'rounded-md', 'flex', 'items-center', 'justify-center', 'text-sm');
                
                if (i === currentTeachersPage) {
                    pageButton.classList.add('bg-primary-500', 'text-white');
                } else {
                    pageButton.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300', 'hover:bg-gray-200', 'dark:hover:bg-gray-600');
                }
                
                pageButton.textContent = i;
                pageButton.addEventListener('click', () => {
                    currentTeachersPage = i;
                    loadTeachers();
                });
                
                pageNumbersContainer.appendChild(pageButton);
            }
        }

        // Subjects Management Functions
        function loadSubjects() {
            const container = document.getElementById('subjects-container');
            const loadingElement = document.getElementById('subjects-loading');
            const emptyElement = document.getElementById('subjects-empty');
            
            // Show loading
            // Remove all child elements except loading and empty state
            Array.from(container.children).forEach(child => {
                if (child.id !== 'subjects-loading' && child.id !== 'subjects-empty') {
                    child.remove();
                }
            });
            
            loadingElement.classList.remove('hidden');
            emptyElement.classList.add('hidden');
            
            // Apply filters
            const searchQuery = document.getElementById('subject-search').value.toLowerCase();
            const gradeFilter = document.getElementById('grade-subject-filter').value;
            const statusFilter = document.getElementById('status-subject-filter').value;
            
            filteredSubjects = mockSubjects.filter(subject => {
                const nameMatch = subject.name.toLowerCase().includes(searchQuery) || 
                                subject.code.toLowerCase().includes(searchQuery) ||
                                subject.teacher.toLowerCase().includes(searchQuery);
                const gradeMatch = gradeFilter === 'all' || subject.grades.includes(gradeFilter);
                const statusMatch = statusFilter === 'all' || subject.status === statusFilter;
                
                return nameMatch && gradeMatch && statusMatch;
            });
            
            // Update pagination info
            updateSubjectsPagination();
            
            // Simulate loading delay
            setTimeout(() => {
                loadingElement.classList.add('hidden');
                
                if (filteredSubjects.length === 0) {
                    emptyElement.classList.remove('hidden');
                    return;
                }
                
                // Calculate slice for current page
                const startIndex = (currentSubjectsPage - 1) * subjectsPerPage;
                const endIndex = startIndex + subjectsPerPage;
                const subjectsToShow = filteredSubjects.slice(startIndex, endIndex);
                
                // Render subjects as cards
                subjectsToShow.forEach(subject => {
                    const card = document.createElement('div');
                    card.className = 'bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden hover:shadow-md transition-shadow duration-200 animate-scale-in';
                    
                    // Status badge colors
                    let statusBadgeClass = '';
                    let statusIcon = '';
                    switch (subject.status) {
                        case 'active':
                            statusBadgeClass = 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400';
                            statusIcon = '<i class="fas fa-check-circle mr-1"></i>';
                            break;
                        case 'inactive':
                            statusBadgeClass = 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400';
                            statusIcon = '<i class="fas fa-times-circle mr-1"></i>';
                            break;
                    }
                    
                    // Format status name
                    let statusName = '';
                    switch (subject.status) {
                        case 'active':
                            statusName = 'Activa';
                            break;
                        case 'inactive':
                            statusName = 'Inactiva';
                            break;
                    }
                    
                    // Color mapping based on subject color
                    let colorClass;
                    switch (subject.color) {
                        case 'blue': colorClass = 'from-blue-500 to-indigo-600'; break;
                        case 'red': colorClass = 'from-red-500 to-pink-600'; break;
                        case 'green': colorClass = 'from-green-500 to-emerald-600'; break;
                        case 'yellow': colorClass = 'from-yellow-500 to-amber-600'; break;
                        case 'purple': colorClass = 'from-purple-500 to-violet-600'; break;
                        case 'orange': colorClass = 'from-orange-500 to-amber-600'; break;
                        case 'pink': colorClass = 'from-pink-500 to-rose-600'; break;
                        case 'indigo': colorClass = 'from-indigo-500 to-blue-600'; break;
                        case 'teal': colorClass = 'from-teal-500 to-cyan-600'; break;
                        default: colorClass = 'from-primary-500 to-primary-600';
                    }
                    
                    // Grade badges
                    const gradeBadges = subject.grades.map(grade => {
                        return `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 mr-1 mb-1">${grade}° Grado</span>`;
                    }).join('');
                    
                    card.innerHTML = `
                        <div class="bg-gradient-to-r ${colorClass} p-4 text-white">
                            <div class="flex justify-between items-start">
                                <h3 class="text-lg font-semibold">${subject.name}</h3>
                                <span class="px-2 py-0.5 rounded-full text-xs font-medium ${statusBadgeClass}">
                                    ${statusIcon} ${statusName}
                                </span>
                            </div>
                            <p class="text-white/80 text-sm mt-1">${subject.code}</p>
                        </div>
                        <div class="p-4">
                            <div class="mb-3">
                                <div class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Profesor</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400 flex items-center">
                                    <i class="fas fa-chalkboard-teacher text-gray-400 dark:text-gray-500 mr-2"></i> ${subject.teacher}
                                </div>
                            </div>
                           <div class="mb-3">
                                <div class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Horario</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400 flex items-center">
                                    <i class="fas fa-clock text-gray-400 dark:text-gray-500 mr-2"></i> ${subject.schedule}
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Grados</div>
                                <div class="flex flex-wrap mt-1">
                                    ${gradeBadges}
                                </div>
                            </div>
                            <div class="flex justify-end space-x-2 mt-4">
                                <button class="text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300" onclick="alert('Editar materia: ${subject.name}')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300" onclick="showSection('grades-section')">
                                    <i class="fas fa-star"></i>
                                </button>
                                <button class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300" onclick="alert('Eliminar materia: ${subject.name}')">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                    `;
                    
                    container.appendChild(card);
                });
                
                // Update subject counts
                document.getElementById('subjects-showing-count').textContent = Math.min(filteredSubjects.length, subjectsPerPage);
                document.getElementById('subjects-total-count').textContent = filteredSubjects.length;
                
            }, 500);
        }

        function updateSubjectsPagination() {
            const totalPages = Math.ceil(filteredSubjects.length / subjectsPerPage);
            const pageNumbersContainer = document.getElementById('subjects-page-numbers');
            const prevButton = document.getElementById('subjects-prev-page');
            const nextButton = document.getElementById('subjects-next-page');
            
            // Update button states
            prevButton.disabled = currentSubjectsPage === 1;
            nextButton.disabled = currentSubjectsPage === totalPages || totalPages === 0;
            
            // Clear page numbers
            pageNumbersContainer.innerHTML = '';
            
            // Add page numbers
            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement('button');
                pageButton.classList.add('w-8', 'h-8', 'rounded-md', 'flex', 'items-center', 'justify-center', 'text-sm');
                
                if (i === currentSubjectsPage) {
                    pageButton.classList.add('bg-primary-500', 'text-white');
                } else {
                    pageButton.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300', 'hover:bg-gray-200', 'dark:hover:bg-gray-600');
                }
                
                pageButton.textContent = i;
                pageButton.addEventListener('click', () => {
                    currentSubjectsPage = i;
                    loadSubjects();
                });
                
                pageNumbersContainer.appendChild(pageButton);
            }
        }

        // Grades Management Functions
        function loadGrades() {
            const tableBody = document.getElementById('grades-table-body');
            const loadingElement = document.getElementById('grades-loading');
            const emptyElement = document.getElementById('grades-empty');
            
            // Show loading
            tableBody.innerHTML = '';
            loadingElement.classList.remove('hidden');
            emptyElement.classList.add('hidden');
            
            // Apply filters
            const searchQuery = document.getElementById('student-grade-search').value.toLowerCase();
            const gradeFilter = document.getElementById('grade-level-filter').value;
            const subjectFilter = document.getElementById('subject-grade-filter').value;
            
            // Filter grades based on student name search
            filteredGrades = mockGrades.filter(gradeEntry => {
                const nameMatch = gradeEntry.studentName.toLowerCase().includes(searchQuery);
                // Note: In a real implementation, would also check grade level and match subjects
                return nameMatch;
            });
            
            // Simulate loading delay
            setTimeout(() => {
                loadingElement.classList.add('hidden');
                
                if (filteredGrades.length === 0) {
                    emptyElement.classList.remove('hidden');
                    return;
                }
                
                // Render grades table
                filteredGrades.forEach(gradeEntry => {
                    const row = document.createElement('tr');
                    row.className = 'bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150';
                    
                    // Calculate average
                    const grades = gradeEntry.grades;
                    const average = (grades.math + grades.spanish + grades.science + grades.history + grades.english) / 5;
                    
                    // Function to get color class based on grade
                    function getGradeColorClass(grade) {
                        if (grade >= 9.5) return 'text-blue-600 dark:text-blue-400 font-semibold';
                        if (grade >= 8.0) return 'text-green-600 dark:text-green-400 font-semibold';
                        if (grade >= 6.0) return 'text-yellow-600 dark:text-yellow-400 font-semibold';
                        return 'text-red-600 dark:text-red-400 font-semibold';
                    }
                    
                    // Function to add trends
                    function getTrendIndicator(value) {
                        // In a real app, this would compare with previous period
                        // For demo purposes, we'll randomize it
                        const trends = ['up', 'down', 'neutral'];
                        const trend = trends[Math.floor(Math.random() * trends.length)];
                        
                        if (trend === 'up') {
                            return `<span class="trend-indicator trend-up"><i class="fas fa-arrow-up"></i></span>`;
                        } else if (trend === 'down') {
                            return `<span class="trend-indicator trend-down"><i class="fas fa-arrow-down"></i></span>`;
                        } else {
                            return `<span class="trend-indicator trend-neutral"><i class="fas fa-minus"></i></span>`;
                        }
                    }
                    
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap student-name">
                            <div class="flex items-center">
                                <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center">
                                    <span class="font-medium text-gray-600 dark:text-gray-300">${gradeEntry.studentName.split(' ')[0].charAt(0)}${gradeEntry.studentName.split(' ')[1].charAt(0)}</span>
                                </div>
                                <div class="ml-4">
                                    <div class="text-sm font-medium text-gray-900 dark:text-white">${gradeEntry.studentName}</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-center grade-cell" onclick="editGrade(${gradeEntry.studentId}, 'math', '${gradeEntry.studentName}', 'Matemáticas', ${grades.math})">
                            <div class="text-sm ${getGradeColorClass(grades.math)}">${grades.math.toFixed(1)} ${getTrendIndicator()}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-center grade-cell" onclick="editGrade(${gradeEntry.studentId}, 'spanish', '${gradeEntry.studentName}', 'Español', ${grades.spanish})">
                            <div class="text-sm ${getGradeColorClass(grades.spanish)}">${grades.spanish.toFixed(1)} ${getTrendIndicator()}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-center grade-cell" onclick="editGrade(${gradeEntry.studentId}, 'science', '${gradeEntry.studentName}', 'Ciencias', ${grades.science})">
                            <div class="text-sm ${getGradeColorClass(grades.science)}">${grades.science.toFixed(1)} ${getTrendIndicator()}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-center grade-cell" onclick="editGrade(${gradeEntry.studentId}, 'history', '${gradeEntry.studentName}', 'Historia', ${grades.history})">
                            <div class="text-sm ${getGradeColorClass(grades.history)}">${grades.history.toFixed(1)} ${getTrendIndicator()}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-center grade-cell" onclick="editGrade(${gradeEntry.studentId}, 'english', '${gradeEntry.studentName}', 'Inglés', ${grades.english})">
                            <div class="text-sm ${getGradeColorClass(grades.english)}">${grades.english.toFixed(1)} ${getTrendIndicator()}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-center">
                            <div class="text-sm ${getGradeColorClass(average)} font-bold">${average.toFixed(1)} ${getTrendIndicator()}</div>
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                });
                
            }, 500);
        }

        // Function to edit grade (called from grade cell click)
        function editGrade(studentId, subjectId, studentName, subjectName, currentGrade) {
            // Set modal values
            document.getElementById('student-id').value = studentId;
            document.getElementById('subject-id').value = subjectId;
            document.getElementById('grade-student-name').textContent = studentName;
            document.getElementById('grade-subject-name').textContent = subjectName;
            document.getElementById('grade-value').value = currentGrade;
            
            // Show modal
            document.getElementById('grade-modal').classList.remove('hidden');
        }

        // User form handling
        function showUserModal(isEditing = false) {
            const modal = document.getElementById('user-modal');
            const modalTitle = document.getElementById('modal-title');
            const passwordFields = document.getElementById('password-fields');
            
            // Set modal title
            modalTitle.textContent = isEditing ? 'Editar Usuario' : 'Agregar Nuevo Usuario';
            
            // Show/hide password fields
            passwordFields.style.display = isEditing ? 'none' : 'block';
            
            // Make password fields required based on operation
            document.getElementById('password').required = !isEditing;
            document.getElementById('confirm-password').required = !isEditing;
            
            // Show modal
            modal.classList.remove('hidden');
        }

        function editUser(userId) {
            // Find user by id
            const user = mockUsers.find(u => u.id === userId);
            if (!user) return;
            
            // Set form values
            document.getElementById('user-id').value = user.id;
            document.getElementById('first-name').value = user.firstName;
            document.getElementById('last-name').value = user.lastName;
            document.getElementById('email').value = user.email;
            document.getElementById('role').value = user.role;
            document.getElementById('status').value = user.status;
            
            // Show modal
            showUserModal(true);
        }

        function showDeleteModal(userId) {
            // Find user by id
            const user = mockUsers.find(u => u.id === userId);
            if (!user) return;
            
            // Set user info
            document.getElementById('delete-user-name').textContent = `${user.firstName} ${user.lastName}`;
            
            // Store user id for deletion
            document.getElementById('confirm-delete').dataset.userId = userId;
            
            // Show modal
            document.getElementById('delete-modal').classList.remove('hidden');
        }

        // Event listeners for all sections
        document.addEventListener('DOMContentLoaded', () => {
            setCurrentDate();
            initializeCharts();
            
            // Event listeners for pagination
            // Users section
            document.getElementById('users-prev-page').addEventListener('click', () => {
                if (currentUsersPage > 1) {
                    currentUsersPage--;
                    loadUsers();
                }
            });
            
            document.getElementById('users-next-page').addEventListener('click', () => {
                const totalPages = Math.ceil(filteredUsers.length / usersPerPage);
                if (currentUsersPage < totalPages) {
                    currentUsersPage++;
                    loadUsers();
                }
            });
            
            // Students section
            document.getElementById('students-prev-page').addEventListener('click', () => {
                if (currentStudentsPage > 1) {
                    currentStudentsPage--;
                    loadStudents();
                }
            });
            
            document.getElementById('students-next-page').addEventListener('click', () => {
                const totalPages = Math.ceil(filteredStudents.length / studentsPerPage);
                if (currentStudentsPage < totalPages) {
                    currentStudentsPage++;
                    loadStudents();
                }
            });
            
            // Teachers section
            document.getElementById('teachers-prev-page').addEventListener('click', () => {
                if (currentTeachersPage > 1) {
                    currentTeachersPage--;
                    loadTeachers();
                }
            });
            
            document.getElementById('teachers-next-page').addEventListener('click', () => {
                const totalPages = Math.ceil(filteredTeachers.length / teachersPerPage);
                if (currentTeachersPage < totalPages) {
                    currentTeachersPage++;
                    loadTeachers();
                }
            });
            
            // Subjects section
            document.getElementById('subjects-prev-page').addEventListener('click', () => {
                if (currentSubjectsPage > 1) {
                    currentSubjectsPage--;
                    loadSubjects();
                }
            });
            
            document.getElementById('subjects-next-page').addEventListener('click', () => {
                const totalPages = Math.ceil(filteredSubjects.length / subjectsPerPage);
                if (currentSubjectsPage < totalPages) {
                    currentSubjectsPage++;
                    loadSubjects();
                }
            });
            
            // Search, filters and reset for each section
            // Users section
            document.getElementById('user-search').addEventListener('input', () => {
                currentUsersPage = 1;
                loadUsers();
            });
            
            document.getElementById('role-filter').addEventListener('change', () => {
                currentUsersPage = 1;
                loadUsers();
            });
            
            document.getElementById('status-filter').addEventListener('change', () => {
                currentUsersPage = 1;
                loadUsers();
            });
            
            document.getElementById('reset-filters').addEventListener('click', () => {
                document.getElementById('user-search').value = '';
                document.getElementById('role-filter').value = 'all';
                document.getElementById('status-filter').value = 'all';
                currentUsersPage = 1;
                loadUsers();
            });
            
            // Students section
            document.getElementById('student-search').addEventListener('input', () => {
                currentStudentsPage = 1;
                loadStudents();
            });
            
            document.getElementById('grade-filter').addEventListener('change', () => {
                currentStudentsPage = 1;
                loadStudents();
            });
            
            document.getElementById('status-student-filter').addEventListener('change', () => {
                currentStudentsPage = 1;
                loadStudents();
            });
            
            document.getElementById('reset-student-filters').addEventListener('click', () => {
                document.getElementById('student-search').value = '';
                document.getElementById('grade-filter').value = 'all';
                document.getElementById('status-student-filter').value = 'all';
                currentStudentsPage = 1;
                loadStudents();
            });
            
            // Teachers section
            document.getElementById('teacher-search').addEventListener('input', () => {
                currentTeachersPage = 1;
                loadTeachers();
            });
            
            document.getElementById('subject-filter').addEventListener('change', () => {
                currentTeachersPage = 1;
                loadTeachers();
            });
            
            document.getElementById('status-teacher-filter').addEventListener('change', () => {
                currentTeachersPage = 1;
                loadTeachers();
            });
            
            document.getElementById('reset-teacher-filters').addEventListener('click', () => {
                document.getElementById('teacher-search').value = '';
                document.getElementById('subject-filter').value = 'all';
                document.getElementById('status-teacher-filter').value = 'all';
                currentTeachersPage = 1;
                loadTeachers();
            });
            
            // Subjects section
            document.getElementById('subject-search').addEventListener('input', () => {
                currentSubjectsPage = 1;
                loadSubjects();
            });
            
            document.getElementById('grade-subject-filter').addEventListener('change', () => {
                currentSubjectsPage = 1;
                loadSubjects();
            });
            
            document.getElementById('status-subject-filter').addEventListener('change', () => {
                currentSubjectsPage = 1;
                loadSubjects();
            });
            
            document.getElementById('reset-subject-filters').addEventListener('click', () => {
                document.getElementById('subject-search').value = '';
                document.getElementById('grade-subject-filter').value = 'all';
                document.getElementById('status-subject-filter').value = 'all';
                currentSubjectsPage = 1;
                loadSubjects();
            });
            
            // Grades section
            document.getElementById('student-grade-search').addEventListener('input', () => {
                loadGrades();
            });
            
            document.getElementById('grade-level-filter').addEventListener('change', () => {
                loadGrades();
            });
            
            document.getElementById('subject-grade-filter').addEventListener('change', () => {
                loadGrades();
            });
            
            document.getElementById('period-filter').addEventListener('change', () => {
                loadGrades();
            });
            
            // Export grades button
            document.getElementById('export-grades-btn').addEventListener('click', () => {
                alert('En una implementación real, aquí se exportarían las calificaciones a Excel o PDF.');
            });
            
            // Add user button
            document.getElementById('add-user-btn').addEventListener('click', () => {
                // Reset form
                document.getElementById('user-form').reset();
                document.getElementById('user-id').value = '';
                
                showUserModal(false);
            });
            
            // Add student button
            document.getElementById('add-student-btn').addEventListener('click', () => {
                alert('En una implementación real, aquí se mostraría un formulario para agregar un nuevo estudiante.');
            });
            
            // Add teacher button
            document.getElementById('add-teacher-btn').addEventListener('click', () => {
                alert('En una implementación real, aquí se mostraría un formulario para agregar un nuevo profesor.');
            });
            
            // Add subject button
            document.getElementById('add-subject-btn').addEventListener('click', () => {
                alert('En una implementación real, aquí se mostraría un formulario para agregar una nueva materia.');
            });
            
            // Add grade button
            document.getElementById('add-grade-btn').addEventListener('click', () => {
                alert('En una implementación real, aquí se mostraría un formulario para agregar nuevas calificaciones.');
            });
            
            // Grade modal
            document.getElementById('grade-form').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const studentId = parseInt(document.getElementById('student-id').value);
                const subjectId = document.getElementById('subject-id').value;
                const gradeValue = parseFloat(document.getElementById('grade-value').value);
                
                // Update the grade in the mock data
                const student = mockGrades.find(s => s.studentId === studentId);
                if (student) {
                    student.grades[subjectId] = gradeValue;
                    
                    // Close modal and reload grades
                    document.getElementById('grade-modal').classList.add('hidden');
                    loadGrades();
                    
                    // Show success message
                    alert('Calificación actualizada correctamente');
                }
            });
            
            document.getElementById('cancel-grade-form').addEventListener('click', () => {
                document.getElementById('grade-modal').classList.add('hidden');
            });
            
            document.getElementById('close-grade-modal').addEventListener('click', () => {
                document.getElementById('grade-modal').classList.add('hidden');
            });
            
            // Close modal
            document.getElementById('close-modal').addEventListener('click', () => {
                document.getElementById('user-modal').classList.add('hidden');
            });
            
            document.getElementById('cancel-user-form').addEventListener('click', () => {
                document.getElementById('user-modal').classList.add('hidden');
            });
            
            // Submit user form
            document.getElementById('user-form').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const userId = document.getElementById('user-id').value;
                const firstName = document.getElementById('first-name').value;
                const lastName = document.getElementById('last-name').value;
                const email = document.getElementById('email').value;
                const role = document.getElementById('role').value;
                const status = document.getElementById('status').value;
                
                // Validate form data (simplified)
                if (!firstName || !lastName || !email || !role || !status) {
                    alert('Todos los campos son obligatorios');
                    return;
                }
                
                // Check if passwords match for new users
                if (!userId) {
                    const password = document.getElementById('password').value;
                    const confirmPassword = document.getElementById('confirm-password').value;
                    
                    if (password !== confirmPassword) {
                        alert('Las contraseñas no coinciden');
                        return;
                    }
                }
                
                // Create new user or update existing one
                if (userId) {
                    // Update existing user
                    const userIndex = mockUsers.findIndex(u => u.id.toString() === userId);
                    if (userIndex !== -1) {
                        mockUsers[userIndex] = {
                            ...mockUsers[userIndex],
                            firstName,
                            lastName,
                            email,
                            role,
                            status
                        };
                        alert('Usuario actualizado correctamente');
                    }
                } else {
                    // Create new user
                    const newId = Math.max(...mockUsers.map(u => u.id)) + 1;
                    mockUsers.push({
                        id: newId,
                        firstName,
                        lastName,
                        email,
                        role,
                        status,
                        lastLogin: 'Nunca'
                    });
                    alert('Usuario creado correctamente');
                }
                
                // Close modal and reload users
                document.getElementById('user-modal').classList.add('hidden');
                currentUsersPage = 1;
                loadUsers();
            });
            
            // Delete confirmation
            document.getElementById('confirm-delete').addEventListener('click', () => {
                const userId = parseInt(document.getElementById('confirm-delete').dataset.userId);
                
                // Remove user from mock data
                const userIndex = mockUsers.findIndex(u => u.id === userId);
                if (userIndex !== -1) {
                    mockUsers.splice(userIndex, 1);
                    alert('Usuario eliminado correctamente');
                }
                
                // Close modal and reload users
                document.getElementById('delete-modal').classList.add('hidden');
                currentUsersPage = 1;
                loadUsers();
            });
            
            // Cancel delete
            document.getElementById('cancel-delete').addEventListener('click', () => {
                document.getElementById('delete-modal').classList.add('hidden');
            });
            
            document.getElementById('delete-modal-overlay').addEventListener('click', () => {
                document.getElementById('delete-modal').classList.add('hidden');
            });
            
            document.getElementById('user-modal-overlay').addEventListener('click', () => {
                document.getElementById('user-modal').classList.add('hidden');
            });
            
            // Setup student-select for comparative section if it exists
            if (document.getElementById('student-select')) {
                document.getElementById('student-select').addEventListener('change', function() {
                    if (this.value !== 'all') {
                         // Simulate loading a student's data
                        const studentName = this.options[this.selectedIndex].text;
                        document.querySelector('.comparative-section .w-20.h-20').textContent = 
                            studentName.split(' ').map(word => word[0]).join('');
                        document.querySelector('.comparative-section h3.text-xl').textContent = studentName;
                    }
                });
            }
            
            // Show dashboard by default
            showSection('dashboard-section');
        });
    </script>
</body>
</html>