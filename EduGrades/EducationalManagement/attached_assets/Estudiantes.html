<!DOCTYPE html>
<html lang="es" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduGrade - Student Portal</title>
    
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            800: '#5b21b6',
                            900: '#4c1d95',
                            950: '#2e1065',
                        },
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-in': 'slideIn 0.5s ease-out',
                        'bounce-slow': 'bounce 3s ease-in-out infinite',
                        'pulse-slow': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideIn: {
                            '0%': { transform: 'translateY(10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                    },
                },
            },
        }
    </script>
    
    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chart.js/3.7.0/chart.min.js"></script>
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Marked.js for Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
            100% { transform: translateY(0px); }
        }
        
        .float-animation { 
            animation: float 3s ease-in-out infinite; 
        }
        
        /* Progress bar animation */
        @keyframes progress {
            0% { width: 0%; }
            100% { width: 100%; }
        }
        
        .progress-animation { 
            animation: progress 1.5s ease-out; 
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(99, 102, 241, 0.5);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(99, 102, 241, 0.7);
        }
        
        .dark ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .dark ::-webkit-scrollbar-thumb {
            background: rgba(139, 92, 246, 0.5);
        }
        
        .dark ::-webkit-scrollbar-thumb:hover {
            background: rgba(139, 92, 246, 0.7);
        }
        
        /* Tooltip styles */
        #chartjs-tooltip {
            background-color: rgba(255, 255, 255, 0.95);
            color: #1f2937;
            border-radius: 8px;
            padding: 8px 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .dark #chartjs-tooltip {
            background-color: rgba(31, 41, 55, 0.95);
            color: #f3f4f6;
        }

        /* AI Assistant chat styles */
        .ai-message, .user-message {
            max-width: 85%;
            margin-bottom: 10px;
            padding: 10px 12px;
            border-radius: 12px;
            position: relative;
            word-wrap: break-word;
        }

        .ai-message {
            background-color: #f3f4f6;
            border-top-left-radius: 2px;
            align-self: flex-start;
        }

        .dark .ai-message {
            background-color: #374151;
        }

        .user-message {
            background-color: #8b5cf6;
            color: white;
            border-top-right-radius: 2px;
            align-self: flex-end;
        }

        /* Chat bubble tails */
        .ai-message::before {
            content: "";
            position: absolute;
            top: 0;
            left: -10px;
            width: 10px;
            height: 10px;
            background-color: #f3f4f6;
            clip-path: polygon(100% 0, 100% 100%, 0 0);
        }

        .dark .ai-message::before {
            background-color: #374151;
        }

        .user-message::before {
            content: "";
            position: absolute;
            top: 0;
            right: -10px;
            width: 10px;
            height: 10px;
            background-color: #8b5cf6;
            clip-path: polygon(0 0, 100% 0, 0 100%);
        }

        /* Animation for typing indicator */
        .typing-indicator {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }

        .typing-indicator span {
            height: 8px;
            width: 8px;
            margin: 0 1px;
            background-color: #8b5cf6;
            display: block;
            border-radius: 50%;
            opacity: 0.4;
        }

        .typing-indicator span:nth-of-type(1) {
            animation: 1s blink infinite 0.3333s;
        }

        .typing-indicator span:nth-of-type(2) {
            animation: 1s blink infinite 0.6666s;
        }

        .typing-indicator span:nth-of-type(3) {
            animation: 1s blink infinite 0.9999s;
        }

        @keyframes blink {
            50% {
                opacity: 1;
            }
        }

        /* Language switcher */
        .lang-switch-enter {
            animation: popIn 0.3s ease-out forwards;
        }

        @keyframes popIn {
            0% {
                transform: scale(0.9);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Markdown content styling in AI responses */
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            font-weight: bold;
            margin-top: 16px;
            margin-bottom: 8px;
        }

        .markdown-content h1 {
            font-size: 1.5rem;
        }

        .markdown-content h2 {
            font-size: 1.25rem;
        }

        .markdown-content h3 {
            font-size: 1.125rem;
        }

        .markdown-content ul, .markdown-content ol {
            margin-left: 20px;
            margin-bottom: 12px;
        }

        .markdown-content ul {
            list-style-type: disc;
        }

        .markdown-content ol {
            list-style-type: decimal;
        }

        .markdown-content p {
            margin-bottom: 12px;
        }

        .markdown-content code {
            background-color: rgba(0, 0, 0, 0.05);
            padding: 2px 4px;
            border-radius: 4px;
            font-family: monospace;
        }

        .dark .markdown-content code {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .markdown-content pre {
            background-color: rgba(0, 0, 0, 0.05);
            padding: 12px;
            border-radius: 8px;
            overflow-x: auto;
            margin-bottom: 12px;
        }

        .dark .markdown-content pre {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Badge notification animation */
        @keyframes pulse-badge {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .pulse-badge {
            animation: pulse-badge 2s infinite;
        }

        /* Schedule table styling */
        .schedule-cell {
            border-radius: 0.5rem;
            transition: all 0.2s;
        }
        
        .schedule-cell:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .dark .schedule-cell:hover {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }
        
        /* Grade pill animation */
        @keyframes scoreIn {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .grade-pill {
            animation: scoreIn 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="antialiased bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
    <!-- Language switcher dropdown -->
    <div id="lang-switcher" class="fixed top-4 right-20 z-50 hidden lang-switch-enter">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 w-28">
            <button id="lang-es" class="w-full px-4 py-2 text-sm text-left text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg flex items-center language-option" data-lang="es">
                <span class="fi fi-es mr-2"></span>Español
            </button>
            <button id="lang-en" class="w-full px-4 py-2 text-sm text-left text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-b-lg flex items-center language-option" data-lang="en">
                <span class="fi fi-us mr-2"></span>English
            </button>
        </div>
    </div>

    <!-- Overlay for mobile sidebar -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-40 hidden md:hidden transition-opacity duration-300" onclick="toggleSidebar()"></div>

    <!-- Navbar -->
    <nav class="bg-gradient-to-r from-primary-600 to-purple-500 dark:from-primary-900 dark:to-purple-900 text-white fixed w-full top-0 z-30 shadow-md transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <button id="sidebar-toggle" class="mr-3 text-xl focus:outline-none md:hidden" aria-label="Toggle Menu" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="flex items-center">
                        <i class="fas fa-graduation-cap mr-3 text-xl"></i>
                        <h1 class="text-xl font-bold" data-i18n="brand">EduGrade</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- Notifications -->
                    <div class="relative">
                        <button id="notifications-button" class="text-white focus:outline-none relative" aria-label="Notifications">
                            <i class="fas fa-bell text-lg"></i>
                            <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center pulse-badge">3</span>
                        </button>
                        <div id="notifications-menu" class="hidden origin-top-right absolute right-0 mt-2 w-80 rounded-lg shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 py-1 focus:outline-none z-50 transition-all duration-200 transform opacity-0 scale-95" role="menu" aria-orientation="vertical" aria-labelledby="notifications-button" tabindex="-1">
                            <div class="px-4 py-2 border-b border-gray-100 dark:border-gray-700">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-200" data-i18n="notifications">Notifications</h3>
                                    <span class="bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 text-xs font-medium rounded-full px-2 py-0.5" data-i18n="new-count">3 new</span>
                                </div>
                            </div>
                            
                            <!-- Notification items -->
                            <div class="max-h-72 overflow-y-auto">
                                <div class="px-4 py-3 border-l-4 border-primary-500 dark:border-primary-400 bg-primary-50 dark:bg-primary-900/20 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150">
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-9 h-9 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center">
                                            <i class="fas fa-star text-primary-600 dark:text-primary-400"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-700 dark:text-gray-200" data-i18n="new-grade">New grade in Mathematics</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">9.5/10</p>
                                            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1" data-i18n="time-ago-1">2 hours ago</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="px-4 py-3 border-l-4 border-primary-500 dark:border-primary-400 bg-primary-50 dark:bg-primary-900/20 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150">
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-9 h-9 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center">
                                            <i class="fas fa-exclamation-triangle text-yellow-600 dark:text-yellow-400"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-700 dark:text-gray-200" data-i18n="exam-reminder">Exam reminder: History</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">Oct 30, 2023</p>
                                            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1" data-i18n="time-ago-2">Yesterday</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="px-4 py-3 border-l-4 border-primary-500 dark:border-primary-400 bg-primary-50 dark:bg-primary-900/20 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150">
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center">
                                            <i class="fas fa-book text-green-600 dark:text-green-400"></i>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-gray-700 dark:text-gray-200" data-i18n="new-materials">New study materials available</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400" data-i18n="new-files">3 new files for Science</p>
                                            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1" data-i18n="time-ago-3">2 days ago</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Footer -->
                            <div class="px-4 py-2 border-t border-gray-100 dark:border-gray-700 text-center">
                                <button class="text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium transition-colors duration-200" data-i18n="mark-all-read">
                                    Mark all as read
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Language selector -->
                    <button id="language-toggle" class="text-white focus:outline-none" aria-label="Change Language">
                        <i class="fas fa-globe text-lg"></i>
                    </button>
                    
                    <!-- Dark mode toggle -->
                    <button id="theme-toggle" class="text-white focus:outline-none" aria-label="Toggle Dark Mode">
                        <i class="fas fa-moon text-lg dark:hidden"></i>
                        <i class="fas fa-sun hidden text-lg dark:block"></i>
                    </button>

                    <!-- User menu -->
                    <div class="relative">
                        <button id="user-menu-button" class="flex items-center text-sm text-white focus:outline-none" aria-expanded="false" aria-haspopup="true">
                            <span class="mr-2 hidden sm:block student-name">María González</span>
                            <div class="h-8 w-8 rounded-full bg-primary-400 dark:bg-primary-800 flex items-center justify-center">
                                <i class="fas fa-user"></i>
                            </div>
                        </button>
                        <div id="user-menu" class="hidden origin-top-right absolute right-0 mt-2 w-48 rounded-lg shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 py-1 focus:outline-none z-10 transition-all duration-200 transform opacity-0 scale-95" role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-primary-100 dark:hover:bg-primary-800" role="menuitem">
                                <i class="fas fa-user-circle mr-2"></i> <span data-i18n="profile">My Profile</span>
                            </a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-primary-100 dark:hover:bg-primary-800" role="menuitem">
                                <i class="fas fa-cog mr-2"></i> <span data-i18n="settings">Settings</span>
                            </a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-primary-100 dark:hover:bg-primary-800" role="menuitem">
                                <i class="fas fa-sign-out-alt mr-2"></i> <span data-i18n="logout">Logout</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Layout principal -->
    <div class="flex pt-16">
        <!-- Sidebar -->
        <aside id="sidebar" class="fixed left-0 transform -translate-x-full md:translate-x-0 h-full bg-white dark:bg-gray-800 shadow-lg transition-transform duration-300 ease-in-out z-20 w-64 overflow-y-auto">
            <div class="p-6">
                <!-- Student info card -->
                <div class="bg-primary-50 dark:bg-primary-900/30 rounded-xl p-4 mb-6 border border-primary-100 dark:border-primary-800">
                    <div class="flex items-center mb-3">
                        <div class="w-12 h-12 bg-primary-100 dark:bg-primary-800/50 rounded-full flex items-center justify-center text-primary-600 dark:text-primary-300">
                            <i class="fas fa-user-graduate text-xl"></i>
                        </div>
                        <div class="ml-3">
                            <h3 class="font-semibold text-gray-800 dark:text-gray-200 student-name">María González</h3>
                            <p class="text-xs text-gray-500 dark:text-gray-400">ID: EST-2023-089</p>
                        </div>
                    </div>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-3 border border-primary-100 dark:border-primary-800/50">
                        <h4 class="text-sm font-semibold text-primary-700 dark:text-primary-300 mb-1" data-i18n="overall-average">Overall Average</h4>
                        <div class="flex justify-between items-end">
                            <p class="text-3xl font-bold text-primary-600 dark:text-primary-400">8.7</p>
                            <div class="px-2 py-0.5 text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full font-medium">
                                +0.2
                            </div>
                        </div>
                        <div class="mt-2 space-y-1">
                            <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                <div class="bg-primary-500 h-full rounded-full progress-animation" style="width: 87%"></div>
                            </div>
                            <p class="text-xs text-gray-500 dark:text-gray-400" data-i18n="last-calculation">Last calculation: Today</p>
                        </div>
                    </div>
                </div>

                <nav class="space-y-5">
                    <!-- My Learning Section -->
                    <div class="animate-fade-in" style="animation-delay: 0.1s">
                        <h3 class="text-xs uppercase text-gray-500 dark:text-gray-400 font-semibold mb-3 flex items-center">
                            <i class="fas fa-book mr-2"></i> <span data-i18n="my-learning">My Learning</span>
                        </h3>
                        <div class="space-y-1">
                            <a href="#" class="nav-link flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" data-view="dashboard">
                                <i class="fas fa-tachometer-alt mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span data-i18n="dashboard">Dashboard</span>
                            </a>
                            <a href="#" class="nav-link flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" data-view="materias">
                                <i class="fas fa-book-open mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span data-i18n="my-subjects">My Subjects</span>
                            </a>
                            <a href="#" class="nav-link flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" data-view="calificaciones">
                                <i class="fas fa-star mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span data-i18n="my-grades">My Grades</span>
                            </a>
                            <a href="#" class="nav-link flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" data-view="horario">
                                <i class="fas fa-calendar-alt mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span data-i18n="academic-schedule">Academic Schedule</span>
                            </a>
                        </div>
                    </div>

                    <!-- Resources Section -->
                    <div class="animate-fade-in" style="animation-delay: 0.2s">
                        <h3 class="text-xs uppercase text-gray-500 dark:text-gray-400 font-semibold mb-3 flex items-center">
                            <i class="fas fa-toolbox mr-2"></i> <span data-i18n="resources">Resources</span>
                        </h3>
                        <div class="space-y-1">
                            <a href="#" class="nav-link flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" data-view="material">
                                <i class="fas fa-file-alt mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span data-i18n="study-material">Study Material</span>
                            </a>
                            <a href="#" class="nav-link flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" data-view="tareas">
                                <i class="fas fa-clipboard-list mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span data-i18n="pending-tasks">Pending Tasks</span>
                                <span class="ml-auto bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-xs font-semibold px-2 py-0.5 rounded-full">3</span>
                            </a>
                            <a href="#" class="nav-link flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" data-view="ai-tutor">
                                <i class="fas fa-robot mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span data-i18n="ai-tutor">AI Tutor</span>
                                <span class="ml-auto bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-xs font-semibold px-2 py-0.5 rounded-full" data-i18n="new">NEW</span>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Communication Section -->
                    <div class="animate-fade-in" style="animation-delay: 0.3s">
                        <h3 class="text-xs uppercase text-gray-500 dark:text-gray-400 font-semibold mb-3 flex items-center">
                            <i class="fas fa-comments mr-2"></i> <span data-i18n="communication">Communication</span>
                        </h3>
                        <div class="space-y-1">
                            <a href="#" class="nav-link flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" data-view="messages">
                                <i class="fas fa-envelope mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span data-i18n="messages">Messages</span>
                                <span class="ml-auto bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 text-xs font-semibold px-2 py-0.5 rounded-full">2</span>
                            </a>
                            <a href="#" class="nav-link flex items-center py-2 px-3 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/30 rounded-lg font-medium transition-colors duration-200 group" data-view="forums">
                                <i class="fas fa-users mr-3 text-primary-500 dark:text-primary-400 group-hover:text-primary-600 dark:group-hover:text-primary-300 transition-colors duration-200"></i>
                                <span data-i18n="forums">Forums</span>
                            </a>
                        </div>
                    </div>
                </nav>

                <!-- Help Card -->
                <div class="mt-8 p-4 bg-gradient-to-br from-blue-100 to-primary-100 dark:from-blue-900/40 dark:to-primary-900/40 rounded-xl border border-blue-200 dark:border-blue-800/50">
                    <h4 class="font-medium text-blue-800 dark:text-blue-300 flex items-center">
                        <i class="fas fa-question-circle mr-2"></i> <span data-i18n="help-center">Help Center</span>
                    </h4>
                    <p class="text-sm text-gray-600 dark:text-gray-300 mt-1" data-i18n="need-help">Need help with your subjects or assignments?</p>
                    <button class="mt-3 text-sm w-full py-1.5 px-3 bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-300 rounded-lg border border-blue-300 dark:border-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors duration-200" data-i18n="request-tutoring">
                        Request Tutoring
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main content -->
        <main class="flex-1 p-6 md:ml-64 transition-all duration-300 min-h-screen">
            <!-- Dashboard View -->
            <div id="dashboard-view" class="view-content">
                <!-- Welcome section -->
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 animate-fade-in">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="my-dashboard">My Dashboard</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1"><span data-i18n="welcome">Welcome</span>, <span class="student-name">María</span>. <span data-i18n="dashboard-summary">Here's a summary of your academic performance.</span></p>
                    </div>
                    <div class="mt-4 sm:mt-0">
                        <div class="flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-300">
                            <i class="fas fa-calendar-alt text-primary-500 dark:text-primary-400"></i>
                            <span id="current-date"></span>
                        </div>
                    </div>
                </div>

                <!-- Stats cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <!-- Calificación Más Alta -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300 animate-slide-in" style="animation-delay: 0.1s">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center float-animation">
                                <i class="fas fa-award text-yellow-500 dark:text-yellow-400 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200" data-i18n="highest-grade">Highest Grade</h3>
                                <div class="flex items-end">
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white">9.5</p>
                                    <span class="ml-2 text-sm font-medium text-gray-600 dark:text-gray-400" data-i18n="math">Mathematics</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700">
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-500 dark:text-gray-400" data-i18n="course-average">Course average</span>
                                <span class="font-medium text-gray-700 dark:text-gray-200">8.7</span>
                            </div>
                        </div>
                    </div>

                    <!-- Materias Actuales -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300 animate-slide-in" style="animation-delay: 0.2s">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center float-animation">
                                <i class="fas fa-chalkboard text-purple-500 dark:text-purple-400 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200" data-i18n="current-subjects">Current Subjects</h3>
                                <div class="flex items-end">
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white">5</p>
                                    <span class="ml-2 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-full px-2 py-0.5" data-i18n="current-semester">
                                        Current semester
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700">
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-500 dark:text-gray-400" data-i18n="completed">Completed</span>
                                <span class="font-medium text-gray-700 dark:text-gray-200">60%</span>
                            </div>
                            <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full mt-2 overflow-hidden">
                                <div class="bg-purple-500 h-full rounded-full" style="width: 60%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Tareas Pendientes -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300 animate-slide-in" style="animation-delay: 0.3s">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-green-100 dark:bg-green-900/30 flex items-center justify-center float-animation">
                                <i class="fas fa-clipboard-list text-green-500 dark:text-green-400 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200" data-i18n="pending-assignments">Pending Assignments</h3>
                                <div class="flex items-end">
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white">3</p>
                                    <span class="ml-2 text-xs font-medium text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30 rounded-full px-2 py-0.5" data-i18n="this-week">
                                        This week
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700">
                            <button class="w-full py-1.5 text-sm font-medium text-white bg-green-500 hover:bg-green-600 dark:bg-green-600 dark:hover:bg-green-700 rounded-lg transition-colors duration-200" onclick="navigateTo('tareas')" data-i18n="view-assignments">
                                View assignments
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Performance Chart Section -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-6 animate-fade-in">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 flex items-center">
                            <i class="fas fa-chart-bar text-primary-500 dark:text-primary-400 mr-2"></i>
                            <span data-i18n="performance-by-subject">Performance by Subject</span>
                        </h3>
                        <div class="mt-4 sm:mt-0 flex items-center space-x-3">
                            <select id="chart-period" class="text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-1.5 px-3 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400">
                                <option value="current" data-i18n="current-semester-option">Current Semester</option>
                                <option value="previous" data-i18n="previous-semester">Previous Semester</option>
                                <option value="all" data-i18n="all">All</option>
                            </select>
                            <button id="download-chart" class="text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-1.5 px-3 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400">
                                <i class="fas fa-download mr-1"></i> <span data-i18n="export">Export</span>
                            </button>
                        </div>
                    </div>
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <canvas id="performanceChart"></canvas>
                        <!-- Loading overlay for chart -->
                        <div id="chart-loading" class="absolute inset-0 bg-white dark:bg-gray-800 bg-opacity-90 dark:bg-opacity-90 flex items-center justify-center hidden">
                            <div class="flex flex-col items-center">
                                <div class="animate-spin rounded-full h-10 w-10 border-4 border-primary-200 dark:border-primary-800 border-t-primary-500 dark:border-t-primary-400"></div>
                                <p class="mt-3 text-sm text-gray-600 dark:text-gray-300" data-i18n="loading-data">Loading data...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Two Column Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Próximas Evaluaciones -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 animate-fade-in">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 flex items-center mb-4">
                            <i class="fas fa-clipboard-check text-primary-500 dark:text-primary-400 mr-2"></i>
                            <span data-i18n="upcoming-evaluations">Upcoming Evaluations</span>
                        </h3>
                        <div class="overflow-hidden">
                            <ul class="space-y-3">
                                <li class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-100 dark:border-yellow-900/30">
                                    <div class="flex justify-between">
                                        <div>
                                            <h4 class="font-semibold text-gray-800 dark:text-gray-200" data-i18n="math-exam">Mathematics Exam</h4>
                                            <div class="flex items-center mt-1 text-sm text-gray-600 dark:text-gray-400">
                                                <i class="fas fa-calendar-day mr-2"></i>
                                                <span data-i18n="oct-25">October 25</span>
                                            </div>
                                        </div>
                                        <div class="flex items-center">
                                            <span class="px-3 py-1 text-xs font-medium bg-yellow-200 dark:bg-yellow-800 text-yellow-700 dark:text-yellow-300 rounded-full" data-i18n="pending">Pending</span>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div class="text-xs text-gray-600 dark:text-gray-400 mb-1" data-i18n="time-remaining">Time remaining</div>
                                        <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full">
                                            <div class="bg-yellow-500 dark:bg-yellow-600 h-full rounded-full" style="width: 70%"></div>
                                        </div>
                                    </div>
                                </li>
                                
                                <li class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-900/30">
                                    <div class="flex justify-between">
                                        <div>
                                            <h4 class="font-semibold text-gray-800 dark:text-gray-200" data-i18n="history-presentation">History Presentation</h4>
                                            <div class="flex items-center mt-1 text-sm text-gray-600 dark:text-gray-400">
                                                <i class="fas fa-calendar-day mr-2"></i>
                                                <span data-i18n="oct-30">October 30</span>
                                            </div>
                                        </div>
                                        <div class="flex items-center">
                                            <span class="px-3 py-1 text-xs font-medium bg-blue-200 dark:bg-blue-800 text-blue-700 dark:text-blue-300 rounded-full" data-i18n="in-progress">In progress</span>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div class="text-xs text-gray-600 dark:text-gray-400 mb-1" data-i18n="progress">Progress</div>
                                        <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full">
                                            <div class="bg-blue-500 dark:bg-blue-600 h-full rounded-full" style="width: 30%"></div>
                                        </div>
                                    </div>
                                </li>
                                
                                <li class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-100 dark:border-green-900/30">
                                    <div class="flex justify-between">
                                        <div>
                                            <h4 class="font-semibold text-gray-800 dark:text-gray-200" data-i18n="science-project">Science Project</h4>
                                            <div class="flex items-center mt-1 text-sm text-gray-600 dark:text-gray-400">
                                                <i class="fas fa-calendar-day mr-2"></i>
                                                <span data-i18n="nov-5">November 5</span>
                                            </div>
                                        </div>
                                        <div class="flex items-center">
                                            <span class="px-3 py-1 text-xs font-medium bg-green-200 dark:bg-green-800 text-green-700 dark:text-green-300 rounded-full" data-i18n="in-progress">In progress</span>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div class="text-xs text-gray-600 dark:text-gray-400 mb-1" data-i18n="progress">Progress</div>
                                        <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full">
                                            <div class="bg-green-500 dark:bg-green-600 h-full rounded-full" style="width: 45%"></div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <button class="mt-4 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium flex items-center transition-colors duration-200" data-i18n="view-all-evaluations">
                            View all evaluations
                            <i class="fas fa-arrow-right ml-1.5"></i>
                        </button>
                    </div>

                    <!-- Notificaciones Section -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 animate-fade-in">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 flex items-center mb-4">
                            <i class="fas fa-bell text-primary-500 dark:text-primary-400 mr-2"></i>
                            <span data-i18n="notifications">Notifications</span>
                        </h3>
                        <div class="overflow-hidden">
                            <ul class="divide-y divide-gray-100 dark:divide-gray-700">
                                <li class="py-3 flex items-start">
                                    <div class="flex-shrink-0 w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center mt-1">
                                        <i class="fas fa-star text-primary-500 dark:text-primary-400"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-700 dark:text-gray-200" data-i18n="new-math-grade">New grade in Mathematics</p>
                                        <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400">
                                            <span>9.5/10</span>
                                            <span data-i18n="hours-ago">2 hours ago</span>
                                        </div>
                                    </div>
                                </li>
                                <li class="py-3 flex items-start">
                                    <div class="flex-shrink-0 w-8 h-8 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center mt-1">
                                        <i class="fas fa-exclamation-circle text-yellow-500 dark:text-yellow-400"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-700 dark:text-gray-200" data-i18n="reminder-history-exam">Reminder: History exam coming soon</p>
                                        <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400">
                                            <span data-i18n="oct-30">October 30</span>
                                            <span data-i18n="yesterday">Yesterday</span>
                                        </div>
                                    </div>
                                </li>
                                <li class="py-3 flex items-start">
                                    <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mt-1">
                                        <i class="fas fa-book text-green-500 dark:text-green-400"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-700 dark:text-gray-200" data-i18n="study-material-available">Study material available for Science</p>
                                        <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400">
                                            <span data-i18n="new-files">3 new files</span>
                                            <span data-i18n="days-ago">2 days ago</span>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <button class="mt-4 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium flex items-center transition-colors duration-200" data-i18n="view-all-notifications">
                            View all notifications
                            <i class="fas fa-arrow-right ml-1.5"></i>
                        </button>
                    </div>
                </div>
                
                <!-- AI Learning Assistant Card -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-6 animate-fade-in relative overflow-hidden">
                    <div class="absolute -right-10 -top-10 w-40 h-40 bg-primary-100 dark:bg-primary-900/30 rounded-full opacity-50"></div>
                    <div class="absolute -right-5 -bottom-5 w-24 h-24 bg-blue-100 dark:bg-blue-900/30 rounded-full opacity-50"></div>
                    
                    <div class="relative flex flex-col md:flex-row items-center justify-between">
                        <div class="mb-6 md:mb-0 md:pr-6 md:mr-6 md:border-r md:border-gray-200 md:dark:border-gray-700">
                            <div class="flex items-center">
                                <div class="w-16 h-16 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400 mr-4 float-animation">
                                    <i class="fas fa-robot text-3xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-800 dark:text-white" data-i18n="ai-learning-assistant">AI Learning Assistant</h3>
                                    <p class="text-gray-600 dark:text-gray-300 mt-1" data-i18n="ai-learning-description">Get help with any subject, homework, or exam preparation</p>
                                </div>
                            </div>
                        </div>
                        <div class="w-full md:w-auto">
                            <button onclick="navigateTo('ai-tutor')" class="w-full md:w-auto px-6 py-3 bg-gradient-to-r from-primary-600 to-purple-500 hover:from-primary-700 hover:to-purple-600 dark:from-primary-500 dark:to-purple-400 text-white rounded-xl shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center" data-i18n="start-ai-session">
                                <i class="fas fa-bolt mr-2"></i> Start AI Session
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity Card -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-6 animate-fade-in">
                    <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 flex items-center mb-4">
                        <i class="fas fa-history text-primary-500 dark:text-primary-400 mr-2"></i>
                        <span data-i18n="recent-activity">Recent Activity</span>
                    </h3>
                    <div class="overflow-x-auto">
                        <div class="min-w-full">
                            <div class="flex flex-col">
                                <div class="overflow-hidden">
                                    <div class="relative">
                                        <!-- Timeline Line -->
                                        <div class="absolute left-4 top-0 h-full w-0.5 bg-gray-200 dark:bg-gray-700"></div>
                                        
                                        <!-- Timeline Items -->
                                        <div class="space-y-6 relative">
                                            <div class="flex">
                                                <div class="flex-shrink-0 z-10">
                                                    <div class="w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center border-2 border-white dark:border-gray-800">
                                                        <i class="fas fa-check text-green-600 dark:text-green-400 text-sm"></i>
                                                    </div>
                                                </div>
                                                <div class="ml-6">
                                                    <div class="bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3 border border-gray-100 dark:border-gray-700">
                                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="assignment-submitted">Assignment submitted: "Literary Analysis"</p>
                                                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1" data-i18n="assignment-submitted-desc">Successfully submitted for Language class</p>
                                                        <p class="text-xs text-gray-400 dark:text-gray-500 mt-2" data-i18n="today-time">Today, 10:35 AM</p>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="flex">
                                                <div class="flex-shrink-0 z-10">
                                                    <div class="w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center border-2 border-white dark:border-gray-800">
                                                        <i class="fas fa-star text-primary-600 dark:text-primary-400 text-sm"></i>
                                                    </div>
                                                </div>
                                                <div class="ml-6">
                                                    <div class="bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3 border border-gray-100 dark:border-gray-700">
                                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="new-grade-received">New grade received: 9.5</p>
                                                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1" data-i18n="math-partial-exam">Mathematics partial exam</p>
                                                        <p class="text-xs text-gray-400 dark:text-gray-500 mt-2" data-i18n="today-time-2">Today, 08:45 AM</p>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="flex">
                                                <div class="flex-shrink-0 z-10">
                                                    <div class="w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center border-2 border-white dark:border-gray-800">
                                                        <i class="fas fa-book text-blue-600 dark:text-blue-400 text-sm"></i>
                                                    </div>
                                                </div>
                                                <div class="ml-6">
                                                    <div class="bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3 border border-gray-100 dark:border-gray-700">
                                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="study-material-accessed">Study material accessed</p>
                                                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1" data-i18n="history-study-guide">Reviewed study guide for History exam</p>
                                                        <p class="text-xs text-gray-400 dark:text-gray-500 mt-2" data-i18n="yesterday-time">Yesterday, 4:20 PM</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="mt-6 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium flex items-center transition-colors duration-200" data-i18n="view-full-history">
                        View full history
                        <i class="fas fa-arrow-right ml-1.5"></i>
                    </button>
                </div>
            </div>

            <!-- AI Tutor View -->
            <div id="ai-tutor-view" class="view-content hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="ai-tutor-title">AI Learning Assistant</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1" data-i18n="ai-tutor-description">Get personalized help with your studies, assignments and exam preparation.</p>
                    </div>
                </div>

                <!-- Chat interface -->
                <div class="flex flex-col md:flex-row gap-6 h-[calc(100vh-200px)]">
                    <!-- Subject selector sidebar -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 w-full md:w-64 flex-shrink-0">
                        <h3 class="text-md font-semibold text-gray-700 dark:text-gray-200 mb-3" data-i18n="select-subject">Select Subject</h3>
                        <div class="space-y-2">
                            <button class="subject-btn w-full flex items-center p-3 rounded-lg bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-200 font-medium text-sm hover:bg-primary-200 dark:hover:bg-primary-800/50 transition-colors" data-subject="math">
                                <i class="fas fa-calculator mr-3 text-primary-600 dark:text-primary-400"></i>
                                <span data-i18n="mathematics">Mathematics</span>
                            </button>
                            <button class="subject-btn w-full flex items-center p-3 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-medium text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-subject="language">
                                <i class="fas fa-book mr-3 text-purple-600 dark:text-purple-400"></i>
                                <span data-i18n="language">Language</span>
                            </button>
                            <button class="subject-btn w-full flex items-center p-3 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-medium text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-subject="science">
                                <i class="fas fa-flask mr-3 text-green-600 dark:text-green-400"></i>
                                <span data-i18n="science">Science</span>
                            </button>
                            <button class="subject-btn w-full flex items-center p-3 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-medium text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-subject="history">
                                <i class="fas fa-landmark mr-3 text-yellow-600 dark:text-yellow-400"></i>
                                <span data-i18n="history">History</span>
                            </button>
                            <button class="subject-btn w-full flex items-center p-3 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-medium text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-subject="english">
                                <i class="fas fa-language mr-3 text-blue-600 dark:text-blue-400"></i>
                                <span data-i18n="english">English</span>
                            </button>
                        </div>
                        
                        <div class="mt-6">
                            <h3 class="text-md font-semibold text-gray-700 dark:text-gray-200 mb-3" data-i18n="help-type">Help Type</h3>
                            <div class="space-y-2">
                                <button class="help-type-btn w-full flex items-center p-3 rounded-lg bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-200 font-medium text-sm hover:bg-primary-200 dark:hover:bg-primary-800/50 transition-colors" data-help-type="explain">
                                    <i class="fas fa-chalkboard-teacher mr-3 text-primary-600 dark:text-primary-400"></i>
                                    <span data-i18n="explain-concepts">Explain Concepts</span>
                                </button>
                                <button class="help-type-btn w-full flex items-center p-3 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-medium text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-help-type="homework">
                                    <i class="fas fa-clipboard-check mr-3 text-green-600 dark:text-green-400"></i>
                                    <span data-i18n="homework-help">Homework Help</span>
                                </button>
                                <button class="help-type-btn w-full flex items-center p-3 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-medium text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-help-type="practice">
                                    <i class="fas fa-dumbbell mr-3 text-orange-600 dark:text-orange-400"></i>
                                    <span data-i18n="practice-exercises">Practice Exercises</span>
                                </button>
                                <button class="help-type-btn w-full flex items-center p-3 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-medium text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors" data-help-type="exam">
                                    <i class="fas fa-file-alt mr-3 text-red-600 dark:text-red-400"></i>
                                    <span data-i18n="exam-prep">Exam Preparation</span>
                                </button>
                            </div>
                        </div>

                        <button id="new-chat-btn" class="mt-6 w-full py-2 bg-white dark:bg-gray-900 text-primary-600 dark:text-primary-400 border border-primary-200 dark:border-primary-800 rounded-lg hover:bg-primary-50 dark:hover:bg-gray-800 transition-colors">
                            <i class="fas fa-plus mr-2"></i> <span data-i18n="new-conversation">New Conversation</span>
                        </button>
                    </div>
                    
                    <!-- Chat area -->
                    <div class="flex-1 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col overflow-hidden">
                        <!-- Chat header -->
                        <div class="p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center">
                            <div class="flex items-center">
                                <div class="w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="ml-3">
                                    <h3 class="font-medium text-gray-800 dark:text-white text-sm"><span data-i18n="current-focus">Current Focus</span>: <span id="current-subject" class="text-primary-600 dark:text-primary-400">Mathematics</span></h3>
                                    <p class="text-xs text-gray-500 dark:text-gray-400"><span data-i18n="help-mode">Help Mode</span>: <span id="current-help-mode">Explain Concepts</span></p>
                                </div>
                            </div>
                            <div>
                                <button id="save-chat-btn" class="text-sm px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                    <i class="fas fa-save mr-1"></i> <span data-i18n="save">Save</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Chat messages -->
                        <div id="chat-messages" class="flex-1 p-4 overflow-y-auto flex flex-col">
                            <!-- First-time welcome message -->
                            <div class="ai-message">
                                <div class="markdown-content">
                                    <p><span data-i18n="ai-welcome-1">👋 Hello! I'm your AI learning assistant. I'm here to help you understand</span> <strong>Mathematics</strong> <span data-i18n="ai-welcome-2">concepts.</span></p>
                                    <p><span data-i18n="ai-welcome-3">You can ask me questions about</span>:</p>
                                    <ul>
                                        <li data-i18n="ai-welcome-4">Explaining mathematical concepts</li>
                                        <li data-i18n="ai-welcome-5">Solving equations step-by-step</li>
                                        <li data-i18n="ai-welcome-6">Help with homework problems</li>
                                        <li data-i18n="ai-welcome-7">Preparing for exams</li>
                                    </ul>
                                    <p data-i18n="ai-welcome-8">What would you like to learn about today?</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Chat input -->
                        <div class="p-4 border-t border-gray-100 dark:border-gray-700">
                            <div class="relative">
                                <textarea id="chat-input" rows="2" class="block w-full px-4 py-3 text-base text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent" placeholder="Ask something about Mathematics..." data-i18n-placeholder="ask-about-math"></textarea>
                                <button id="send-message" class="absolute right-3 bottom-3 p-2 bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white rounded-md transition-colors">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                            <div class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mt-2">
                                <div class="flex items-center">
                                    <i class="fas fa-lightbulb text-yellow-500 mr-1"></i>
                                    <span id="suggestion-text" data-i18n="try-asking">Try asking: "Explain quadratic equations"</span>
                                </div>
                                <button id="attach-file" class="flex items-center">
                                    <i class="fas fa-paperclip mr-1"></i>
                                    <span data-i18n="attach-file">Attach file</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Materias View (New) -->
            <div id="materias-view" class="view-content hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="my-subjects">My Subjects</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1" data-i18n="subjects-description">View all your enrolled subjects for the current semester.</p>
                    </div>
                    <div class="mt-4 sm:mt-0">
                        <div class="flex text-sm">
                            <span class="px-3 py-1 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded-l-lg border border-primary-200 dark:border-primary-700">
                                <span data-i18n="semester">Semester</span>: 2023-2
                            </span>
                            <span class="px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-r-lg border-t border-r border-b border-green-200 dark:border-green-700">
                                <span data-i18n="active">Active</span>
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Subject Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6">
                    <!-- Matemáticas -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300">
                        <div class="h-3 bg-primary-500"></div>
                        <div class="p-5">
                            <div class="flex justify-between items-start">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 rounded-lg bg-primary-100 dark:bg-primary-800/50 flex items-center justify-center text-primary-600 dark:text-primary-400">
                                        <i class="fas fa-calculator text-xl"></i>
                                    </div>
                                    <div class="ml-4">
                                        <h3 class="font-semibold text-gray-800 dark:text-white text-lg" data-i18n="mathematics">Mathematics</h3>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">MAT-301</p>
                                    </div>
                                </div>
                                <span class="px-3 py-1 text-xs rounded-full font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400" data-i18n="in-progress">In progress</span>
                            </div>
                            
                            <div class="mt-4 flex justify-between text-sm">
                                <div>
                                    <p class="text-gray-600 dark:text-gray-400" data-i18n="teacher">Teacher</p>
                                    <p class="font-medium text-gray-800 dark:text-gray-200">Prof. Ricardo Álvarez</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-gray-600 dark:text-gray-400" data-i18n="your-grade">Your grade</p>
                                    <p class="font-bold text-primary-600 dark:text-primary-400">9.5</p>
                                </div>
                            </div>
                            
                            <div class="mt-4">
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="text-gray-500 dark:text-gray-400" data-i18n="completion">Completion</span>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">75%</span>
                                </div>
                                <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                    <div class="bg-primary-500 h-full rounded-full" style="width: 75%"></div>
                                </div>
                            </div>
                            
                            <div class="mt-5 flex space-x-2">
                                <button class="flex-1 py-2 text-sm font-medium rounded-lg border border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors" data-i18n="details">
                                    Details
                                </button>
                                <button class="flex-1 py-2 text-sm font-medium rounded-lg bg-primary-600 hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800 text-white transition-colors" data-i18n="resources">
                                    Resources
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Lenguaje -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300">
                        <div class="h-3 bg-purple-500"></div>
                        <div class="p-5">
                            <div class="flex justify-between items-start">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 rounded-lg bg-purple-100 dark:bg-purple-800/50 flex items-center justify-center text-purple-600 dark:text-purple-400">
                                        <i class="fas fa-book text-xl"></i>
                                    </div>
                                    <div class="ml-4">
                                        <h3 class="font-semibold text-gray-800 dark:text-white text-lg" data-i18n="language">Language</h3>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">LEN-205</p>
                                    </div>
                                </div>
                                <span class="px-3 py-1 text-xs rounded-full font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400" data-i18n="in-progress">In progress</span>
                            </div>
                            
                            <div class="mt-4 flex justify-between text-sm">
                                <div>
                                    <p class="text-gray-600 dark:text-gray-400" data-i18n="teacher">Teacher</p>
                                    <p class="font-medium text-gray-800 dark:text-gray-200">Prof. Ana Gutiérrez</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-gray-600 dark:text-gray-400" data-i18n="your-grade">Your grade</p>
                                    <p class="font-bold text-primary-600 dark:text-primary-400">8.7</p>
                                </div>
                            </div>
                            
                            <div class="mt-4">
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="text-gray-500 dark:text-gray-400" data-i18n="completion">Completion</span>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">60%</span>
                                </div>
                                <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                    <div class="bg-purple-500 h-full rounded-full" style="width: 60%"></div>
                                </div>
                            </div>
                            
                            <div class="mt-5 flex space-x-2">
                                <button class="flex-1 py-2 text-sm font-medium rounded-lg border border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors" data-i18n="details">
                                    Details
                                </button>
                                <button class="flex-1 py-2 text-sm font-medium rounded-lg bg-primary-600 hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800 text-white transition-colors" data-i18n="resources">
                                    Resources
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ciencias -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300">
                        <div class="h-3 bg-green-500"></div>
                        <div class="p-5">
                            <div class="flex justify-between items-start">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 rounded-lg bg-green-100 dark:bg-green-800/50 flex items-center justify-center text-green-600 dark:text-green-400">
                                        <i class="fas fa-flask text-xl"></i>
                                    </div>
                                    <div class="ml-4">
                                        <h3 class="font-semibold text-gray-800 dark:text-white text-lg" data-i18n="science">Science</h3>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">CIE-405</p>
                                    </div>
                                </div>
                                <span class="px-3 py-1 text-xs rounded-full font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400" data-i18n="in-progress">In progress</span>
                            </div>
                            
                            <div class="mt-4 flex justify-between text-sm">
                                <div>
                                    <p class="text-gray-600 dark:text-gray-400" data-i18n="teacher">Teacher</p>
                                    <p class="font-medium text-gray-800 dark:text-gray-200">Prof. Carlos Vega</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-gray-600 dark:text-gray-400" data-i18n="your-grade">Your grade</p>
                                    <p class="font-bold text-primary-600 dark:text-primary-400">9.0</p>
                                </div>
                            </div>
                            
                            <div class="mt-4">
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="text-gray-500 dark:text-gray-400" data-i18n="completion">Completion</span>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">80%</span>
                                </div>
                                <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                    <div class="bg-green-500 h-full rounded-full" style="width: 80%"></div>
                                </div>
                            </div>
                            
                            <div class="mt-5 flex space-x-2">
                                <button class="flex-1 py-2 text-sm font-medium rounded-lg border border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors" data-i18n="details">
                                    Details
                                </button>
                                <button class="flex-1 py-2 text-sm font-medium rounded-lg bg-primary-600 hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800 text-white transition-colors" data-i18n="resources">
                                    Resources
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Historia -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300">
                        <div class="h-3 bg-yellow-500"></div>
                        <div class="p-5">
                            <div class="flex justify-between items-start">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 rounded-lg bg-yellow-100 dark:bg-yellow-800/50 flex items-center justify-center text-yellow-600 dark:text-yellow-400">
                                        <i class="fas fa-landmark text-xl"></i>
                                    </div>
                                    <div class="ml-4">
                                        <h3 class="font-semibold text-gray-800 dark:text-white text-lg" data-i18n="history">History</h3>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">HIS-302</p>
                                    </div>
                                </div>
                                <span class="px-3 py-1 text-xs rounded-full font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400" data-i18n="in-progress">In progress</span>
                            </div>
                            
                            <div class="mt-4 flex justify-between text-sm">
                                <div>
                                    <p class="text-gray-600 dark:text-gray-400" data-i18n="teacher">Teacher</p>
                                    <p class="font-medium text-gray-800 dark:text-gray-200">Prof. Elena Martínez</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-gray-600 dark:text-gray-400" data-i18n="your-grade">Your grade</p>
                                    <p class="font-bold text-primary-600 dark:text-primary-400">8.2</p>
                                </div>
                            </div>
                            
                            <div class="mt-4">
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="text-gray-500 dark:text-gray-400" data-i18n="completion">Completion</span>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">65%</span>
                                </div>
                                <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                    <div class="bg-yellow-500 h-full rounded-full" style="width: 65%"></div>
                                </div>
                            </div>
                            
                            <div class="mt-5 flex space-x-2">
                                <button class="flex-1 py-2 text-sm font-medium rounded-lg border border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors" data-i18n="details">
                                    Details
                                </button>
                                <button class="flex-1 py-2 text-sm font-medium rounded-lg bg-primary-600 hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800 text-white transition-colors" data-i18n="resources">
                                    Resources
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Inglés -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300">
                        <div class="h-3 bg-blue-500"></div>
                        <div class="p-5">
                            <div class="flex justify-between items-start">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-800/50 flex items-center justify-center text-blue-600 dark:text-blue-400">
                                        <i class="fas fa-language text-xl"></i>
                                    </div>
                                    <div class="ml-4">
                                        <h3 class="font-semibold text-gray-800 dark:text-white text-lg" data-i18n="english">English</h3>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">ENG-203</p>
                                    </div>
                                </div>
                                <span class="px-3 py-1 text-xs rounded-full font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400" data-i18n="in-progress">In progress</span>
                            </div>
                            
                            <div class="mt-4 flex justify-between text-sm">
                                <div>
                                    <p class="text-gray-600 dark:text-gray-400" data-i18n="teacher">Teacher</p>
                                    <p class="font-medium text-gray-800 dark:text-gray-200">Prof. John Smith</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-gray-600 dark:text-gray-400" data-i18n="your-grade">Your grade</p>
                                    <p class="font-bold text-primary-600 dark:text-primary-400">8.7</p>
                                </div>
                            </div>
                            
                            <div class="mt-4">
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="text-gray-500 dark:text-gray-400" data-i18n="completion">Completion</span>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">70%</span>
                                </div>
                                <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                    <div class="bg-blue-500 h-full rounded-full" style="width: 70%"></div>
                                </div>
                            </div>
                            
                            <div class="mt-5 flex space-x-2">
                                <button class="flex-1 py-2 text-sm font-medium rounded-lg border border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors" data-i18n="details">
                                    Details
                                </button>
                                <button class="flex-1 py-2 text-sm font-medium rounded-lg bg-primary-600 hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800 text-white transition-colors" data-i18n="resources">
                                    Resources
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Calificaciones View (New) -->
            <div id="calificaciones-view" class="view-content hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="my-grades">My Grades</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1" data-i18n="grades-description">View and track all your academic grades.</p>
                    </div>
                    <div class="mt-4 sm:mt-0">
                        <select class="text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400">
                            <option value="current" data-i18n="current-semester-option">Current Semester</option>
                            <option value="previous" data-i18n="previous-semester">Previous Semester</option>
                            <option value="all" data-i18n="all">All</option>
                        </select>
                    </div>
                </div>

                <!-- Overall Summary Card -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-6">
                    <div class="flex flex-col md:flex-row items-start md:items-center justify-between">
                        <div class="flex items-center mb-4 md:mb-0">
                            <div class="w-14 h-14 rounded-xl bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400 mr-4">
                                <i class="fas fa-graduation-cap text-3xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800 dark:text-white" data-i18n="semester-average">Semester Average</h3>
                                <p class="text-gray-600 dark:text-gray-400 text-sm" data-i18n="semester-period">Period: 2023-2</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="text-center px-4 py-2 bg-primary-50 dark:bg-primary-900/20 rounded-lg border border-primary-100 dark:border-primary-800">
                                <p class="text-sm text-gray-600 dark:text-gray-400" data-i18n="your-average">Your Average</p>
                                <p class="text-3xl font-bold text-primary-600 dark:text-primary-400">8.7</p>
                            </div>
                            <div class="ml-4 text-center px-4 py-2 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-100 dark:border-yellow-800">
                                <p class="text-sm text-gray-600 dark:text-gray-400" data-i18n="class-average">Class Average</p>
                                <p class="text-3xl font-bold text-yellow-600 dark:text-yellow-400">7.9</p>
                            </div>
                            <div class="ml-4 text-center px-4 py-2 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-100 dark:border-green-800">
                                <p class="text-sm text-gray-600 dark:text-gray-400" data-i18n="ranking">Ranking</p>
                                <p class="text-3xl font-bold text-green-600 dark:text-green-400">3º</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Grades Table -->
                <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 mb-6">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                            <thead class="bg-gray-50 dark:bg-gray-900/50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="subject">Subject</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="teacher">Teacher</th>
                                    <th scope="col" class="px-6 py-3 text-center text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="midterm">Midterm</th>
                                    <th scope="col" class="px-6 py-3 text-center text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="project">Project</th>
                                    <th scope="col" class="px-6 py-3 text-center text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="final-exam">Final Exam</th>
                                    <th scope="col" class="px-6 py-3 text-center text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="final-grade">Final Grade</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                <!-- Matemáticas -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-md bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400">
                                                <i class="fas fa-calculator"></i>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="mathematics">Mathematics</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">MAT-301</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Prof. Ricardo Álvarez</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm grade-pill">9.3</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm grade-pill">9.8</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm grade-pill">9.5</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center px-3 py-1 rounded-lg bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm">9.5</span>
                                    </td>
                                </tr>
                                
                                <!-- Lenguaje -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-md bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400">
                                                <i class="fas fa-book"></i>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="language">Language</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">LEN-205</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Prof. Ana Gutiérrez</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm grade-pill">8.5</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm grade-pill">9.0</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm grade-pill">8.7</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center px-3 py-1 rounded-lg bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm">8.7</span>
                                    </td>
                                </tr>
                                
                                <!-- Ciencias -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-md bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400">
                                                <i class="fas fa-flask"></i>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="science">Science</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">CIE-405</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Prof. Carlos Vega</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm grade-pill">8.8</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm grade-pill">9.3</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm grade-pill">9.0</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center px-3 py-1 rounded-lg bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm">9.0</span>
                                    </td>
                                </tr>
                                
                                <!-- Historia -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-md bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center text-yellow-600 dark:text-yellow-400">
                                                <i class="fas fa-landmark"></i>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="history">History</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">HIS-302</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Prof. Elena Martínez</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 font-bold text-sm grade-pill">7.8</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm grade-pill">8.5</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 font-bold text-sm grade-pill">8.2</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center px-3 py-1 rounded-lg bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 font-bold text-sm">8.2</span>
                                    </td>
                                </tr>
                                
                                <!-- Inglés -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-md bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400">
                                                <i class="fas fa-language"></i>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="english">English</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">ENG-203</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Prof. John Smith</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm grade-pill">8.3</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm grade-pill">9.2</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm grade-pill">8.7</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <span class="inline-flex items-center justify-center px-3 py-1 rounded-lg bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 font-bold text-sm">8.7</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Export Options -->
                <div class="flex justify-end space-x-3 mb-8">
                    <button class="px-4 py-2 text-sm font-medium rounded-lg border border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors">
                        <i class="fas fa-file-pdf mr-2"></i> <span data-i18n="export-pdf">Export PDF</span>
                    </button>
                    <button class="px-4 py-2 text-sm font-medium rounded-lg border border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors">
                        <i class="fas fa-file-excel mr-2"></i> <span data-i18n="export-excel">Export Excel</span>
                    </button>
                </div>
            </div>
            
            <!-- Horario View (New) -->
            <div id="horario-view" class="view-content hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="academic-schedule">Academic Schedule</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1" data-i18n="schedule-description">View your weekly class schedule.</p>
                    </div>
                    <div class="mt-4 sm:mt-0 flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-3">
                        <button class="flex items-center px-3 py-1.5 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded-lg text-sm font-medium hover:bg-primary-200 dark:hover:bg-primary-800/50 transition-colors">
                            <i class="fas fa-download mr-2"></i> <span data-i18n="download-schedule">Download Schedule</span>
                        </button>
                        <button class="flex items-center px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg text-sm font-medium hover:bg-blue-200 dark:hover:bg-blue-800/50 transition-colors">
                            <i class="fas fa-calendar-plus mr-2"></i> <span data-i18n="sync-calendar">Sync to Calendar</span>
                        </button>
                    </div>
                </div>

                <!-- Schedule Grid -->
                <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 mb-6">
                    <div class="overflow-x-auto">
                        <div class="min-w-full p-4">
                            <!-- Days of week header -->
                            <div class="grid grid-cols-6 gap-4 mb-4">
                                <div class="text-center"></div> <!-- Empty cell for time column -->
                                <div class="text-center py-2 font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg" data-i18n="monday">Monday</div>
                                <div class="text-center py-2 font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg" data-i18n="tuesday">Tuesday</div>
                                <div class="text-center py-2 font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg" data-i18n="wednesday">Wednesday</div>
                                <div class="text-center py-2 font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg" data-i18n="thursday">Thursday</div>
                                <div class="text-center py-2 font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg" data-i18n="friday">Friday</div>
                            </div>
                            
                            <!-- Time slots and classes -->
                            <!-- 8:00 - 9:30 -->
                            <div class="grid grid-cols-6 gap-4 mb-4">
                                <div class="flex items-center justify-center text-sm font-medium text-gray-500 dark:text-gray-400">
                                    8:00 - 9:30
                                </div>
                                <div class="p-3 bg-purple-100 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg schedule-cell">
                                    <h4 class="font-semibold text-purple-700 dark:text-purple-300 text-sm" data-i18n="language">Language</h4>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Prof. Ana Gutiérrez</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-500">Salon 205</p>
                                </div>
                                <div class=""></div>
                                <div class="p-3 bg-purple-100 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg schedule-cell">
                                    <h4 class="font-semibold text-purple-700 dark:text-purple-300 text-sm" data-i18n="language">Language</h4>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Prof. Ana Gutiérrez</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-500">Salon 205</p>
                                </div>
                                <div class=""></div>
                                <div class=""></div>
                            </div>
                            
                            <!-- 9:30 - 11:00 -->
                            <div class="grid grid-cols-6 gap-4 mb-4">
                                <div class="flex items-center justify-center text-sm font-medium text-gray-500 dark:text-gray-400">
                                    9:30 - 11:00
                                </div>
                                <div class=""></div>
                                <div class="p-3 bg-primary-100 dark:bg-primary-900/20 border border-primary-200 dark:border-primary-800 rounded-lg schedule-cell">
                                    <h4 class="font-semibold text-primary-700 dark:text-primary-300 text-sm" data-i18n="mathematics">Mathematics</h4>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Prof. Ricardo Álvarez</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-500">Salon 301</p>
                                </div>
                                <div class=""></div>
                                <div class="p-3 bg-primary-100 dark:bg-primary-900/20 border border-primary-200 dark:border-primary-800 rounded-lg schedule-cell">
                                    <h4 class="font-semibold text-primary-700 dark:text-primary-300 text-sm" data-i18n="mathematics">Mathematics</h4>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Prof. Ricardo Álvarez</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-500">Salon 301</p>
                                </div>
                                <div class=""></div>
                            </div>
                            
                            <!-- 11:00 - 12:30 -->
                            <div class="grid grid-cols-6 gap-4 mb-4">
                                <div class="flex items-center justify-center text-sm font-medium text-gray-500 dark:text-gray-400">
                                    11:00 - 12:30
                                </div>
                                <div class=""></div>
                                <div class=""></div>
                                <div class="p-3 bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg schedule-cell">
                                    <h4 class="font-semibold text-yellow-700 dark:text-yellow-300 text-sm" data-i18n="history">History</h4>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Prof. Elena Martínez</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-500">Salon 302</p>
                                </div>
                                <div class=""></div>
                                <div class="p-3 bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg schedule-cell">
                                    <h4 class="font-semibold text-yellow-700 dark:text-yellow-300 text-sm" data-i18n="history">History</h4>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Prof. Elena Martínez</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-500">Salon 302</p>
                                </div>
                            </div>
                            
                            <!-- 12:30 - 14:00 -->
                            <div class="grid grid-cols-6 gap-4 mb-4">
                                <div class="flex items-center justify-center text-sm font-medium text-gray-500 dark:text-gray-400">
                                    12:30 - 14:00
                                </div>
                                <div class="text-center py-2 text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg" data-i18n="lunch-break">Lunch Break</div>
                                <div class="text-center py-2 text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg" data-i18n="lunch-break">Lunch Break</div>
                                <div class="text-center py-2 text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg" data-i18n="lunch-break">Lunch Break</div>
                                <div class="text-center py-2 text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg" data-i18n="lunch-break">Lunch Break</div>
                                <div class="text-center py-2 text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg" data-i18n="lunch-break">Lunch Break</div>
                            </div>
                            
                            <!-- 14:00 - 15:30 -->
                            <div class="grid grid-cols-6 gap-4 mb-4">
                                <div class="flex items-center justify-center text-sm font-medium text-gray-500 dark:text-gray-400">
                                    14:00 - 15:30
                                </div>
                                <div class="p-3 bg-green-100 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg schedule-cell">
                                    <h4 class="font-semibold text-green-700 dark:text-green-300 text-sm" data-i18n="science">Science</h4>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Prof. Carlos Vega</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-500">Lab 405</p>
                                </div>
                                <div class=""></div>
                                <div class="p-3 bg-green-100 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg schedule-cell">
                                    <h4 class="font-semibold text-green-700 dark:text-green-300 text-sm" data-i18n="science">Science</h4>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Prof. Carlos Vega</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-500">Lab 405</p>
                                </div>
                                <div class=""></div>
                                <div class="p-3 bg-green-100 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg schedule-cell">
                                    <h4 class="font-semibold text-green-700 dark:text-green-300 text-sm" data-i18n="science-lab">Science Lab</h4>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Prof. Carlos Vega</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-500">Lab 405</p>
                                </div>
                            </div>
                            
                            <!-- 15:30 - 17:00 -->
                            <div class="grid grid-cols-6 gap-4">
                                <div class="flex items-center justify-center text-sm font-medium text-gray-500 dark:text-gray-400">
                                    15:30 - 17:00
                                </div>
                                <div class=""></div>
                                <div class="p-3 bg-blue-100 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg schedule-cell">
                                    <h4 class="font-semibold text-blue-700 dark:text-blue-300 text-sm" data-i18n="english">English</h4>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Prof. John Smith</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-500">Salon 203</p>
                                </div>
                                <div class=""></div>
                                <div class="p-3 bg-blue-100 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg schedule-cell">
                                    <h4 class="font-semibold text-blue-700 dark:text-blue-300 text-sm" data-i18n="english">English</h4>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Prof. John Smith</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-500">Salon 203</p>
                                </div>
                                <div class=""></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Material de Estudio View (New) -->
            <div id="material-view" class="view-content hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="study-material">Study Material</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1" data-i18n="material-description">Access all your course materials and resources.</p>
                    </div>
                    <div class="mt-4 sm:mt-0 flex space-x-3">
                        <div class="relative">
                            <input type="text" class="w-full pl-10 pr-4 py-2 text-sm border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200" placeholder="Search materials..." data-i18n-placeholder="search-materials">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-search text-gray-400"></i>
                            </div>
                        </div>
                        <select class="text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400">
                            <option value="all" data-i18n="all-subjects">All Subjects</option>
                            <option value="mathematics" data-i18n="mathematics">Mathematics</option>
                            <option value="language" data-i18n="language">Language</option>
                            <option value="science" data-i18n="science">Science</option>
                            <option value="history" data-i18n="history">History</option>
                            <option value="english" data-i18n="english">English</option>
                        </select>
                    </div>
                </div>

                <!-- Recent Materials -->
                <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4" data-i18n="recent-materials">Recent Materials</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                    <!-- Science PDF -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300">
                        <div class="h-2 bg-green-500"></div>
                        <div class="p-5">
                            <div class="flex justify-between items-start">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center text-red-600 dark:text-red-400">
                                        <i class="fas fa-file-pdf"></i>
                                    </div>
                                    <div class="ml-3">
                                        <h4 class="font-semibold text-gray-800 dark:text-white text-sm">Cellular Respiration Guide</h4>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">PDF - 3.2 MB</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 text-xs rounded-full font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400" data-i18n="new">NEW</span>
                            </div>
                            
                            <div class="mt-3 flex items-center text-xs text-gray-500 dark:text-gray-400">
                                <i class="fas fa-flask mr-1 text-green-500 dark:text-green-400"></i>
                                <span data-i18n="science">Science</span>
                                <span class="mx-2">•</span>
                                <span>Oct 23, 2023</span>
                            </div>
                            
                            <div class="mt-4 flex space-x-2">
                                <button class="flex-1 py-1.5 text-xs font-medium rounded-lg border border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors">
                                    <i class="fas fa-eye mr-1"></i> <span data-i18n="view">View</span>
                                </button>
                                <button class="flex-1 py-1.5 text-xs font-medium rounded-lg bg-primary-600 hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800 text-white transition-colors">
                                    <i class="fas fa-download mr-1"></i> <span data-i18n="download">Download</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mathematics Video -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300">
                        <div class="h-2 bg-primary-500"></div>
                        <div class="p-5">
                            <div class="flex justify-between items-start">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400">
                                        <i class="fas fa-video"></i>
                                    </div>
                                    <div class="ml-3">
                                        <h4 class="font-semibold text-gray-800 dark:text-white text-sm">Quadratic Equations Tutorial</h4>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">Video - 18:35</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 text-xs rounded-full font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400" data-i18n="new">NEW</span>
                            </div>
                            
                            <div class="mt-3 flex items-center text-xs text-gray-500 dark:text-gray-400">
                                <i class="fas fa-calculator mr-1 text-primary-500 dark:text-primary-400"></i>
                                <span data-i18n="mathematics">Mathematics</span>
                                <span class="mx-2">•</span>
                                <span>Oct 21, 2023</span>
                            </div>
                            
                            <div class="mt-4 flex space-x-2">
                                <button class="flex-1 py-1.5 text-xs font-medium rounded-lg border border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors">
                                    <i class="fas fa-play mr-1"></i> <span data-i18n="watch">Watch</span>
                                </button>
                                <button class="flex-1 py-1.5 text-xs font-medium rounded-lg bg-primary-600 hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800 text-white transition-colors">
                                    <i class="fas fa-download mr-1"></i> <span data-i18n="download">Download</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- History Presentation -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow duration-300">
                        <div class="h-2 bg-yellow-500"></div>
                        <div class="p-5">
                            <div class="flex justify-between items-start">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400">
                                        <i class="fas fa-file-powerpoint"></i>
                                    </div>
                                    <div class="ml-3">
                                        <h4 class="font-semibold text-gray-800 dark:text-white text-sm">World War II Overview</h4>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">Presentation - 34 slides</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 text-xs rounded-full font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400" data-i18n="new">NEW</span>
                            </div>
                            
                            <div class="mt-3 flex items-center text-xs text-gray-500 dark:text-gray-400">
                                <i class="fas fa-landmark mr-1 text-yellow-500 dark:text-yellow-400"></i>
                                <span data-i18n="history">History</span>
                                <span class="mx-2">•</span>
                                <span>Oct 20, 2023</span>
                            </div>
                            
                            <div class="mt-4 flex space-x-2">
                                <button class="flex-1 py-1.5 text-xs font-medium rounded-lg border border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors">
                                    <i class="fas fa-eye mr-1"></i> <span data-i18n="view">View</span>
                                </button>
                                <button class="flex-1 py-1.5 text-xs font-medium rounded-lg bg-primary-600 hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800 text-white transition-colors">
                                    <i class="fas fa-download mr-1"></i> <span data-i18n="download">Download</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- All Materials Table -->
                <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4" data-i18n="all-materials">All Materials</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 mb-6">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                            <thead class="bg-gray-50 dark:bg-gray-900/50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="name">Name</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="subject">Subject</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="type">Type</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="date-added">Date Added</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="size">Size</th>
                                    <th scope="col" class="px-6 py-3 text-center text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="actions">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                <!-- Row 1 -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-md bg-red-100 dark:bg-red-900/30 flex items-center justify-center text-red-600 dark:text-red-400">
                                                <i class="fas fa-file-pdf"></i>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm font-medium text-gray-800 dark:text-gray-200">Cellular Respiration Guide</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Chapters 1-3</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <i class="fas fa-flask mr-2 text-green-500 dark:text-green-400"></i>
                                            <span class="text-sm text-gray-700 dark:text-gray-300" data-i18n="science">Science</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 py-1 text-xs rounded-full font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400">PDF</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Oct 23, 2023</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">3.2 MB</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <button class="px-2 py-1 text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors mr-2">
                                            <i class="fas fa-eye mr-1"></i> <span data-i18n="view">View</span>
                                        </button>
                                        <button class="px-2 py-1 text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                                            <i class="fas fa-download mr-1"></i> <span data-i18n="download">Download</span>
                                        </button>
                                    </td>
                                </tr>
                                
                                <!-- Row 2 -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-md bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400">
                                                <i class="fas fa-video"></i>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm font-medium text-gray-800 dark:text-gray-200">Quadratic Equations Tutorial</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Practice examples</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <i class="fas fa-calculator mr-2 text-primary-500 dark:text-primary-400"></i>
                                            <span class="text-sm text-gray-700 dark:text-gray-300" data-i18n="mathematics">Mathematics</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 py-1 text-xs rounded-full font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400">Video</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Oct 21, 2023</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">85 MB</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <button class="px-2 py-1 text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors mr-2">
                                            <i class="fas fa-play mr-1"></i> <span data-i18n="watch">Watch</span>
                                        </button>
                                        <button class="px-2 py-1 text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                                            <i class="fas fa-download mr-1"></i> <span data-i18n="download">Download</span>
                                        </button>
                                    </td>
                                </tr>
                                
                                <!-- Row 3 -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-md bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400">
                                                <i class="fas fa-file-powerpoint"></i>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm font-medium text-gray-800 dark:text-gray-200">World War II Overview</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Key events and figures</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <i class="fas fa-landmark mr-2 text-yellow-500 dark:text-yellow-400"></i>
                                            <span class="text-sm text-gray-700 dark:text-gray-300" data-i18n="history">History</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 py-1 text-xs rounded-full font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400">PPT</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Oct 20, 2023</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">5.8 MB</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <button class="px-2 py-1 text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors mr-2">
                                            <i class="fas fa-eye mr-1"></i> <span data-i18n="view">View</span>
                                        </button>
                                        <button class="px-2 py-1 text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                                            <i class="fas fa-download mr-1"></i> <span data-i18n="download">Download</span>
                                        </button>
                                    </td>
                                </tr>
                                
                                <!-- Row 4 -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-8 h-8 rounded-md bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400">
                                                <i class="fas fa-file-excel"></i>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm font-medium text-gray-800 dark:text-gray-200">Lab Results Data</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Photosynthesis experiment</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <i class="fas fa-flask mr-2 text-green-500 dark:text-green-400"></i>
                                            <span class="text-sm text-gray-700 dark:text-gray-300" data-i18n="science">Science</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 py-1 text-xs rounded-full font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400">Excel</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Oct 18, 2023</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">1.2 MB</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <button class="px-2 py-1 text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors mr-2">
                                            <i class="fas fa-eye mr-1"></i> <span data-i18n="view">View</span>
                                        </button>
                                        <button class="px-2 py-1 text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                                            <i class="fas fa-download mr-1"></i> <span data-i18n="download">Download</span>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Tareas View (New) -->
            <div id="tareas-view" class="view-content hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="pending-tasks">Pending Tasks</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1" data-i18n="tasks-description">Manage and track your assignments and homework.</p>
                    </div>
                    <div class="mt-4 sm:mt-0 flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-3">
                        <div class="relative">
                            <select class="text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400">
                                <option value="all" data-i18n="all-subjects">All Subjects</option>
                                <option value="mathematics" data-i18n="mathematics">Mathematics</option>
                                <option value="language" data-i18n="language">Language</option>
                                <option value="science" data-i18n="science">Science</option>
                                <option value="history" data-i18n="history">History</option>
                                <option value="english" data-i18n="english">English</option>
                            </select>
                        </div>
                        <div class="relative">
                            <select class="text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400">
                                <option value="pending" data-i18n="pending-only">Pending Only</option>
                                <option value="completed" data-i18n="completed-only">Completed Only</option>
                                <option value="all" data-i18n="show-all">Show All</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Tasks Due This Week Card -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-6">
                    <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center">
                        <i class="fas fa-calendar-day text-red-500 dark:text-red-400 mr-2"></i>
                        <span data-i18n="due-this-week">Due This Week</span>
                        <span class="ml-3 px-2 py-0.5 text-xs bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full">3</span>
                    </h3>
                    
                    <div class="space-y-4">
                        <!-- Math Assignment -->
                        <div class="p-4 border border-red-200 dark:border-red-900/30 rounded-lg bg-red-50 dark:bg-red-900/10">
                            <div class="flex flex-col sm:flex-row sm:items-center justify-between">
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 w-10 h-10 rounded-lg bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400">
                                        <i class="fas fa-calculator"></i>
                                    </div>
                                    <div class="ml-3">
                                        <h4 class="font-semibold text-gray-800 dark:text-gray-200">Quadratic Equations Problem Set</h4>
                                        <div class="mt-1 flex items-center text-xs text-gray-500 dark:text-gray-400">
                                            <span class="flex items-center"><i class="fas fa-book-open mr-1"></i> <span data-i18n="mathematics">Mathematics</span></span>
                                            <span class="mx-2">•</span>
                                            <span class="flex items-center"><i class="fas fa-calendar-alt mr-1"></i> Due Oct 25, 2023</span>
                                            <span class="mx-2">•</span>
                                            <span class="flex items-center text-red-500 dark:text-red-400"><i class="fas fa-clock mr-1"></i> <span data-i18n="tomorrow">Tomorrow</span></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-3 sm:mt-0 flex space-x-2">
                                    <button class="px-3 py-1 text-xs font-medium rounded-lg border border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors">
                                        <i class="fas fa-eye mr-1"></i> <span data-i18n="view-details">View details</span>
                                    </button>
                                    <button class="px-3 py-1 text-xs font-medium rounded-lg bg-primary-600 hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800 text-white transition-colors">
                                        <i class="fas fa-check mr-1"></i> <span data-i18n="mark-complete">Mark complete</span>
                                    </button>
                                </div>
                            </div>
                            <div class="mt-2">
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="text-gray-600 dark:text-gray-400" data-i18n="progress">Progress</span>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">75%</span>
                                </div>
                                <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                    <div class="bg-primary-500 h-full rounded-full" style="width: 75%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- History Assignment -->
                        <div class="p-4 border border-yellow-200 dark:border-yellow-900/30 rounded-lg bg-yellow-50 dark:bg-yellow-900/10">
                            <div class="flex flex-col sm:flex-row sm:items-center justify-between">
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 w-10 h-10 rounded-lg bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center text-yellow-600 dark:text-yellow-400">
                                        <i class="fas fa-landmark"></i>
                                    </div>
                                    <div class="ml-3">
                                        <h4 class="font-semibold text-gray-800 dark:text-gray-200">World War II Presentation</h4>
                                        <div class="mt-1 flex items-center text-xs text-gray-500 dark:text-gray-400">
                                            <span class="flex items-center"><i class="fas fa-book-open mr-1"></i> <span data-i18n="history">History</span></span>
                                            <span class="mx-2">•</span>
                                            <span class="flex items-center"><i class="fas fa-calendar-alt mr-1"></i> Due Oct 30, 2023</span>
                                            <span class="mx-2">•</span>
                                            <span class="flex items-center text-yellow-500 dark:text-yellow-400"><i class="fas fa-clock mr-1"></i> 5 days left</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-3 sm:mt-0 flex space-x-2">
                                    <button class="px-3 py-1 text-xs font-medium rounded-lg border border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors">
                                        <i class="fas fa-eye mr-1"></i> <span data-i18n="view-details">View details</span>
                                    </button>
                                    <button class="px-3 py-1 text-xs font-medium rounded-lg bg-primary-600 hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800 text-white transition-colors">
                                        <i class="fas fa-check mr-1"></i> <span data-i18n="mark-complete">Mark complete</span>
                                    </button>
                                </div>
                            </div>
                            <div class="mt-2">
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="text-gray-600 dark:text-gray-400" data-i18n="progress">Progress</span>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">30%</span>
                                </div>
                                <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                    <div class="bg-yellow-500 h-full rounded-full" style="width: 30%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Science Project -->
                        <div class="p-4 border border-green-200 dark:border-green-900/30 rounded-lg bg-green-50 dark:bg-green-900/10">
                            <div class="flex flex-col sm:flex-row sm:items-center justify-between">
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400">
                                        <i class="fas fa-flask"></i>
                                    </div>
                                    <div class="ml-3">
                                        <h4 class="font-semibold text-gray-800 dark:text-gray-200">Photosynthesis Research Project</h4>
                                        <div class="mt-1 flex items-center text-xs text-gray-500 dark:text-gray-400">
                                            <span class="flex items-center"><i class="fas fa-book-open mr-1"></i> <span data-i18n="science">Science</span></span>
                                            <span class="mx-2">•</span>
                                            <span class="flex items-center"><i class="fas fa-calendar-alt mr-1"></i> Due Nov 5, 2023</span>
                                            <span class="mx-2">•</span>
                                            <span class="flex items-center text-green-500 dark:text-green-400"><i class="fas fa-clock mr-1"></i> 11 days left</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-3 sm:mt-0 flex space-x-2">
                                    <button class="px-3 py-1 text-xs font-medium rounded-lg border border-primary-200 dark:border-primary-800 text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/30 transition-colors">
                                        <i class="fas fa-eye mr-1"></i> <span data-i18n="view-details">View details</span>
                                    </button>
                                    <button class="px-3 py-1 text-xs font-medium rounded-lg bg-primary-600 hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800 text-white transition-colors">
                                        <i class="fas fa-check mr-1"></i> <span data-i18n="mark-complete">Mark complete</span>
                                    </button>
                                </div>
                            </div>
                            <div class="mt-2">
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="text-gray-600 dark:text-gray-400" data-i18n="progress">Progress</span>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">45%</span>
                                </div>
                                <div class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                                    <div class="bg-green-500 h-full rounded-full" style="width: 45%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Upcoming Tasks Table -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 mb-6">
                    <div class="p-6 border-b border-gray-100 dark:border-gray-700">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 flex items-center">
                            <i class="fas fa-calendar-alt text-primary-500 dark:text-primary-400 mr-2"></i>
                            <span data-i18n="upcoming-tasks">Upcoming Tasks</span>
                        </h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                            <thead class="bg-gray-50 dark:bg-gray-900/50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="task">Task</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="subject">Subject</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="due-date">Due Date</th>
                                    <th scope="col" class="px-6 py-3 text-center text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="status">Status</th>
                                    <th scope="col" class="px-6 py-3 text-center text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="actions">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                <!-- English Essay -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="ml-0">
                                                <p class="text-sm font-medium text-gray-800 dark:text-gray-200">Analytical Essay</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">5 pages, MLA format</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-6 h-6 rounded-md bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400">
                                                <i class="fas fa-language text-xs"></i>
                                            </div>
                                            <span class="ml-2 text-sm text-gray-700 dark:text-gray-300" data-i18n="english">English</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Nov 15, 2023</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 py-1 text-xs rounded-full font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400" data-i18n="not-started">Not Started</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <button class="px-2 py-1 text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                                            <i class="fas fa-eye mr-1"></i> <span data-i18n="view">View</span>
                                        </button>
                                    </td>
                                </tr>
                                
                                <!-- Math Exercise Set -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="ml-0">
                                                <p class="text-sm font-medium text-gray-800 dark:text-gray-200">Advanced Calculus Exercise Set</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Problems 15-30</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-6 h-6 rounded-md bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400">
                                                <i class="fas fa-calculator text-xs"></i>
                                            </div>
                                            <span class="ml-2 text-sm text-gray-700 dark:text-gray-300" data-i18n="mathematics">Mathematics</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Nov 10, 2023</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 py-1 text-xs rounded-full font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400" data-i18n="in-progress">In Progress</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <button class="px-2 py-1 text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                                            <i class="fas fa-eye mr-1"></i> <span data-i18n="view">View</span>
                                        </button>
                                    </td>
                                </tr>
                                
                                <!-- Language Book Report -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="ml-0">
                                                <p class="text-sm font-medium text-gray-800 dark:text-gray-200">Book Report: "Don Quijote"</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">3 pages, analysis of main themes</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-6 h-6 rounded-md bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400">
                                                <i class="fas fa-book text-xs"></i>
                                            </div>
                                            <span class="ml-2 text-sm text-gray-700 dark:text-gray-300" data-i18n="language">Language</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Nov 20, 2023</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 py-1 text-xs rounded-full font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400" data-i18n="not-started">Not Started</span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center">
                                        <button class="px-2 py-1 text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                                            <i class="fas fa-eye mr-1"></i> <span data-i18n="view">View</span>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Messages View (New) -->
            <div id="messages-view" class="view-content hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="messages-title">Messages</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1" data-i18n="messages-description">Communicate with your teachers and classmates.</p>
                    </div>
                    <button class="mt-3 sm:mt-0 px-4 py-2 bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white rounded-lg transition-colors">
                        <i class="fas fa-pen mr-2"></i> <span data-i18n="new-message">New Message</span>
                    </button>
                </div>

                <div class="flex flex-col md:flex-row gap-6 h-[calc(100vh-200px)]">
                    <!-- Contacts list -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 w-full md:w-72 flex-shrink-0 flex flex-col">
                        <div class="relative mb-4">
                            <input type="text" class="w-full pl-10 pr-4 py-2 text-sm border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200" placeholder="Search messages..." data-i18n-placeholder="search-messages">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-search text-gray-400"></i>
                            </div>
                        </div>
                        
                        <!-- Contacts tabs -->
                        <div class="flex border-b border-gray-200 dark:border-gray-700">
                            <button class="flex-1 py-2 text-sm font-medium text-primary-600 dark:text-primary-400 border-b-2 border-primary-500" data-i18n="teachers">Teachers</button>
                            <button class="flex-1 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300" data-i18n="classmates">Classmates</button>
                        </div>
                        
                        <!-- Contacts list -->
                        <div class="flex-1 overflow-y-auto mt-4 space-y-2">
                            <div class="p-3 rounded-lg bg-primary-50 dark:bg-primary-900/20 border border-primary-100 dark:border-primary-900/30 flex items-center cursor-pointer hover:bg-primary-100 dark:hover:bg-primary-800/30 transition-colors">
                                <div class="relative">
                                    <div class="w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <span class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-800"></span>
                                </div>
                                <div class="ml-3 flex-1">
                                    <div class="flex justify-between">
                                        <p class="text-sm font-medium text-gray-800 dark:text-white">Prof. Ricardo Álvarez</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">12:30</p>
                                    </div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 truncate">Sure, I'll clarify that concept in class tomorrow.</p>
                                </div>
                            </div>
                            
                            <div class="p-3 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                <div class="relative">
                                    <div class="w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <span class="absolute bottom-0 right-0 w-3 h-3 bg-gray-500 rounded-full border-2 border-white dark:border-gray-800"></span>
                                </div>
                                <div class="ml-3 flex-1">
                                    <div class="flex justify-between">
                                        <p class="text-sm font-medium text-gray-800 dark:text-white">Prof. Elena Martínez</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">Yesterday</p>
                                    </div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 truncate">Don't forget your essay is due Friday!</p>
                                </div>
                            </div>
                            
                            <div class="p-3 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                <div class="relative">
                                    <div class="w-10 h-10 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center text-yellow-600 dark:text-yellow-400">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <span class="absolute bottom-0 right-0 w-3 h-3 bg-gray-500 rounded-full border-2 border-white dark:border-gray-800"></span>
                                </div>
                                <div class="ml-3 flex-1">
                                    <div class="flex justify-between">
                                        <p class="text-sm font-medium text-gray-800 dark:text-white">Prof. Carlos Vega</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">Oct 20</p>
                                    </div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 truncate">Great progress on your science project!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Chat area -->
                    <div class="flex-1 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col overflow-hidden">
                        <!-- Chat header -->
                        <div class="p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="ml-3">
                                    <h3 class="font-medium text-gray-800 dark:text-white">Prof. Ricardo Álvarez</h3>
                                    <p class="text-xs text-green-500 dark:text-green-400"><span data-i18n="online">Online</span> • <span data-i18n="math-teacher">Mathematics Teacher</span></p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                    <i class="fas fa-phone"></i>
                                </button>
                                <button class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                    <i class="fas fa-video"></i>
                                </button>
                                <button class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                    <i class="fas fa-ellipsis-v"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Chat messages area -->
                        <div class="flex-1 p-4 overflow-y-auto">
                            <div class="flex flex-col space-y-2">
                                <!-- Date divider -->
                                <div class="flex items-center justify-center my-4">
                                    <div class="border-t border-gray-200 dark:border-gray-700 flex-grow"></div>
                                    <span class="mx-4 text-xs text-gray-500 dark:text-gray-400" data-i18n="today">Today</span>
                                    <div class="border-t border-gray-200 dark:border-gray-700 flex-grow"></div>
                                </div>
                                
                                <!-- Teacher message -->
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 mr-3">
                                        <div class="w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400">
                                            <i class="fas fa-user text-sm"></i>
                                        </div>
                                    </div>
                                    <div class="ai-message">
                                        <p data-i18n="teacher-msg-1">Good morning, María. How is your preparation for the math test going?</p>
                                    </div>
                                </div>
                                
                                <!-- Student message -->
                                <div class="flex items-start justify-end">
                                    <div class="user-message">
                                        <p data-i18n="student-msg-1">Good morning, Professor. I'm doing well, but I'm still having some trouble with quadratic equations.</p>
                                    </div>
                                </div>
                                
                                <!-- Teacher message -->
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 mr-3">
                                        <div class="w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400">
                                            <i class="fas fa-user text-sm"></i>
                                        </div>
                                    </div>
                                    <div class="ai-message">
                                        <p data-i18n="teacher-msg-2">I understand. Would you like me to go over some examples during office hours today?</p>
                                    </div>
                                </div>
                                
                                <!-- Student message -->
                                <div class="flex items-start justify-end">
                                    <div class="user-message">
                                        <p data-i18n="student-msg-2">That would be very helpful! What time are your office hours today?</p>
                                    </div>
                                </div>
                                
                                <!-- Teacher message -->
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 mr-3">
                                        <div class="w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400">
                                            <i class="fas fa-user text-sm"></i>
                                        </div>
                                    </div>
                                    <div class="ai-message">
                                        <p data-i18n="teacher-msg-3">I'm available from 3-5pm today. Feel free to stop by anytime during that window.</p>
                                    </div>
                                </div>
                                
                                <!-- Student message -->
                                <div class="flex items-start justify-end">
                                    <div class="user-message">
                                        <p data-i18n="student-msg-3">Perfect! I'll be there at 3:30pm. Thank you!</p>
                                    </div>
                                </div>
                                
                                <!-- Teacher message -->
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 mr-3">
                                        <div class="w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400">
                                            <i class="fas fa-user text-sm"></i>
                                        </div>
                                    </div>
                                    <div class="ai-message">
                                        <p data-i18n="teacher-msg-4">Sure, I'll clarify that concept in class tomorrow. Is there anything specific about quadratic equations you find challenging?</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Chat input -->
                        <div class="p-4 border-t border-gray-100 dark:border-gray-700">
                            <div class="relative">
                                <textarea rows="2" class="block w-full px-4 py-3 text-base text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent" placeholder="Type a message..." data-i18n-placeholder="type-message"></textarea>
                                <div class="absolute bottom-3 right-3 flex items-center space-x-2">
                                    <button class="p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors">
                                        <i class="fas fa-paperclip"></i>
                                    </button>
                                    <button class="p-2 bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white rounded-md transition-colors">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Forums View (New) -->
            <div id="forums-view" class="view-content hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white" data-i18n="forums-title">Forums</h2>
                        <p class="text-gray-600 dark:text-gray-300 mt-1" data-i18n="forums-description">Discuss topics with your classmates and teachers.</p>
                    </div>
                    <div class="mt-4 sm:mt-0 flex space-x-3">
                        <div class="relative">
                            <input type="text" class="w-64 pl-10 pr-4 py-2 text-sm border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200" placeholder="Search forums..." data-i18n-placeholder="search-forums">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-search text-gray-400"></i>
                            </div>
                        </div>
                        <button class="px-4 py-2 bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white rounded-lg transition-colors">
                            <i class="fas fa-plus mr-2"></i> <span data-i18n="new-topic">New Topic</span>
                        </button>
                    </div>
                </div>

                <!-- Forum Categories -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <!-- Subject Forums -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center">
                            <i class="fas fa-book-open mr-2 text-primary-500 dark:text-primary-400"></i>
                            <span data-i18n="subject-forums">Subject Forums</span>
                        </h3>
                        <ul class="space-y-3">
                            <li class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400">
                                        <i class="fas fa-calculator"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="mathematics">Mathematics</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">12 topics</p>
                                    </div>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            </li>
                            <li class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400">
                                        <i class="fas fa-book"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="language">Language</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">8 topics</p>
                                    </div>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            </li>
                            <li class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400">
                                        <i class="fas fa-flask"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="science">Science</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">15 topics</p>
                                    </div>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            </li>
                            <li class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center text-yellow-600 dark:text-yellow-400">
                                        <i class="fas fa-landmark"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="history">History</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">9 topics</p>
                                    </div>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            </li>
                            <li class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400">
                                        <i class="fas fa-language"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="english">English</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">7 topics</p>
                                    </div>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            </li>
                        </ul>
                    </div>
                    
                    <!-- General Discussion -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center">
                            <i class="fas fa-comments mr-2 text-primary-500 dark:text-primary-400"></i>
                            <span data-i18n="general-discussion">General Discussion</span>
                        </h3>
                        <ul class="space-y-3">
                            <li class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400">
                                        <i class="fas fa-bullhorn"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="announcements">Announcements</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">5 topics</p>
                                    </div>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            </li>
                            <li class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400">
                                        <i class="fas fa-question-circle"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="help-support">Help & Support</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">18 topics</p>
                                    </div>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            </li>
                            <li class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center text-yellow-600 dark:text-yellow-400">
                                        <i class="fas fa-lightbulb"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="study-tips">Study Tips</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">10 topics</p>
                                    </div>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            </li>
                            <li class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center text-red-600 dark:text-red-400">
                                        <i class="fas fa-calendar-day"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="events-activities">Events & Activities</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">6 topics</p>
                                    </div>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Study Groups -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center">
                            <i class="fas fa-users mr-2 text-primary-500 dark:text-primary-400"></i>
                            <span data-i18n="study-groups">Study Groups</span>
                        </h3>
                        <ul class="space-y-3">
                            <li class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400">
                                        <i class="fas fa-calculator"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="calculus-group">Calculus Group</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">8 members</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 text-xs rounded-full font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400" data-i18n="joined">Joined</span>
                            </li>
                            <li class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400">
                                        <i class="fas fa-microscope"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="bio-study-group">Biology Study Group</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">12 members</p>
                                    </div>
                                </div>
                                <button class="px-2 py-1 text-xs font-medium rounded-full bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 hover:bg-primary-200 dark:hover:bg-primary-800/50 transition-colors" data-i18n="join">Join</button>
                            </li>
                            <li class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center text-yellow-600 dark:text-yellow-400">
                                        <i class="fas fa-landmark"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="wwii-research">WWII Research Team</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">6 members</p>
                                    </div>
                                </div>
                                <button class="px-2 py-1 text-xs font-medium rounded-full bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 hover:bg-primary-200 dark:hover:bg-primary-800/50 transition-colors" data-i18n="join">Join</button>
                            </li>
                            <li class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400">
                                        <i class="fas fa-language"></i>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-800 dark:text-gray-200" data-i18n="english-conversation">English Conversation Club</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">15 members</p>
                                    </div>
                                </div>
                                <span class="px-2 py-1 text-xs rounded-full font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400" data-i18n="joined">Joined</span>
                            </li>
                        </ul>
                        <button class="mt-4 text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium flex items-center transition-colors duration-200" data-i18n="create-study-group">
                            Create a new study group
                            <i class="fas fa-plus ml-1.5"></i>
                        </button>
                    </div>
                </div>

                <!-- Recent Discussions -->
                <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center">
                    <i class="fas fa-fire-alt mr-2 text-primary-500 dark:text-primary-400"></i>
                    <span data-i18n="recent-discussions">Recent Discussions</span>
                </h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm border border-gray-100 dark:border-gray-700 mb-6">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                            <thead class="bg-gray-50 dark:bg-gray-900/50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="topic">Topic</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="category">Category</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="last-reply">Last Reply</th>
                                    <th scope="col" class="px-6 py-3 text-center text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="replies">Replies</th>
                                    <th scope="col" class="px-6 py-3 text-center text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider" data-i18n="views">Views</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                <!-- Topic 1 -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <div class="ml-0">
                                                <p class="text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300">Tips for solving complex quadratic equations?</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Started by <span class="font-medium">Juan Pérez</span></p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-6 h-6 rounded-md bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400">
                                                <i class="fas fa-calculator text-xs"></i>
                                            </div>
                                            <span class="ml-2 text-sm text-gray-700 dark:text-gray-300" data-i18n="mathematics">Mathematics</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Today, 09:45 AM</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-700 dark:text-gray-300">12</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-700 dark:text-gray-300">48</td>
                                </tr>
                                
                                <!-- Topic 2 -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <div class="ml-0">
                                                <p class="text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300">[ANNOUNCEMENT] Changes to Science Lab Schedule</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Started by <span class="font-medium">Prof. Carlos Vega</span></p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-6 h-6 rounded-md bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400">
                                                <i class="fas fa-bullhorn text-xs"></i>
                                            </div>
                                            <span class="ml-2 text-sm text-gray-700 dark:text-gray-300" data-i18n="announcements">Announcements</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Yesterday, 15:20 PM</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-700 dark:text-gray-300">6</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-700 dark:text-gray-300">75</td>
                                </tr>
                                
                                <!-- Topic 3 -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <div class="ml-0">
                                                <p class="text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300">Study group for upcoming History exam?</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Started by <span class="font-medium">Ana Rodríguez</span></p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-6 h-6 rounded-md bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center text-yellow-600 dark:text-yellow-400">
                                                <i class="fas fa-landmark text-xs"></i>
                                            </div>
                                            <span class="ml-2 text-sm text-gray-700 dark:text-gray-300" data-i18n="history">History</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Oct 22, 2023</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-700 dark:text-gray-300">8</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-700 dark:text-gray-300">32</td>
                                </tr>
                                
                                <!-- Topic 4 -->
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <div class="ml-0">
                                                <p class="text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300">Resources for improving English pronunciation?</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Started by <span class="font-medium">María González</span></p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 w-6 h-6 rounded-md bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400">
                                                <i class="fas fa-language text-xs"></i>
                                            </div>
                                            <span class="ml-2 text-sm text-gray-700 dark:text-gray-300" data-i18n="english">English</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300">Oct 20, 2023</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-700 dark:text-gray-300">15</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-700 dark:text-gray-300">67</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Language translations
        const translations = {
            en: {
                "brand": "EduGrade",
                "my-dashboard": "My Dashboard",
                "welcome": "Welcome",
                "dashboard-summary": "Here's a summary of your academic performance.",
                "highest-grade": "Highest Grade",
                "math": "Mathematics",
                "course-average": "Course average",
                "current-subjects": "Current Subjects",
                "current-semester": "Current semester",
                "completed": "Completed",
                "pending-assignments": "Pending Assignments",
                "this-week": "This week",
                "view-assignments": "View assignments",
                "performance-by-subject": "Performance by Subject",
                "current-semester-option": "Current Semester",
                "previous-semester": "Previous Semester",
                "all": "All",
                "export": "Export",
                "loading-data": "Loading data...",
                "upcoming-evaluations": "Upcoming Evaluations",
                "math-exam": "Mathematics Exam",
                "oct-25": "October 25",
                "pending": "Pending",
                "time-remaining": "Time remaining",
                "history-presentation": "History Presentation",
                "oct-30": "October 30",
                "in-progress": "In progress",
                "progress": "Progress",
                "science-project": "Science Project",
                "nov-5": "November 5",
                "view-all-evaluations": "View all evaluations",
                "notifications": "Notifications",
                "new-math-grade": "New grade in Mathematics",
                "hours-ago": "2 hours ago",
                "reminder-history-exam": "Reminder: History exam coming soon",
                "yesterday": "Yesterday",
                "study-material-available": "Study material available for Science",
                "new-files": "3 new files",
                "days-ago": "2 days ago",
                "view-all-notifications": "View all notifications",
                "ai-learning-assistant": "AI Learning Assistant",
                "ai-learning-description": "Get help with any subject, homework, or exam preparation",
                "start-ai-session": "Start AI Session",
                "recent-activity": "Recent Activity",
                "assignment-submitted": "Assignment submitted: \"Literary Analysis\"",
                "assignment-submitted-desc": "Successfully submitted for Language class",
                "today-time": "Today, 10:35 AM",
                "new-grade-received": "New grade received: 9.5",
                "math-partial-exam": "Mathematics partial exam",
                "today-time-2": "Today, 08:45 AM",
                "study-material-accessed": "Study material accessed",
                "history-study-guide": "Reviewed study guide for History exam",
                "yesterday-time": "Yesterday, 4:20 PM",
                "view-full-history": "View full history",
                "my-learning": "My Learning",
                "dashboard": "Dashboard",
                "my-subjects": "My Subjects",
                "my-grades": "My Grades",
                "academic-schedule": "Academic Schedule",
                "resources": "Resources",
                "study-material": "Study Material",
                "pending-tasks": "Pending Tasks",
                "ai-tutor": "AI Tutor",
                "communication": "Communication",
                "messages": "Messages",
                "forums": "Forums",
                "help-center": "Help Center",
                "need-help": "Need help with your subjects or assignments?",
                "request-tutoring": "Request Tutoring",
                "profile": "My Profile",
                "settings": "Settings",
                "logout": "Logout",
                "overall-average": "Overall Average",
                "last-calculation": "Last calculation: Today",
                "new-count": "3 new",
                "new-grade": "New grade in Mathematics",
                "time-ago-1": "2 hours ago",
                "exam-reminder": "Exam reminder: History",
                "time-ago-2": "Yesterday",
                "new-materials": "New study materials available",
                "time-ago-3": "2 days ago",
                "mark-all-read": "Mark all as read",
                "new": "NEW",
                "ai-tutor-title": "AI Learning Assistant",
                "ai-tutor-description": "Get personalized help with your studies, assignments and exam preparation.",
                "select-subject": "Select Subject",
                "mathematics": "Mathematics",
                "language": "Language",
                "science": "Science",
                "history": "History",
                "english": "English",
                "help-type": "Help Type",
                "explain-concepts": "Explain Concepts",
                "homework-help": "Homework Help",
                "practice-exercises": "Practice Exercises",
                "exam-prep": "Exam Preparation",
                "new-conversation": "New Conversation",
                "current-focus": "Current Focus",
                "help-mode": "Help Mode",
                "save": "Save",
                "try-asking": "Try asking: \"Explain quadratic equations\"",
                "attach-file": "Attach file",
                "ai-welcome-1": "👋 Hello! I'm your AI learning assistant. I'm here to help you understand",
                "ai-welcome-2": "concepts.",
                "ai-welcome-3": "You can ask me questions about:",
                "ai-welcome-4": "Explaining mathematical concepts",
                "ai-welcome-5": "Solving equations step-by-step",
                "ai-welcome-6": "Help with homework problems",
                "ai-welcome-7": "Preparing for exams",
                "ai-welcome-8": "What would you like to learn about today?",
                "messages-title": "Messages",
                "messages-description": "Communicate with your teachers and classmates.",
                "new-message": "New Message",
                "teachers": "Teachers",
                "classmates": "Classmates",
                "online": "Online",
                "math-teacher": "Mathematics Teacher",
                "today": "Today",
                "teacher-msg-1": "Good morning, María. How is your preparation for the math test going?",
                "student-msg-1": "Good morning, Professor. I'm doing well, but I'm still having some trouble with quadratic equations.",
                "teacher-msg-2": "I understand. Would you like me to go over some examples during office hours today?",
                "student-msg-2": "That would be very helpful! What time are your office hours today?",
                "teacher-msg-3": "I'm available from 3-5pm today. Feel free to stop by anytime during that window.",
                "student-msg-3": "Perfect! I'll be there at 3:30pm. Thank you!",
                "teacher-msg-4": "Sure, I'll clarify that concept in class tomorrow. Is there anything specific about quadratic equations you find challenging?",
                "subjects-description": "View all your enrolled subjects for the current semester.",
                "semester": "Semester",
                "active": "Active",
                "teacher": "Teacher",
                "your-grade": "Your grade",
                "completion": "Completion",
                "details": "Details",
                "resources": "Resources",
                "grades-description": "View and track all your academic grades.",
                "semester-average": "Semester Average",
                "semester-period": "Period: 2023-2",
                "your-average": "Your Average",
                "class-average": "Class Average",
                "ranking": "Ranking",
                "subject": "Subject",
                "midterm": "Midterm",
                "project": "Project",
                "final-exam": "Final Exam",
                "final-grade": "Final Grade",
                "export-pdf": "Export PDF",
                "export-excel": "Export Excel",
                "schedule-description": "View your weekly class schedule.",
                "download-schedule": "Download Schedule",
                "sync-calendar": "Sync to Calendar",
                "monday": "Monday",
                "tuesday": "Tuesday",
                "wednesday": "Wednesday",
                "thursday": "Thursday",
                "friday": "Friday",
                "lunch-break": "Lunch Break",
                "science-lab": "Science Lab",
                "material-description": "Access all your course materials and resources.",
                "recent-materials": "Recent Materials",
                "view": "View",
                "download": "Download",
                "watch": "Watch",
                "all-materials": "All Materials",
                "name": "Name",
                "type": "Type",
                "date-added": "Date Added",
                "size": "Size",
                "actions": "Actions",
                "tasks-description": "Manage and track your assignments and homework.",
                "all-subjects": "All Subjects",
                "pending-only": "Pending Only",
                "completed-only": "Completed Only",
                "show-all": "Show All",
                "due-this-week": "Due This Week",
                "tomorrow": "Tomorrow",
                "view-details": "View details",
                "mark-complete": "Mark complete",
                "upcoming-tasks": "Upcoming Tasks",
                "task": "Task", 
                "due-date": "Due Date",
                "status": "Status",
                "not-started": "Not Started",
                "forums-title": "Forums",
                "forums-description": "Discuss topics with your classmates and teachers.",
                "new-topic": "New Topic",
                "subject-forums": "Subject Forums",
                "general-discussion": "General Discussion",
                "announcements": "Announcements",
                "help-support": "Help & Support",
                "study-tips": "Study Tips",
                "events-activities": "Events & Activities",
                "study-groups": "Study Groups",
                "calculus-group": "Calculus Group",
                "joined": "Joined",
                "bio-study-group": "Biology Study Group",
                "join": "Join",
                "wwii-research": "WWII Research Team",
                "english-conversation": "English Conversation Club",
                "create-study-group": "Create a new study group",
                "recent-discussions": "Recent Discussions",
                "topic": "Topic",
                "category": "Category",
                "last-reply": "Last Reply",
                "replies": "Replies",
                "views": "Views"
            },
            es: {
                "brand": "EduGrade",
                "my-dashboard": "Mi Dashboard",
                "welcome": "Bienvenida",
                "dashboard-summary": "Aquí tienes el resumen de tu desempeño académico.",
                "highest-grade": "Calificación Más Alta",
                "math": "Matemáticas",
                "course-average": "Promedio del curso",
                "current-subjects": "Materias Actuales",
                "current-semester": "Semestre actual",
                "completed": "Completado",
                "pending-assignments": "Tareas Pendientes",
                "this-week": "Esta semana",
                "view-assignments": "Ver tareas",
                "performance-by-subject": "Rendimiento por Materia",
                "current-semester-option": "Semestre Actual",
                "previous-semester": "Semestre Anterior",
                "all": "Todos",
                "export": "Exportar",
                "loading-data": "Cargando datos...",
                "upcoming-evaluations": "Próximas Evaluaciones",
                "math-exam": "Examen de Matemáticas",
                "oct-25": "25 de Octubre",
                "pending": "Pendiente",
                "time-remaining": "Tiempo restante",
                "history-presentation": "Presentación de Historia",
                "oct-30": "30 de Octubre",
                "in-progress": "En progreso",
                "progress": "Progreso",
                "science-project": "Trabajo de Ciencias",
                "nov-5": "5 de Noviembre",
                "view-all-evaluations": "Ver todas las evaluaciones",
                "notifications": "Notificaciones",
                "new-math-grade": "Nueva calificación en Matemáticas",
                "hours-ago": "Hace 2 horas",
                "reminder-history-exam": "Recordatorio: Examen de Historia próximamente",
                "yesterday": "Ayer",
                "study-material-available": "Material de estudio disponible para Ciencias",
                "new-files": "3 archivos nuevos",
                "days-ago": "Hace 2 días",
                "view-all-notifications": "Ver todas las notificaciones",
                "ai-learning-assistant": "Asistente de Aprendizaje IA",
                "ai-learning-description": "Obtén ayuda con cualquier materia, tarea o preparación para exámenes",
                "start-ai-session": "Iniciar Sesión IA",
                "recent-activity": "Actividad Reciente",
                "assignment-submitted": "Tarea entregada: \"Análisis Literario\"",
                "assignment-submitted-desc": "Entregado con éxito para la clase de Lenguaje",
                "today-time": "Hoy, 10:35 AM",
                "new-grade-received": "Nueva calificación recibida: 9.5",
                "math-partial-exam": "Examen parcial de Matemáticas",
                "today-time-2": "Hoy, 08:45 AM",
                "study-material-accessed": "Material de estudio accedido",
                "history-study-guide": "Revisado guía de estudio para el examen de Historia",
                "yesterday-time": "Ayer, 4:20 PM",
                "view-full-history": "Ver historial completo",
                "my-learning": "Mi Aprendizaje",
                "dashboard": "Dashboard",
                "my-subjects": "Mis Materias",
                "my-grades": "Mis Calificaciones",
                "academic-schedule": "Horario Académico",
                "resources": "Recursos",
                "study-material": "Material de Estudio",
                "pending-tasks": "Tareas Pendientes",
                "ai-tutor": "Tutor IA",
                "communication": "Comunicación",
                "messages": "Mensajes",
                "forums": "Foros",
                "help-center": "Centro de Ayuda",
                "need-help": "¿Necesitas ayuda con tus materias o tareas?",
                "request-tutoring": "Solicitar Tutoría",
                "profile": "Mi Perfil",
                "settings": "Configuración",
                "logout": "Cerrar Sesión",
                "overall-average": "Promedio General",
                "last-calculation": "Último cálculo: Hoy",
                "new-count": "3 nuevas",
                "new-grade": "Nueva calificación en Matemáticas",
                "time-ago-1": "Hace 2 horas",
                "exam-reminder": "Recordatorio de examen: Historia",
                "time-ago-2": "Ayer",
                "new-materials": "Nuevo material de estudio disponible",
                "time-ago-3": "Hace 2 días",
                "mark-all-read": "Marcar todas como leídas",
                "new": "NUEVO",
                "ai-tutor-title": "Asistente de Aprendizaje IA",
                "ai-tutor-description": "Obtén ayuda personalizada con tus estudios, tareas y preparación para exámenes.",
                "select-subject": "Seleccionar Materia",
                "mathematics": "Matemáticas",
                "language": "Lenguaje",
                "science": "Ciencias",
                "history": "Historia",
                "english": "Inglés",
                "help-type": "Tipo de Ayuda",
                "explain-concepts": "Explicar Conceptos",
                "homework-help": "Ayuda con Tareas",
                "practice-exercises": "Ejercicios de Práctica",
                "exam-prep": "Preparación para Exámenes",
                "new-conversation": "Nueva Conversación",
                "current-focus": "Enfoque Actual",
                "help-mode": "Modo de Ayuda",
                "save": "Guardar",
                "try-asking": "Intenta preguntar: \"Explica ecuaciones cuadráticas\"",
                "attach-file": "Adjuntar archivo",
                "ai-welcome-1": "👋 ¡Hola! Soy tu asistente de aprendizaje con IA. Estoy aquí para ayudarte a entender conceptos de",
                "ai-welcome-2": ".",
                "ai-welcome-3": "Puedes hacerme preguntas sobre:",
                "ai-welcome-4": "Explicación de conceptos matemáticos",
                "ai-welcome-5": "Resolución de ecuaciones paso a paso",
                "ai-welcome-6": "Ayuda con problemas de tarea",
                "ai-welcome-7": "Preparación para exámenes",
                "ai-welcome-8": "¿Qué te gustaría aprender hoy?",
                "messages-title": "Mensajes",
                "messages-description": "Comunícate con tus profesores y compañeros de clase.",
                "new-message": "Nuevo Mensaje",
                "teachers": "Profesores",
                "classmates": "Compañeros",
                "online": "En línea",
                "math-teacher": "Profesor de Matemáticas",
                "today": "Hoy",
                "teacher-msg-1": "Buenos días, María. ¿Cómo va tu preparación para el examen de matemáticas?",
                "student-msg-1": "Buenos días, Profesor. Voy bien, pero todavía tengo algunas dificultades con las ecuaciones cuadráticas.",
                "teacher-msg-2": "Entiendo. ¿Te gustaría que revisáramos algunos ejemplos durante mis horas de oficina hoy?",
                "student-msg-2": "¡Eso sería muy útil! ¿A qué hora son sus horas de oficina hoy?",
                "teacher-msg-3": "Estoy disponible de 3 a 5 pm hoy. Siéntete libre de pasar en cualquier momento durante ese horario.",
                "student-msg-3": "¡Perfecto! Estaré allí a las 3:30 pm. ¡Gracias!",
                "teacher-msg-4": "Claro, aclararé ese concepto en clase mañana. ¿Hay algo específico sobre las ecuaciones cuadráticas que encuentres difícil?",
                "subjects-description": "Ver todas tus materias inscritas para el semestre actual.",
                "semester": "Semestre",
                "active": "Activo",
                "teacher": "Profesor",
                "your-grade": "Tu calificación",
                "completion": "Completado",
                "details": "Detalles",
                "resources": "Recursos",
                "grades-description": "Ver y seguir todas tus calificaciones académicas.",
                "semester-average": "Promedio del Semestre",
                "semester-period": "Periodo: 2023-2",
                "your-average": "Tu Promedio",
                "class-average": "Promedio de la Clase",
                "ranking": "Posición",
                "subject": "Materia",
                "midterm": "Parcial",
                "project": "Proyecto",
                "final-exam": "Examen Final",
                "final-grade": "Calificación Final",
                "export-pdf": "Exportar PDF",
                "export-excel": "Exportar Excel",
                "schedule-description": "Ver tu horario semanal de clases.",
                "download-schedule": "Descargar Horario",
                "sync-calendar": "Sincronizar con Calendario",
                "monday": "Lunes",
                "tuesday": "Martes",
                "wednesday": "Miércoles",
                "thursday": "Jueves",
                "friday": "Viernes",
                "lunch-break": "Descanso para Almuerzo",
                "science-lab": "Laboratorio de Ciencias",
                "material-description": "Accede a todos tus materiales y recursos de curso.",
                "recent-materials": "Materiales Recientes",
                "view": "Ver",
                "download": "Descargar",
                "watch": "Ver Video",
                "all-materials": "Todos los Materiales",
                "name": "Nombre",
                "type": "Tipo",
                "date-added": "Fecha Añadido",
                "size": "Tamaño",
                "actions": "Acciones",
                "tasks-description": "Administra y haz seguimiento de tus tareas y deberes.",
                "all-subjects": "Todas las Materias",
                "pending-only": "Solo Pendientes",
                "completed-only": "Solo Completadas",
                "show-all": "Mostrar Todas",
                "due-this-week": "Entregas Esta Semana",
                "tomorrow": "Mañana",
                "view-details": "Ver detalles",
                "mark-complete": "Marcar como completada",
                "upcoming-tasks": "Próximas Tareas",
                "task": "Tarea",
                "due-date": "Fecha de Entrega",
                "status": "Estado",
                "not-started": "No Iniciada",
                "forums-title": "Foros",
                "forums-description": "Discute temas con tus compañeros y profesores.",
                "new-topic": "Nuevo Tema",
                "subject-forums": "Foros por Materia",
                "general-discussion": "Discusión General",
                "announcements": "Anuncios",
                "help-support": "Ayuda y Soporte",
                "study-tips": "Consejos de Estudio",
                "events-activities": "Eventos y Actividades",
                "study-groups": "Grupos de Estudio",
                "calculus-group": "Grupo de Cálculo",
                "joined": "Unido",
                "bio-study-group": "Grupo de Estudio de Biología",
                "join": "Unirse",
                "wwii-research": "Equipo de Investigación WWII",
                "english-conversation": "Club de Conversación en Inglés",
                "create-study-group": "Crear nuevo grupo de estudio",
                "recent-discussions": "Discusiones Recientes",
                "topic": "Tema",
                "category": "Categoría",
                "last-reply": "Última Respuesta",
                "replies": "Respuestas",
                "views": "Vistas"
            }
        };

        // Current language
        let currentLang = 'es';

        // Update UI with translations
        function updateLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
            
            // Update placeholders
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (translations[lang][key]) {
                    element.placeholder = translations[lang][key];
                }
            });
            
            // Update chat input placeholder based on current subject
            updateChatPlaceholder();
            
            // Update current date with new language
            setCurrentDate();
        }

        // Toggle sidebar on mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            
            sidebar.classList.toggle('-translate-x-full');
            overlay.classList.toggle('hidden');
        }
        
        // User menu toggle
        const userMenuButton = document.getElementById('user-menu-button');
        const userMenu = document.getElementById('user-menu');
        
        userMenuButton.addEventListener('click', () => {
            userMenu.classList.toggle('hidden');
            userMenu.classList.toggle('opacity-0');
            userMenu.classList.toggle('scale-95');
            userMenuButton.setAttribute('aria-expanded', userMenu.classList.contains('hidden') ? 'false' : 'true');
        });
        
        // Notifications menu toggle
        const notificationsButton = document.getElementById('notifications-button');
        const notificationsMenu = document.getElementById('notifications-menu');
        
        notificationsButton.addEventListener('click', () => {
            notificationsMenu.classList.toggle('hidden');
            notificationsMenu.classList.toggle('opacity-0');
            notificationsMenu.classList.toggle('scale-95');
            notificationsButton.setAttribute('aria-expanded', notificationsMenu.classList.contains('hidden') ? 'false' : 'true');
        });
        
        // Language menu toggle
        const languageToggle = document.getElementById('language-toggle');
        const langSwitcher = document.getElementById('lang-switcher');
        
        languageToggle.addEventListener('click', () => {
            langSwitcher.classList.toggle('hidden');
        });
        
        // Language selection
        document.querySelectorAll('.language-option').forEach(option => {
            option.addEventListener('click', () => {
                const lang = option.getAttribute('data-lang');
                updateLanguage(lang);
                langSwitcher.classList.add('hidden');
            });
        });
        
        // Close menus when clicking outside
        document.addEventListener('click', (event) => {
            // Close user menu
            if (!userMenuButton.contains(event.target) && !userMenu.contains(event.target)) {
                userMenu.classList.add('hidden', 'opacity-0', 'scale-95');
                userMenuButton.setAttribute('aria-expanded', 'false');
            }
            
            // Close notifications menu
            if (!notificationsButton.contains(event.target) && !notificationsMenu.contains(event.target)) {
                notificationsMenu.classList.add('hidden', 'opacity-0', 'scale-95');
                notificationsButton.setAttribute('aria-expanded', 'false');
            }
            
            // Close language switcher
            if (!languageToggle.contains(event.target) && !langSwitcher.contains(event.target)) {
                langSwitcher.classList.add('hidden');
            }
        });
        
        // Dark mode toggle
        const themeToggleBtn = document.getElementById('theme-toggle');
        
        // Check for dark mode preference
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        
        // Listen for changes to the user's dark mode preference
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
            
            // Update charts for dark mode
            updateChartThemes();
        });
        
        // Handle manual dark mode toggle
        themeToggleBtn.addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            
            // Update charts for dark mode
            updateChartThemes();
        });
        
        // Display current date
        function setCurrentDate() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            let dateString;
            
            if (currentLang === 'es') {
                dateString = now.toLocaleDateString('es-ES', options);
            } else {
                dateString = now.toLocaleDateString('en-US', options);
            }
            
            document.getElementById('current-date').textContent = dateString.charAt(0).toUpperCase() + dateString.slice(1);
        }
        
        // Function to navigate between sections
        function navigateTo(viewId) {
            // Hide all views
            document.querySelectorAll('.view-content').forEach(view => {
                view.classList.add('hidden');
            });
            
            // Show requested view
            document.getElementById(viewId + '-view').classList.remove('hidden');
            
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                if (link.getAttribute('data-view') === viewId) {
                    link.classList.add('bg-primary-50', 'dark:bg-primary-900/30');
                } else {
                    link.classList.remove('bg-primary-50', 'dark:bg-primary-900/30');
                }
            });
            
            // Close mobile sidebar after navigation
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            if (window.innerWidth < 768) {
                sidebar.classList.add('-translate-x-full');
                overlay.classList.add('hidden');
            }
        }
        
        // Updated charts function
        function initializeCharts() {
            const chartCtx = document.getElementById('performanceChart').getContext('2d');
            
            // Simulate loading data
            showChartLoading(true);
            
            // Adjusted data based on dark mode
            const isDarkMode = document.documentElement.classList.contains('dark');
            
            const chartOptions = {
                type: 'bar',
                data: {
                    labels: [
                        currentLang === 'es' ? 'Matemáticas' : 'Mathematics', 
                        currentLang === 'es' ? 'Español' : 'Language', 
                        currentLang === 'es' ? 'Ciencias' : 'Science', 
                        currentLang === 'es' ? 'Historia' : 'History', 
                        currentLang === 'es' ? 'Inglés' : 'English'
                    ],
                    datasets: [{
                        label: currentLang === 'es' ? 'Promedio' : 'Average',
                        data: [8.5, 7.8, 9.0, 8.2, 8.7],
                        backgroundColor: [
                            'rgba(99, 102, 241, 0.8)',
                            'rgba(239, 68, 68, 0.8)',
                            'rgba(245, 158, 11, 0.8)',
                            'rgba(16, 185, 129, 0.8)',
                            'rgba(59, 130, 246, 0.8)'
                        ],
                        borderColor: [
                            'rgba(99, 102, 241, 1)',
                            'rgba(239, 68, 68, 1)',
                            'rgba(245, 158, 11, 1)',
                            'rgba(16, 185, 129, 1)',
                            'rgba(59, 130, 246, 1)'
                        ],
                        borderWidth: 2,
                        borderRadius: 6,
                        hoverOffset: 4
                    }]
                },
                options: { 
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: isDarkMode ? 'rgba(31, 41, 55, 0.95)' : 'rgba(255, 255, 255, 0.95)',
                            titleColor: isDarkMode ? '#f3f4f6' : '#1f2937',
                            bodyColor: isDarkMode ? '#f3f4f6' : '#1f2937',
                            padding: 12,
                            borderWidth: 1,
                            borderColor: isDarkMode ? 'rgba(75, 85, 99, 0.2)' : 'rgba(229, 231, 235, 0.8)',
                            usePointStyle: true,
                            boxWidth: 8,
                            boxPadding: 4,
                            cornerRadius: 8
                        }
                    },
                    scales: { 
                        y: { 
                            beginAtZero: true,
                            max: 10,
                            grid: {
                                color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: { 
                                color: isDarkMode ? '#f3f4f6' : '#4b5563',
                                font: { weight: 'bold' },
                                padding: 8,
                                callback: function(value) {
                                    return value.toFixed(1);
                                }
                            }
                        },
                        x: { 
                            grid: {
                                display: false
                            },
                            ticks: { 
                                color: isDarkMode ? '#f3f4f6' : '#4b5563',
                                font: { weight: 'bold' },
                                padding: 8
                            }
                        }
                    },
                    animation: {
                        duration: 1500,
                        easing: 'easeOutQuart'
                    }
                }
            };
            
            // Simulate data loading delay
            setTimeout(() => {
                showChartLoading(false);
                window.performanceChart = new Chart(chartCtx, chartOptions);
                
                // Handle chart period changes
                document.getElementById('chart-period').addEventListener('change', function() {
                    showChartLoading(true);
                    
                    // Simulate fetching new data
                    setTimeout(() => {
                        const period = this.value;
                        let newData;
                        
                        if (period === 'month') {
                            newData = [8.3, 7.6, 8.8, 8.0, 8.5];
                        } else if (period === 'quarter') {
                            newData = [8.4, 7.7, 8.9, 8.1, 8.6];
                        } else { // year
                            newData = [8.5, 7.8, 9.0, 8.2, 8.7];
                        }
                        
                        window.performanceChart.data.datasets[0].data = newData;
                        window.performanceChart.update();
                        showChartLoading(false);
                    }, 800);
                });
                
                // Export chart functionality (simplified for demo)
                document.getElementById('download-chart').addEventListener('click', function() {
                    const message = currentLang === 'es' ? 
                        'En una implementación real, aquí se descargaría el gráfico como imagen o PDF.' : 
                        'In a real implementation, the chart would be downloaded as an image or PDF here.';
                    alert(message);
                });
            }, 1000);
        }
        
        // Function to update chart themes when dark mode changes
        function updateChartThemes() {
            const isDarkMode = document.documentElement.classList.contains('dark');
            
            // Update performance chart if it exists
            if (window.performanceChart) {
                window.performanceChart.options.plugins.tooltip.backgroundColor = isDarkMode ? 'rgba(31, 41, 55, 0.95)' : 'rgba(255, 255, 255, 0.95)';
                window.performanceChart.options.plugins.tooltip.titleColor = isDarkMode ? '#f3f4f6' : '#1f2937';
                window.performanceChart.options.plugins.tooltip.bodyColor = isDarkMode ? '#f3f4f6' : '#1f2937';
                window.performanceChart.options.plugins.tooltip.borderColor = isDarkMode ? 'rgba(75, 85, 99, 0.2)' : 'rgba(229, 231, 235, 0.8)';
                window.performanceChart.options.scales.y.grid.color = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.05)';
                window.performanceChart.options.scales.y.ticks.color = isDarkMode ? '#f3f4f6' : '#4b5563';
                window.performanceChart.options.scales.x.ticks.color = isDarkMode ? '#f3f4f6' : '#4b5563';
                window.performanceChart.update();
            }
        }
        
        function showChartLoading(isLoading) {
            const loadingOverlay = document.getElementById('chart-loading');
            loadingOverlay.classList.toggle('hidden', !isLoading);
        }

        // AI Tutor - Subject selection
        document.querySelectorAll('.subject-btn').forEach(button => {
            button.addEventListener('click', function() {
                // Deactivate all subject buttons
                document.querySelectorAll('.subject-btn').forEach(btn => {
                    btn.classList.remove('bg-primary-100', 'dark:bg-primary-900/30', 'text-primary-800', 'dark:text-primary-200');
                    btn.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-200');
                });
                
                // Activate selected button
                this.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-200');
                this.classList.add('bg-primary-100', 'dark:bg-primary-900/30', 'text-primary-800', 'dark:text-primary-200');
                
                // Update current subject display
                const subject = this.getAttribute('data-subject');
                const subjectName = this.querySelector('span').textContent;
                document.getElementById('current-subject').textContent = subjectName;
                
                // Update chat suggestions based on subject
                updateSubjectSuggestions(subject);
                
                // Update chat placeholder
                updateChatPlaceholder();
            });
        });

        // AI Tutor - Help type selection
        document.querySelectorAll('.help-type-btn').forEach(button => {
            button.addEventListener('click', function() {
                // Deactivate all help type buttons
                document.querySelectorAll('.help-type-btn').forEach(btn => {
                    btn.classList.remove('bg-primary-100', 'dark:bg-primary-900/30', 'text-primary-800', 'dark:text-primary-200');
                    btn.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-200');
                });
                
                // Activate selected button
                this.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-200');
                this.classList.add('bg-primary-100', 'dark:bg-primary-900/30', 'text-primary-800', 'dark:text-primary-200');
                
                // Update current help mode display
                const helpType = this.getAttribute('data-help-type');
                const helpTypeName = this.querySelector('span').textContent;
                document.getElementById('current-help-mode').textContent = helpTypeName;
                
                // Update chat suggestions based on help type
                updateHelpTypeSuggestions(helpType);
            });
        });

        // Update chat placeholder based on current subject
        function updateChatPlaceholder() {
            const chatInput = document.getElementById('chat-input');
            if (chatInput) {
                const currentSubject = document.getElementById('current-subject').textContent;
                
                if (currentLang === 'es') {
                    chatInput.placeholder = `Pregunta algo sobre ${currentSubject}...`;
                } else {
                    chatInput.placeholder = `Ask something about ${currentSubject}...`;
                }
            }
        }

        // Update suggestions based on subject
        function updateSubjectSuggestions(subject) {
            const suggestionText = document.getElementById('suggestion-text');
            if (!suggestionText) return;
            
            let suggestion = '';
            
            if (currentLang === 'es') {
                switch(subject) {
                    case 'math':
                        suggestion = 'Prueba preguntando: "Explica ecuaciones cuadráticas"';
                        break;
                    case 'language':
                        suggestion = 'Prueba preguntando: "¿Cómo analizar un poema?"';
                        break;
                    case 'science':
                        suggestion = 'Prueba preguntando: "Explica la fotosíntesis"';
                        break;
                    case 'history':
                        suggestion = 'Prueba preguntando: "¿Qué causó la Primera Guerra Mundial?"';
                        break;
                    case 'english':
                        suggestion = 'Prueba preguntando: "¿Cómo usar los tiempos verbales?"';
                        break;
                    default:
                        suggestion = 'Prueba preguntando: "Explica ecuaciones cuadráticas"';
                }
            } else {
                switch(subject) {
                    case 'math':
                        suggestion = 'Try asking: "Explain quadratic equations"';
                        break;
                    case 'language':
                        suggestion = 'Try asking: "How to analyze a poem?"';
                        break;
                    case 'science':
                        suggestion = 'Try asking: "Explain photosynthesis"';
                        break;
                    case 'history':
                        suggestion = 'Try asking: "What caused World War I?"';
                        break;
                    case 'english':
                        suggestion = 'Try asking: "How to use verb tenses?"';
                        break;
                    default:
                        suggestion = 'Try asking: "Explain quadratic equations"';
                }
            }
            
            suggestionText.textContent = suggestion;
        }

        // Update suggestions based on help type
        function updateHelpTypeSuggestions(helpType) {
            const suggestionText = document.getElementById('suggestion-text');
            if (!suggestionText) return;
            
            const currentSubject = document.getElementById('current-subject').textContent.toLowerCase();
            let suggestion = '';
            
            if (currentLang === 'es') {
                switch(helpType) {
                    case 'explain':
                        suggestion = `Prueba preguntando: "Explica conceptos clave de ${currentSubject}"`;
                        break;
                    case 'homework':
                        suggestion = `Prueba preguntando: "¿Cómo resuelvo este problema de ${currentSubject}?"`;
                        break;
                    case 'practice':
                        suggestion = `Prueba preguntando: "Dame ejercicios de práctica de ${currentSubject}"`;
                        break;
                    case 'exam':
                        suggestion = `Prueba preguntando: "Ayúdame a preparar mi examen de ${currentSubject}"`;
                        break;
                    default:
                        suggestion = `Prueba preguntando: "Explica conceptos clave de ${currentSubject}"`;
                }
            } else {
                switch(helpType) {
                    case 'explain':
                        suggestion = `Try asking: "Explain key concepts of ${currentSubject}"`;
                        break;
                    case 'homework':
                        suggestion = `Try asking: "How do I solve this ${currentSubject} problem?"`;
                        break;
                    case 'practice':
                        suggestion = `Try asking: "Give me practice exercises for ${currentSubject}"`;
                        break;
                    case 'exam':
                        suggestion = `Try asking: "Help me prepare for my ${currentSubject} exam"`;
                        break;
                    default:
                        suggestion = `Try asking: "Explain key concepts of ${currentSubject}"`;
                }
            }
            
            suggestionText.textContent = suggestion;
        }

        // Function to update welcome message based on subject change
        function updateWelcomeMessage() {
            const chatMessages = document.getElementById('chat-messages');
            const currentSubject = document.getElementById('current-subject').textContent;
            
            // Clear chat messages and add welcome message
            chatMessages.innerHTML = '';
            
            let welcomeHTML = '';
            if (currentLang === 'es') {
                welcomeHTML = `
                <div class="ai-message">
                    <div class="markdown-content">
                        <p>👋 ¡Hola! Soy tu asistente de aprendizaje con IA. Estoy aquí para ayudarte a entender conceptos de <strong>${currentSubject}</strong>.</p>
                        <p>Puedes hacerme preguntas sobre:</p>
                        <ul>
                            <li>Explicación de conceptos de ${currentSubject}</li>
                            <li>Resolución de problemas paso a paso</li>
                            <li>Ayuda con tareas</li>
                            <li>Preparación para exámenes</li>
                        </ul>
                        <p>¿Qué te gustaría aprender hoy?</p>
                    </div>
                </div>`;
            } else {
                welcomeHTML = `
                <div class="ai-message">
                    <div class="markdown-content">
                        <p>👋 Hello! I'm your AI learning assistant. I'm here to help you understand <strong>${currentSubject}</strong> concepts.</p>
                        <p>You can ask me questions about:</p>
                        <ul>
                            <li>Explaining ${currentSubject} concepts</li>
                            <li>Solving problems step-by-step</li>
                            <li>Help with homework</li>
                            <li>Preparing for exams</li>
                        </ul>
                        <p>What would you like to learn about today?</p>
                    </div>
                </div>`;
            }
            
            chatMessages.innerHTML = welcomeHTML;
        }

        // New conversation button
        document.getElementById('new-chat-btn').addEventListener('click', updateWelcomeMessage);

        // Send message in chat
        document.getElementById('send-message').addEventListener('click', async function() {
            sendMessage();
        });

        // Also trigger send on Enter key (but allow Shift+Enter for new lines)
        document.getElementById('chat-input').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Function to send message via Poe API
        async function sendMessage() {
            const chatInput = document.getElementById('chat-input');
            const userMessage = chatInput.value.trim();
            
            if (!userMessage) return;
            
            const chatMessages = document.getElementById('chat-messages');
            const currentSubject = document.getElementById('current-subject').textContent;
            
            // Add user message to chat
            const userMessageHTML = `
            <div class="user-message">
                <p>${escapeHTML(userMessage)}</p>
            </div>`;
            
            chatMessages.insertAdjacentHTML('beforeend', userMessageHTML);
            
            // Clear input
            chatInput.value = '';
            
            // Add typing indicator
            const typingIndicatorHTML = `
            <div class="ai-message typing-indicator-container">
                <div class="typing-indicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>`;
            
            chatMessages.insertAdjacentHTML('beforeend', typingIndicatorHTML);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // If Poe API is not available, use fallback response
            if (!window.Poe || typeof window.Poe.sendUserMessage !== 'function') {
                console.log("Poe API not available, using fallback");
                setTimeout(() => {
                    // Remove typing indicator
                    const typingIndicator = document.querySelector('.typing-indicator-container');
                    if (typingIndicator) {
                        typingIndicator.remove();
                    }
                    
                    // Generate a simple fallback response
                    let response = "";
                    const helpMode = document.getElementById('current-help-mode').textContent;
                    
                    if (userMessage.toLowerCase().includes("hola") || userMessage.toLowerCase().includes("hello")) {
                        response = `Hola, soy tu asistente de aprendizaje para ${currentSubject}. ¿En qué puedo ayudarte hoy?`;
                    } else if (userMessage.toLowerCase().includes("ecuacion") || userMessage.toLowerCase().includes("equation")) {
                        response = "Las ecuaciones cuadráticas tienen la forma ax² + bx + c = 0. Para resolverlas, puedes usar la fórmula cuadrática: x = (-b ± √(b² - 4ac)) / (2a)";
                    } else if (userMessage.toLowerCase().includes("ejercicio") || userMessage.toLowerCase().includes("exercise")) {
                        response = "Aquí tienes un ejercicio práctico: Resuelve la ecuación 3x² + 5x - 2 = 0 usando la fórmula cuadrática.";
                    } else {
                        response = `He recibido tu pregunta sobre ${currentSubject}. Para ofrecerte la mejor ayuda educativa, te recomendaría consultar con tu profesor o revisar tus materiales de estudio para este tema específico.`;
                    }
                    
                    // Add fallback response to chat
                    const aiMessageHTML = `
                    <div class="ai-message">
                        <div class="markdown-content">
                            <p>${response}</p>
                        </div>
                    </div>`;
                    
                    chatMessages.insertAdjacentHTML('beforeend', aiMessageHTML);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000);
                return;
            }
            
            try {
                // Register a handler for streaming responses
                const handlerId = 'ai-tutor-handler-' + Date.now();
                
                window.Poe.registerHandler(handlerId, (result, context) => {
                    try {
                        if (!result || !result.responses || result.responses.length === 0) {
                            throw new Error("Invalid response format");
                        }
                        
                        const message = result.responses[0];
                        
                        // Remove typing indicator if exists
                        const typingIndicator = document.querySelector('.typing-indicator-container');
                        if (typingIndicator) {
                            typingIndicator.remove();
                        }
                        
                        // Check if there's already a message from this response
                        let aiMessageDiv = document.getElementById('message-' + message.messageId);
                        
                        if (!aiMessageDiv) {
                            // Create new message
                            aiMessageDiv = document.createElement('div');
                            aiMessageDiv.className = 'ai-message';
                            aiMessageDiv.id = 'message-' + message.messageId;
                            
                            // Create a div for the markdown content
                            const markdownDiv = document.createElement('div');
                            markdownDiv.className = 'markdown-content';
                            aiMessageDiv.appendChild(markdownDiv);
                            
                            chatMessages.appendChild(aiMessageDiv);
                        }
                        
                        // Update the message content (parsed as markdown)
                        const markdownDiv = aiMessageDiv.querySelector('.markdown-content');
                        markdownDiv.innerHTML = marked.parse(message.content || "");
                        
                        // Scroll to bottom
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    } catch (error) {
                        console.error("Error handling response:", error);
                    }
                });
                
                // Create a prompt for the AI based on subject and help mode
                const helpMode = document.getElementById('current-help-mode').textContent;
                const prompt = `I'm a student who needs help with ${currentSubject}. My request: ${userMessage}`;
                
                // Send the message
                await window.Poe.sendUserMessage("@Claude-3.7-Sonnet " + prompt, {
                    handler: handlerId,
                    stream: true,
                    openChat: false
                });
            } catch (error) {
                console.error("Error sending message:", error);
                
                // Remove typing indicator
                const typingIndicator = document.querySelector('.typing-indicator-container');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
                
                // Add error message
                const errorMessageHTML = `
                <div class="ai-message">
                    <div class="markdown-content">
                        <p class="text-red-500 dark:text-red-400">Lo siento, hubo un error al procesar tu solicitud. Por favor intenta nuevamente o revisa tu conexión.</p>
                    </div>
                </div>`;
                
                chatMessages.insertAdjacentHTML('beforeend', errorMessageHTML);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }

        // Helper function to escape HTML to prevent XSS
        function escapeHTML(str) {
            return str.replace(/[&<>'"]/g, 
                tag => ({
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    "'": '&#39;',
                    '"': '&quot;'
                }[tag]));
        }

        // Document ready
        document.addEventListener('DOMContentLoaded', function() {
            setCurrentDate();
            initializeCharts();
            
            // Show dashboard view by default
            navigateTo('dashboard');
            
            // Set default language to Spanish
            updateLanguage('es');
        });
    </script>
</body>
</html>